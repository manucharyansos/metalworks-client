(window.webpackJsonp=window.webpackJsonp||[]).push([[38,7,14,15],{385:function(e,t,r){"use strict";r.r(t);r(242);var n={name:"InputWithLabelIcon",props:{label:{type:String,default:""},label_Id:{type:String,default:""},for_LAbel:{type:String,default:""},type:{type:String,default:""},value:{type:[String,Array,Number],default:""},placeholder:{type:String,default:""},classes:{type:String,default:""},label_class:{type:[String,Object],default:""},disabled:{type:Boolean,default:!1}}},l=r(15),component=Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative"},[t("span",{staticClass:"absolute start-0 bottom-3 text-gray-500 dark:text-gray-400"},[e._t("label_svg")],2),e._v(" "),t("input",{staticClass:"block py-2.5 ps-6 pe-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",class:e.classes,attrs:{id:e.label_Id,type:e.type,placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),t("label",{staticClass:"absolute text-sm dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-1 -z-10 origin-[0] peer-placeholder-shown:start-6 peer-focus:start-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto",class:e.label_class,attrs:{for:e.for_LAbel}},[e._v("\n    "+e._s(e.label)+"\n  ")])])}),[],!1,null,"528a76fd",null);t.default=component.exports},387:function(e,t,r){var content=r(396);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(35).default)("2c589959",content,!0,{sourceMap:!1})},388:function(e,t,r){"use strict";r.r(t);r(33),r(52),r(23),r(12),r(242);var n={props:{label:{type:String,default:""},value:{type:[Number,Object,String],default:null},name:{type:String,default:""},dates:{type:Array,default:function(){return[]}}},data:function(){return{selectValue:this.value}},watch:{selectValue:function(e){this.$emit("input",e)}}},l=r(15),component=Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("div",[e.label?t("label",{staticClass:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",attrs:{for:e.name}},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),e._v(" "),t("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.selectValue,expression:"selectValue"}],staticClass:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",attrs:{id:e.name,name:e.name},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectValue=t.target.multiple?r:r[0]}}},"select",e.$attrs,!1),e._l(e.dates,(function(data,r){return t("option",{key:r,domProps:{value:data}},[e._v("\n      "+e._s(data.name)+"\n    ")])})),0),e._v(" "),e.dates&&0!==e.dates.length?e._e():t("p",{staticClass:"mt-2 text-sm text-red-500"},[e._v("\n    Տվյալներ չկան։\n  ")])])}),[],!1,null,null,null);t.default=component.exports},391:function(e,t,r){"use strict";var n=r(3),l=r(244).trim;n({target:"String",proto:!0,forced:r(392)("trim")},{trim:function(){return l(this)}})},392:function(e,t,r){"use strict";var n=r(98).PROPER,l=r(5),o=r(245);e.exports=function(e){return l((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e}))}},395:function(e,t,r){"use strict";r(387)},396:function(e,t,r){var n=r(34)((function(i){return i[1]}));n.push([e.i,"canvas{background-color:#fff;border:1px solid #ccc;display:block;margin:auto}.line-color{stroke:#000}",""]),n.locals={},e.exports=n},398:function(e,t,r){"use strict";r.r(t);var n=r(0),l=(r(11),r(12),r(44),r(384)),o=r(402),c=r(404),d={props:{dxfUrl:{type:String,required:!0}},mounted:function(){this.loadDxfFile()},methods:{loadDxfFile:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,d,f,v,h,y,_,x,m,w,O,C,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.dxfUrl);case 3:return r=t.sent,t.next=6,r.text();case 6:n=t.sent,d=new c.a,f=d.parseSync(n),v=new l.Zc,h=new l.bc(75,e.$refs.canvas.clientWidth/e.$refs.canvas.clientHeight,.1,1e3),(y=new o.a({canvas:e.$refs.canvas,antialias:!0})).setClearColor(16777215,1),y.setSize(e.$refs.canvas.clientWidth,e.$refs.canvas.clientHeight),_=new l.ab,f.entities.forEach((function(e){if("LINE"===e.type){var t=new l.jb({color:0}),r=(new l.n).setFromPoints([new l.vd(e.vertices[0].x,e.vertices[0].y,0),new l.vd(e.vertices[1].x,e.vertices[1].y,0)]),line=new l.ib(r,t);_.add(line)}})),v.add(_),x=(new l.k).setFromObject(_),m=x.getCenter(new l.vd),w=x.getSize(new l.vd),_.position.set(-m.x,-m.y,0),O=Math.max(w.x,w.y),C=h.fov*(Math.PI/180),k=Math.abs(O/(2*Math.tan(C/2))),h.position.set(0,0,k+10),h.lookAt(new l.vd(0,0,0)),y.render(v,h),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(0),console.error("Failed to load DXF file:",t.t0);case 32:case"end":return t.stop()}}),t,null,[[0,29]])})))()}}},f=(r(395),r(15)),component=Object(f.a)(d,(function(){var e=this._self._c;return e("div",[e("canvas",{ref:"canvas",staticClass:"line-color w-full flex items-center justify-center hover:scale-150"})])}),[],!1,null,null,null);t.default=component.exports},473:function(e,t,r){"use strict";r.r(t);r(39),r(50),r(23),r(12),r(77),r(78),r(51),r(44);var n=r(0),l=r(36),o=(r(11),r(33),r(80),r(53),r(24),r(97),r(26),r(55),r(391),r(30),r(247),r(248),r(160),r(79)),c=r(388),d=r(385);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={components:{DxfViewer:r(398).default,InputWithLabelIcon:d.default,SelectWithLabel:c.default},layout:"FactoryLayout",middleware:["laser","roleRedirect"],data:function(){return{searchable:"",changeDate:"",isModal:!1,isOpenDetails:!1,selectedOrder:{},selectedOption:null,additionalOption:null,selectedOrderId:null,dxfUrl:"",details:{name:"",quantity:0,description:"",files:[]},status:[{id:1,name:"Հաստատել",value:"confirmation"},{id:2,name:"Մերժել",value:"canceling"},{id:3,name:"Կատարման ժամկետի փոխարինում",value:"changeDate"},{id:4,name:"Ավարտել",value:"finishing"}],additionalOptions:[{id:1,name:"Ոչ հստակ պատվեր",value:"unclear"},{id:2,name:"Սխալ տվյալներ",value:"error"},{id:2,name:"Նյութորի առկայության բացակայում",value:"error"}]}},computed:v(v({},Object(o.c)("factory",["getOrderByFactories"])),{},{searchFilter:function(){var e=this.searchable.trim().toLowerCase();return""===e?this.getOrderByFactories.orders:this.getOrderByFactories.orders.filter((function(t){var r=t.order_number&&"string"==typeof t.order_number.number?t.order_number.number.toLowerCase():"",n=t.name&&t.name.length>0&&"string"==typeof t.name?t.name.toLowerCase():"",l=t.description&&t.description.length>0&&"string"==typeof t.description?t.description.toLowerCase():"",o=t.prefix_code&&"string"==typeof t.prefix_code.code?t.prefix_code.code.toLowerCase():"";return r.includes(e)||l.includes(e)||n.includes(e)||o.includes(e)}))},finishDate:function(){var e=new Date;return this.$formatDate(e)}}),mounted:function(){this.fetchOrdersByFactory(3)},methods:v(v({},Object(o.b)("factory",["fetchOrdersByFactory","doneFinishedOrder","downloadUploadedFile"])),{},{viewFile:function(e){this.dxfUrl=this.$getFileUrl(e)},downloadFile:function(e,t){this.downloadUploadedFile(e,t)},loadFile:function(e){var t=this;if(e instanceof Blob){var r=new FileReader;r.onload=function(e){var r=new Blob([e.target.result],{type:"application/dxf"});t.dxfUrl=URL.createObjectURL(r)},r.readAsArrayBuffer(e)}},updateOrder:function(e){this.isModal=!0,this.selectedOrder=v({},e),this.selectedOrder.factory_order=e.factory_order?v(v({},e.factory_order),{},{cancel_date:e.factory_order.cancel_date||null,canceling:e.factory_order.canceling||"",finish_date:e.factory_order.finish_date||null}):{status:"",cancel_date:null,canceling:"",finish_date:null}},closeModal:function(){this.isModal=!1},doneOrder:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,l,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c={id:e.selectedOrder.id,factory_order:{status:(null===(r=e.selectedOption)||void 0===r?void 0:r.name)||null,canceling:(null===(n=e.additionalOption)||void 0===n?void 0:n.name)||null,cancel_date:e.changeDate||null,operator_finish_date:"finishing"===(null===(l=e.selectedOption)||void 0===l?void 0:l.value)?(new Date).toISOString().replace("T"," ").slice(0,19):null},factory_id:3},null===(o=e.selectedOption)||void 0===o||!o.name||"finished"===e.selectedOrder.status){t.next=16;break}return t.next=4,e.doneFinishedOrder(c);case 4:if(!t.sent){t.next=14;break}return e.$notify({text:"Order updated successfully.",duration:3e3,speed:1e3,position:"top",type:"success"}),e.selectedOption=null,e.additionalOption=null,e.changeDate=null,t.next=12,e.closeModal();case 12:return t.next=14,e.fetchOrdersByFactory(3);case 14:t.next=18;break;case 16:e.$notify({text:"Product status is already finished.",duration:3e3,speed:1e3,position:"top",type:"info"}),e.closeModal();case 18:case"end":return t.stop()}}),t)})))()},toggleDetails:function(e){this.isOpenDetails=!this.isOpenDetails,this.details=e}})},y=r(15),component=Object(y.a)(h,(function(){var e=this,t=e._self._c;return t("main",{staticClass:"min-h-screen relative"},[e.getOrderByFactories&&!e.isModal?[t("div",{staticClass:"relative overflow-x-auto shadow-md sm:rounded-lg pt-36"},[t("table",{staticClass:"w-full text-sm bg-amber-50 border-b-gray-500 text-left rtl:text-right text-gray-500 dark:text-gray-400"},[e._m(0),e._v(" "),e._l(e.searchFilter,(function(r,n){var l;return t("tbody",{key:n,staticClass:"bg-amber-50"},[t("tr",{staticClass:"border-b border-gray-200 dark:border-gray-700",class:null!=r&&null!==(l=r.factory_order)&&void 0!==l&&l.some((function(e){return"Ավարտել"===e.status}))?"bg-green-500 text-white":""},[r.id?t("th",{staticClass:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap bg-gray-50 dark:text-white dark:bg-gray-800 text-center",attrs:{scope:"row"}},[e._v("\n              "+e._s(r.id)+"\n            ")]):e._e(),e._v(" "),null!=r&&r.created_at?t("td",{staticClass:"px-6 py-4 text-center"},[e._v("\n              "+e._s(null==r?void 0:r.created_at)+"\n            ")]):e._e(),e._v(" "),r.user_id?t("td",{staticClass:"px-6 py-4 text-center"},[e._v("\n              "+e._s(r.user_id)+"\n            ")]):e._e(),e._v(" "),t("td",{staticClass:"px-6 py-4 text-center"},[e._v("\n              "+e._s(null!=r&&r.finish_date?e.$formatDate(r.finish_date):"null")+"\n            ")]),e._v(" "),r.description?t("td",{staticClass:"px-6 py-4 cursor-pointer text-center hover:text-indigo-100 hover:bg-[#2557D6]/90",on:{click:function(t){return e.toggleDetails(r)}}},[e._v("\n              Դիտել\n            ")]):e._e(),e._v(" "),r.factory_order?t("td",{staticClass:"flex items-center justify-center text-center"},e._l(r.factory_order,(function(r){return t("div",{key:r.id,staticClass:"px-6 py-4 text-center w-full",class:"Հաստատել"===r.status?"bg-green-300 text-white":"Մերժել"===r.status?"bg-red-500 text-white":"Կատարման ժամկետի փոխարինում"===r.status?"bg-orange-500 text-white":"Ավարտել"===r.status?"bg-green-500 text-white":"text-gray-500"},[3===r.factory_id||"3"===r.factory_id?t("div",{staticClass:"text-center"},[e._v("\n                  "+e._s(r.operator_finish_date?r.operator_finish_date:r.status)+"\n                ")]):e._e()])})),0):e._e(),e._v(" "),t("td",{staticClass:"px-12 text-indigo-500 border-indigo-500 hover:bg-indigo-500 hover:text-indigo-50 cursor-pointer",on:{click:function(t){return e.updateOrder(r)}}},[e._v("\n              Խմբագրել\n            ")])])])}))],2)])]:e._e(),e._v(" "),e.isModal?t("div",{staticClass:"overflow-y-auto overflow-x-hidden fixed top-40 right-0 left-0 z-50 flex justify-center items-center w-full md:inset-0 h-modal md:h-full"},[t("div",{staticClass:"p-4 w-full mx-auto max-w-2xl h-full md:h-auto"},[t("div",{staticClass:"relative p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5"},[t("div",{staticClass:"flex justify-between items-center pb-4 mb-4 rounded-t border-b sm:mb-5 dark:border-gray-600"},[t("h3",{staticClass:"text-lg font-semibold text-gray-900 dark:text-white"},[e._v("\n            Խմբագրել առաջադրանքը\n          ")]),e._v(" "),t("button",{staticClass:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",attrs:{type:"button"},on:{click:e.closeModal}},[t("svg",{staticClass:"w-5 h-5",attrs:{"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"}})]),e._v(" "),t("span",{staticClass:"sr-only"},[e._v("Close modal")])])]),e._v(" "),t("div",{staticClass:"grid mb-4 sm:grid-cols-2 w-full"},[t("div",[t("select-with-label",{attrs:{dates:e.status,label:"Գործողություն"},model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}}),e._v(" "),e.selectedOption&&"canceling"===e.selectedOption.value?t("div",{staticClass:"my-5"},[t("select-with-label",{attrs:{dates:e.additionalOptions,label:"Մերժման պատճառ"},model:{value:e.additionalOption,callback:function(t){e.additionalOption=t},expression:"additionalOption"}})],1):e._e(),e._v(" "),e.selectedOption&&"finishing"===e.selectedOption.value?t("div",{staticClass:"my-5"},[e._v("\n              "+e._s(e.finishDate)+"\n            ")]):e._e(),e._v(" "),e.selectedOption&&"changeDate"===e.selectedOption.value?t("div",{staticClass:"my-5"},[t("input-with-label-icon",{attrs:{type:"date",format:"dd-mm-yyyy"},model:{value:e.changeDate,callback:function(t){e.changeDate=t},expression:"changeDate"}})],1):e._e()],1)]),e._v(" "),t("button",{staticClass:"text-white inline-flex items-center bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",on:{click:function(t){return e.doneOrder(e.selectedOrder.id)}}},[t("svg",{staticClass:"mr-1 -ml-1 w-6 h-6",attrs:{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"}})]),e._v("\n          Հաստատել\n        ")])])])]):e._e(),e._v(" "),e.isOpenDetails?[t("div",{staticClass:"absolute top-0 min-h-screen w-full flex items-center justify-center bg-gray-100 rounded p-4 text-gray-700"},[t("button",{staticClass:"fixed top-10 right-20",on:{click:function(t){e.isOpenDetails=!1}}},[t("svg",{staticClass:"w-6 h-6 text-gray-800",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"red",viewBox:"0 0 24 24"}},[t("path",{attrs:{stroke:"red","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18 17.94 6M18 18 6.06 6"}})])]),e._v(" "),t("div",{staticClass:"grid md:grid-cols-2 grid-cols-1 gap-2 bg-white p-6 rounded-lg shadow-md lg:w-3/4 w-full"},[t("div",{staticClass:"flex flex-col items-start justify-start mt-10"},[t("h3",{staticClass:"text-lg font-bold mb-4"},[e._v("Առաջադրանքի մանրամասներ")]),e._v(" "),t("ul",{staticClass:"text-base font-medium leading-7"},[t("li",[e._v("Անուն: "+e._s(e.details.name))]),e._v(" "),t("li",[e._v("Քանակ: "+e._s(e.details.quantity))]),e._v(" "),t("li",[e._v("Նկարագրություն: "+e._s(e.details.description))])]),e._v(" "),e.details.factory_orders&&e.details.factory_orders.length>0?t("div",[t("h4",{staticClass:"text-lg font-bold mt-4"},[e._v("Ֆայլեր")]),e._v(" "),t("ul",e._l(e.details.factory_orders,(function(r){return t("li",{key:r.id},[r.files&&r.files.length>0?t("div",e._l(r.files,(function(r){return t("div",{key:r.id},[t("div",{staticClass:"flex items-center gap-2"},[t("button",{staticClass:"text-blue-500 hover:text-blue-700",on:{click:function(t){return e.viewFile(r.path)}}},[e._v("\n                        Դիտել\n                      ")]),e._v(" "),t("button",{staticClass:"text-green-500 hover:text-green-700",on:{click:function(t){return e.downloadFile(r.path,r.original_name)}}},[e._v("\n                        Ներբեռնել\n                      ")])])])})),0):e._e()])})),0)]):e._e()]),e._v(" "),t("div",{staticClass:"show_file_section"},[e.dxfUrl?t("DxfViewer",{key:e.dxfUrl,attrs:{"dxf-url":e.dxfUrl}}):e._e()],1)])])]:e._e(),e._v(" "),t("notifications")],2)}),[function(){var e=this,t=e._self._c;return t("thead",{staticClass:"text-xs text-gray-700 bg-gray-300 uppercase dark:text-gray-400"},[t("tr",{staticClass:"border-b-neutral-700"},[t("th",{staticClass:"px-3 py-3 text-center",attrs:{scope:"col"}},[e._v("Հ/Հ")]),e._v(" "),t("th",{staticClass:"px-3 py-3 text-center",attrs:{scope:"col"}},[e._v("\n              Ստեղծման ամսաթիվ\n            ")]),e._v(" "),t("th",{staticClass:"px-3 py-3 text-center",attrs:{scope:"col"}},[e._v("Ում կողմից")]),e._v(" "),t("th",{staticClass:"px-3 py-3 text-center",attrs:{scope:"col"}},[e._v("\n              Ավարտի անհրաժեշտ ժամկետ\n            ")]),e._v(" "),t("th",{staticClass:"px-3 py-3 text-center",attrs:{scope:"col"}},[e._v("Նկարագրություն")]),e._v(" "),t("th",{staticClass:"px-3 py-3 text-center",attrs:{scope:"col"}},[e._v("Կարգավիճակ")]),e._v(" "),t("th",{staticClass:"px-3 py-3 text-center",attrs:{scope:"col"}})])])}],!1,null,"d94f758e",null);t.default=component.exports}}]);