(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{574:function(e,t,r){"use strict";var o=r(4),n=r(405).trim;o({target:"String",proto:!0,forced:r(575)("trim")},{trim:function(){return n(this)}})},575:function(e,t,r){"use strict";var o=r(112).PROPER,n=r(6),m=r(406);e.exports=function(e){return n(function(){return!!m[e]()||"​᠎"!=="​᠎"[e]()||o&&m[e].name!==e})}},693:function(e,t,r){var content=r(741);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(57).default)("57925eb9",content,!0,{sourceMap:!1})},740:function(e,t,r){"use strict";r(693)},741:function(e,t,r){var o=r(56)(function(i){return i[1]});o.push([e.i,".fade-enter-active[data-v-f1073d5e],.fade-leave-active[data-v-f1073d5e]{transition:all .2s ease}.fade-enter[data-v-f1073d5e],.fade-leave-to[data-v-f1073d5e]{opacity:0;transform:translateY(-6px)}button[data-v-f1073d5e]:disabled{cursor:not-allowed;opacity:.6}",""]),o.locals={},e.exports=o},785:function(e,t,r){"use strict";r.r(t);r(574),r(24),r(39),r(40);var o=r(1),n=r(15),m=(r(9),r(23),r(79),r(38),r(27),r(8),r(52),r(428),r(30),r(96));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d={name:"EngineerProjects",layout:"engineer",middleware:["role-guard"],meta:{role:"engineer"},data:function(){return{pmpGroup:"",pmpGroupName:"",pmpRemoteNumber:"",pmpRemoteNumberName:"",isDD:{groupCode:!1,groupName:!1,remoteCode:!1,remoteName:!1},pmpId:null,remoteNumberId:null,pmpRemoteNumbers:[]}},computed:c(c({},Object(m.c)("pmp",["getPmpes"])),{},{filteredGroupsByGroup:function(){var e,q=(this.pmpGroup||"").toLowerCase(),t=(null===(e=this.getPmpes)||void 0===e?void 0:e.pmp)||[];return q?t.filter(function(p){return String(p.group||"").toLowerCase().includes(q)||String(p.group_name||"").toLowerCase().includes(q)}):t},filteredGroupsByName:function(){var e,q=(this.pmpGroupName||"").toLowerCase(),t=(null===(e=this.getPmpes)||void 0===e?void 0:e.pmp)||[];return q?t.filter(function(p){return String(p.group_name||"").toLowerCase().includes(q)||String(p.group||"").toLowerCase().includes(q)}):t},existingGroup:function(){var e,t=(null===(e=this.getPmpes)||void 0===e?void 0:e.pmp)||[],code=this.pmpGroup?this.pmpGroup.padStart(3,"0"):null,r=this.pmpGroupName||null;return t.find(function(p){return code&&String(p.group)===code||r&&String(p.group_name)===r})||null},isExistingGroup:function(){return!!this.existingGroup},filteredRemotesByNumber:function(){var q=(this.pmpRemoteNumber||"").toLowerCase(),e=this.pmpRemoteNumbers||[];return q?e.filter(function(e){return String(e.remote_number||"").toLowerCase().includes(q)||String(e.remote_number_name||"").toLowerCase().includes(q)}):e},filteredRemotesByName:function(){var q=(this.pmpRemoteNumberName||"").toLowerCase(),e=this.pmpRemoteNumbers||[];return q?e.filter(function(e){return String(e.remote_number_name||"").toLowerCase().includes(q)||String(e.remote_number||"").toLowerCase().includes(q)}):e},showCreateGroup:function(){return!!this.pmpGroup&&!!this.pmpGroupName&&!this.isExistingGroup},showCreateRemote:function(){var e=this;if(!this.isExistingGroup)return!1;if(!this.pmpRemoteNumber||!this.pmpRemoteNumberName)return!1;var t=this.pmpRemoteNumber.padStart(2,"0");return!(this.pmpRemoteNumbers||[]).some(function(r){return String(r.remote_number)===String(t)||String(r.remote_number_name)===String(e.pmpRemoteNumberName)})},showView:function(){return this.isExistingGroup&&!!this.remoteNumberId}}),watch:{pmpGroup:function(){this.onGroupFieldsChanged()},pmpGroupName:function(){this.onGroupFieldsChanged()},pmpRemoteNumber:function(){this.linkRemoteByInputs()},pmpRemoteNumberName:function(){this.linkRemoteByInputs()}},created:function(){this.fetchPmps()},methods:c(c({},Object(m.b)("pmp",["fetchPmps","createPmp","rememberNumberPmp"])),{},{toggleDropdown:function(e){var t=this;Object.keys(this.isDD).forEach(function(r){return t.isDD[r]=r===e&&!t.isDD[r]})},openDropdown:function(e){var t=this;Object.keys(this.isDD).forEach(function(r){return t.isDD[r]=r===e})},onGroupCodeInput:function(){this.isDD.groupCode=!0},onGroupNameInput:function(){this.isDD.groupName=!0},onRemoteCodeInput:function(){this.isExistingGroup&&(this.isDD.remoteCode=!0)},onRemoteNameInput:function(){this.isExistingGroup&&(this.isDD.remoteName=!0)},applyGroup:function(p){this.pmpGroup=p.group,this.pmpGroupName=p.group_name,this.isDD.groupCode=!1,this.isDD.groupName=!1,this.onGroupFieldsChanged()},applyRemote:function(e){this.pmpRemoteNumber=e.remote_number,this.pmpRemoteNumberName=e.remote_number_name,this.remoteNumberId=e.id,this.isDD.remoteCode=!1,this.isDD.remoteName=!1},onGroupFieldsChanged:function(){var g=this.existingGroup;g?(this.pmpId=g.id,this.pmpRemoteNumbers=Array.isArray(g.remote_number)?g.remote_number:[],this.linkRemoteByInputs()):(this.pmpId=null,this.pmpRemoteNumbers=[],this.pmpRemoteNumber="",this.pmpRemoteNumberName="",this.remoteNumberId=null)},linkRemoteByInputs:function(){if(this.isExistingGroup){var e=this.pmpRemoteNumbers||[],t=this.pmpRemoteNumber?this.pmpRemoteNumber.padStart(2,"0"):null,r=this.pmpRemoteNumberName||null,o=e.find(function(e){return t&&String(e.remote_number)===String(t)||r&&String(e.remote_number_name)===String(r)});o?this.applyRemote(o):this.remoteNumberId=null}else this.remoteNumberId=null},addPmpGroup:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark(function t(){var r,o,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.pmpGroup&&e.pmpGroupName){t.next=1;break}return e.$notify({type:"error",text:"Լրացրեք Խումբի երկու դաշտերն էլ"}),t.abrupt("return");case 1:if(!(e.pmpRemoteNumber&&!e.pmpRemoteNumberName||!e.pmpRemoteNumber&&e.pmpRemoteNumberName)){t.next=2;break}return e.$notify({type:"error",text:"Ենթախմբի համարն ու նկարագրությունը լրացրեք միասին կամ թողեք դատարկ"}),t.abrupt("return");case 2:return r={group:e.pmpGroup.padStart(3,"0"),group_name:e.pmpGroupName,admin_confirmation:!0,remote_number:e.pmpRemoteNumber?e.pmpRemoteNumber.padStart(2,"0"):null,remote_number_name:e.pmpRemoteNumberName||null},t.prev=3,t.next=4,e.createPmp(r);case 4:return e.$notify({type:"success",text:"Խումբը ստեղծվեց"}),e.resetAll(),t.next=5,e.fetchPmps();case 5:t.next=7;break;case 6:t.prev=6,n=t.catch(3),e.$notify({type:"error",text:(null==n||null===(o=n.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||"Սխալ խումբ ստեղծելիս"});case 7:case"end":return t.stop()}},t,null,[[3,6]])}))()},addPmpGroupRemoteNumber:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark(function t(){var r,o,n,m,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isExistingGroup){t.next=1;break}return e.$notify({type:"error",text:"Սկզբում ընտրեք խումբ"}),t.abrupt("return");case 1:if(e.pmpRemoteNumber&&e.pmpRemoteNumberName){t.next=2;break}return e.$notify({type:"error",text:"Լրացրեք Ենթախմբի երկու դաշտերն էլ"}),t.abrupt("return");case 2:if(r=e.pmpRemoteNumber.padStart(2,"0"),!(e.pmpRemoteNumbers||[]).some(function(t){return String(t.remote_number)===String(r)||String(t.remote_number_name)===String(e.pmpRemoteNumberName)})){t.next=3;break}return e.$notify({type:"error",text:"Այդ համարը կամ անվանումն արդեն կա այս խմբում"}),t.abrupt("return");case 3:return t.prev=3,t.next=4,e.rememberNumberPmp({id:e.existingGroup.id,group:e.pmpGroup.padStart(3,"0"),group_name:e.pmpGroupName,remote_number:r,remote_number_name:e.pmpRemoteNumberName});case 4:return o=t.sent,e.$notify({type:"success",text:"Ենթախումբը ստեղծվեց"}),t.next=5,e.fetchPmps();case 5:(n=(null==o?void 0:o.remote_number_id)||e.findRemoteId(r,e.pmpRemoteNumberName))&&e.$router.push({path:"/engineer/files/view",query:{id:n}}),e.resetAll(),t.next=7;break;case 6:t.prev=6,l=t.catch(3),e.$notify({type:"error",text:(null==l||null===(m=l.response)||void 0===m||null===(m=m.data)||void 0===m?void 0:m.message)||"Սխալ ենթախումբ ստեղծելիս"});case 7:case"end":return t.stop()}},t,null,[[3,6]])}))()},viewFiles:function(){this.remoteNumberId?this.$router.push({path:"/engineer/files/view",query:{id:this.remoteNumberId}}):this.$notify({type:"error",text:"Ընտրեք ենթախումբ"})},findRemoteId:function(e,t){var r,o,n=this,g=null===(r=this.getPmpes)||void 0===r||null===(r=r.pmp)||void 0===r?void 0:r.find(function(p){var e;return p.id===(null===(e=n.existingGroup)||void 0===e?void 0:e.id)}),m=null==g||null===(o=g.remote_number)||void 0===o?void 0:o.find(function(r){return String(r.remote_number)===String(e)&&String(r.remote_number_name)===String(t)});return(null==m?void 0:m.id)||null},resetAll:function(){var e=this;this.pmpGroup="",this.pmpGroupName="",this.pmpRemoteNumber="",this.pmpRemoteNumberName="",this.pmpId=null,this.remoteNumberId=null,this.pmpRemoteNumbers=[],Object.keys(this.isDD).forEach(function(t){return e.isDD[t]=!1})}})},f=(r(740),r(32)),component=Object(f.a)(d,function(){var e=this,t=e._self._c;return t("main",{staticClass:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-6"},[t("div",{staticClass:"max-w-7xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden"},[e._m(0),e._v(" "),t("div",{staticClass:"p-6 md:p-8 h-screen"},[t("div",{staticClass:"grid grid-cols-1 lg:grid-cols-3 gap-8"},[t("div",{staticClass:"space-y-6"},[t("h2",{staticClass:"text-2xl font-bold text-indigo-700"},[e._v("Խումբ")]),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"block text-sm font-semibold text-gray-700 mb-1"},[e._v("Ծածկագիր")]),e._v(" "),t("div",{staticClass:"relative"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.pmpGroup,expression:"pmpGroup",modifiers:{trim:!0}}],staticClass:"w-full pl-4 pr-10 py-3 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-indigo-500 focus:border-indigo-500 font-mono",attrs:{type:"text",maxlength:"3",placeholder:"000",autocomplete:"off"},domProps:{value:e.pmpGroup},on:{focus:function(t){return e.openDropdown("groupCode")},input:[function(t){t.target.composing||(e.pmpGroup=t.target.value.trim())},e.onGroupCodeInput],blur:function(t){return e.$forceUpdate()}}}),e._v(" "),t("button",{staticClass:"absolute inset-y-0 right-0 pr-3 text-gray-500",on:{click:function(t){return e.toggleDropdown("groupCode")}}},[t("svg",{staticClass:"w-5 h-5",attrs:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.isDD.groupCode&&e.filteredGroupsByGroup.length?t("div",{staticClass:"absolute z-30 mt-2 w-full bg-white rounded-xl shadow-2xl border max-h-64 overflow-y-auto z-10"},[t("ul",{staticClass:"py-2"},e._l(e.filteredGroupsByGroup,function(p){return t("li",{key:p.id,staticClass:"px-4 py-3 hover:bg-indigo-50 cursor-pointer flex justify-between",on:{click:function(t){return e.applyGroup(p)}}},[t("span",{staticClass:"font-mono font-bold text-indigo-700"},[e._v(e._s(p.group))]),e._v(" "),t("span",{staticClass:"text-sm text-gray-600 truncate ml-2"},[e._v(e._s(p.group_name))])])}),0)]):e._e()])],1),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"block text-sm font-semibold text-gray-700 mb-1"},[e._v("Անվանում")]),e._v(" "),t("div",{staticClass:"relative"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.pmpGroupName,expression:"pmpGroupName",modifiers:{trim:!0}}],staticClass:"w-full pl-4 pr-10 py-3 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-indigo-500 focus:border-indigo-500",attrs:{type:"text",placeholder:"Մուտքագրեք անվանում",autocomplete:"off"},domProps:{value:e.pmpGroupName},on:{focus:function(t){return e.openDropdown("groupName")},input:[function(t){t.target.composing||(e.pmpGroupName=t.target.value.trim())},e.onGroupNameInput],blur:function(t){return e.$forceUpdate()}}}),e._v(" "),t("button",{staticClass:"absolute inset-y-0 right-0 pr-3 text-gray-500",on:{click:function(t){return e.toggleDropdown("groupName")}}},[t("svg",{staticClass:"w-5 h-5",attrs:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.isDD.groupName&&e.filteredGroupsByName.length?t("div",{staticClass:"absolute z-30 mt-2 w-full bg-white rounded-xl shadow-2xl border max-h-64 overflow-y-auto"},[t("ul",{staticClass:"py-2"},e._l(e.filteredGroupsByName,function(p){return t("li",{key:p.id,staticClass:"px-4 py-3 hover:bg-indigo-50 cursor-pointer",on:{click:function(t){return e.applyGroup(p)}}},[e._v("\n                    "+e._s(p.group_name)+"\n                    "),t("span",{staticClass:"text-gray-400"},[e._v("· "+e._s(p.group))])])}),0)]):e._e()])],1)]),e._v(" "),t("div",{staticClass:"space-y-6",class:{"opacity-50 pointer-events-none":!e.isExistingGroup}},[t("h2",{staticClass:"text-2xl font-bold text-purple-700"},[e._v("Ենթախումբ")]),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"block text-sm font-semibold text-gray-700 mb-1"},[e._v("Համար")]),e._v(" "),t("div",{staticClass:"relative"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.pmpRemoteNumber,expression:"pmpRemoteNumber",modifiers:{trim:!0}}],staticClass:"w-full pl-4 pr-10 py-3 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-purple-500 focus:border-purple-500 font-mono",attrs:{type:"text",maxlength:"2",disabled:!e.isExistingGroup,placeholder:"00",autocomplete:"off"},domProps:{value:e.pmpRemoteNumber},on:{focus:function(t){return e.openDropdown("remoteCode")},input:[function(t){t.target.composing||(e.pmpRemoteNumber=t.target.value.trim())},e.onRemoteCodeInput],blur:function(t){return e.$forceUpdate()}}}),e._v(" "),t("button",{staticClass:"absolute inset-y-0 right-0 pr-3 text-gray-500",attrs:{disabled:!e.isExistingGroup},on:{click:function(t){return e.toggleDropdown("remoteCode")}}},[t("svg",{staticClass:"w-5 h-5",attrs:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.isDD.remoteCode&&e.filteredRemotesByNumber.length?t("div",{staticClass:"absolute z-30 mt-2 w-full bg-white rounded-xl shadow-2xl border max-h-64 overflow-y-auto"},[t("ul",{staticClass:"py-2"},e._l(e.filteredRemotesByNumber,function(r){return t("li",{key:r.id,staticClass:"px-4 py-3 hover:bg-purple-50 cursor-pointer flex justify-between",on:{click:function(t){return e.applyRemote(r)}}},[t("span",{staticClass:"font-mono font-bold text-purple-700"},[e._v(e._s(r.remote_number))]),e._v(" "),t("span",{staticClass:"text-sm text-gray-600 truncate ml-2"},[e._v(e._s(r.remote_number_name))])])}),0)]):e._e()])],1),e._v(" "),t("div",{staticClass:"relative"},[t("label",{staticClass:"block text-sm font-semibold text-gray-700 mb-1"},[e._v("Նկարագրություն")]),e._v(" "),t("div",{staticClass:"relative"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.pmpRemoteNumberName,expression:"pmpRemoteNumberName",modifiers:{trim:!0}}],staticClass:"w-full pl-4 pr-10 py-3 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-purple-500 focus:border-purple-500",attrs:{type:"text",disabled:!e.isExistingGroup,placeholder:"Մուտքագրեք նկարագրություն",autocomplete:"off"},domProps:{value:e.pmpRemoteNumberName},on:{focus:function(t){return e.openDropdown("remoteName")},input:[function(t){t.target.composing||(e.pmpRemoteNumberName=t.target.value.trim())},e.onRemoteNameInput],blur:function(t){return e.$forceUpdate()}}}),e._v(" "),t("button",{staticClass:"absolute inset-y-0 right-0 pr-3 text-gray-500",attrs:{disabled:!e.isExistingGroup},on:{click:function(t){return e.toggleDropdown("remoteName")}}},[t("svg",{staticClass:"w-5 h-5",attrs:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.isDD.remoteName&&e.filteredRemotesByName.length?t("div",{staticClass:"absolute z-30 mt-2 w-full bg-white rounded-xl shadow-2xl border max-h-64 overflow-y-auto"},[t("ul",{staticClass:"py-2"},e._l(e.filteredRemotesByName,function(r){return t("li",{key:r.id,staticClass:"px-4 py-3 hover:bg-purple-50 cursor-pointer",on:{click:function(t){return e.applyRemote(r)}}},[e._v("\n                    "+e._s(r.remote_number_name)+"\n                    "),t("span",{staticClass:"text-gray-400"},[e._v("· "+e._s(r.remote_number))])])}),0)]):e._e()])],1)]),e._v(" "),t("div",{staticClass:"flex flex-col justify-end space-y-4"},[e.showCreateGroup&&e.$can("pmp.create")?t("button",{staticClass:"w-full px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold rounded-xl shadow-lg",on:{click:e.addPmpGroup}},[e._v("\n            Ստեղծել խումբ\n          ")]):e._e(),e._v(" "),e.showCreateRemote&&e.$can("pmp.create")?t("button",{staticClass:"w-full px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg",on:{click:e.addPmpGroupRemoteNumber}},[e._v("\n            Ստեղծել ենթախումբ\n          ")]):e._e(),e._v(" "),e.showView&&e.$can("pmp.view")?t("button",{staticClass:"w-full px-6 py-4 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-bold rounded-xl shadow-lg",on:{click:e.viewFiles}},[e._v("\n            Դիտել ֆայլերը\n          ")]):e._e()])])])]),e._v(" "),t("notifications")],1)},[function(){var e=this._self._c;return e("div",{staticClass:"p-6 md:p-8 border-b border-gray-200 bg-gradient-to-r from-gray-800 to-gray-600 text-white"},[e("h1",{staticClass:"text-3xl md:text-4xl font-bold"},[this._v("Նախագծեր")])])}],!1,null,"f1073d5e",null);t.default=component.exports}}]);