(window.webpackJsonp=window.webpackJsonp||[]).push([[83,44,45,46],{641:function(t,e,r){var content=r(673);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("6e6a94d0",content,!0,{sourceMap:!1})},672:function(t,e,r){"use strict";r(641)},673:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".fade-enter-active,.fade-leave-active{transition:opacity .15s}.fade-enter,.fade-leave-to{opacity:0}",""]),n.locals={},t.exports=n},683:function(t,e,r){"use strict";r.r(e);r(17),r(18),r(78);var n={props:{categories:{type:Array,default:function(){return[]}},selectedCategory:{type:Object,default:null},search:{type:String,default:""}},data:function(){return{open:!1}},methods:{pick:function(t){this.$emit("pick-category",t),this.open=!1}}},o=r(32),component=Object(o.a)(n,function(){var t,e=this,r=e._self._c;return r("div",{staticClass:"flex items-center justify-between flex-wrap gap-3"},[e.categories&&e.categories.length?r("div",{staticClass:"relative"},[r("button",{staticClass:"inline-flex items-center text-gray-700 bg-white border border-gray-300 rounded-lg text-sm px-3 py-1.5 dark:bg-gray-800 dark:text-gray-200",on:{click:function(t){e.open=!e.open}}},[e._v("\n      "+e._s((null===(t=e.selectedCategory)||void 0===t?void 0:t.name)||"Բոլորը")+"\n      "),r("svg",{staticClass:"w-3 h-3 ml-2",attrs:{viewBox:"0 0 10 6"}},[r("path",{attrs:{stroke:"currentColor","stroke-width":"2",d:"m1 1 4 4 4-4"}})])]),e._v(" "),e.open?r("div",{staticClass:"absolute z-10 mt-2 bg-white dark:bg-gray-700 rounded-lg shadow w-56 max-h-72 overflow-y-auto"},[r("div",{staticClass:"p-2 text-xs font-semibold text-gray-500 dark:text-gray-300"},[e._v("\n        Կատեգորիաներ\n      ")]),e._v(" "),r("ul",{staticClass:"py-1 text-sm"},[r("li",{staticClass:"px-3 py-1 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",on:{click:function(t){return e.pick(null)}}},[e._v("\n          Բոլորը\n        ")]),e._v(" "),e._l(e.categories,function(t){return r("li",{key:t.id,staticClass:"px-3 py-1 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",on:{click:function(r){return e.pick(t)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])})],2)]):e._e()]):e._e(),e._v(" "),r("div",{staticClass:"flex-1 min-w-[260px]"},[r("input",{staticClass:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800 dark:text-gray-100",attrs:{placeholder:"Որոնել նկարագրությամբ/չափերով…"},domProps:{value:e.search},on:{input:function(t){return e.$emit("update:search",t.target.value)}}})]),e._v(" "),r("div",[r("button",{staticClass:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",on:{click:function(t){return e.$emit("create")}}},[e._v("\n      Նոր նյութ\n    ")])])])},[],!1,null,null,null);e.default=component.exports},684:function(t,e,r){"use strict";r.r(e);r(24),r(43);var n={props:{items:{type:Array,default:function(){return[]}}}},o=r(32),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"overflow-x-auto"},[e("table",{staticClass:"min-w-full text-sm text-left text-gray-700 dark:text-gray-300"},[t._m(0),t._v(" "),e("tbody",[t._l(t.items,function(r){var n,o,l,c;return e("tr",{key:r.id,staticClass:"bg-white dark:bg-gray-800 border-b"},[e("td",{staticClass:"px-6 py-3"},[t._v(t._s(r.description||"—"))]),t._v(" "),e("td",{staticClass:"px-6 py-3"},[t._v(t._s(null!==(n=r.width)&&void 0!==n?n:"—"))]),t._v(" "),e("td",{staticClass:"px-6 py-3"},[t._v(t._s(null!==(o=r.length)&&void 0!==o?o:"—"))]),t._v(" "),e("td",{staticClass:"px-6 py-3"},[t._v(t._s(null!==(l=r.height)&&void 0!==l?l:"—"))]),t._v(" "),e("td",{staticClass:"px-6 py-3"},[t._v(t._s(null!==(c=r.thickness)&&void 0!==c?c:"—"))]),t._v(" "),e("td",{staticClass:"px-6 py-3 text-right space-x-2"},[e("button",{staticClass:"px-3 py-1 rounded bg-amber-500 text-white",on:{click:function(e){return t.$emit("edit",r)}}},[t._v("\n            Փոփոխել\n          ")]),t._v(" "),e("button",{staticClass:"px-3 py-1 rounded bg-red-600 text-white",on:{click:function(e){return t.$emit("remove",r)}}},[t._v("\n            Ջնջել\n          ")])])])}),t._v(" "),t.items&&t.items.length?t._e():e("tr",[e("td",{staticClass:"px-6 py-6 text-center text-gray-400",attrs:{colspan:"6"}},[t._v("\n          Տվյալներ չկան\n        ")])])],2)])])},[function(){var t=this,e=t._self._c;return e("thead",{staticClass:"text-xs uppercase bg-gray-50 dark:bg-gray-700"},[e("tr",[e("th",{staticClass:"px-6 py-3"},[t._v("Նկարագրություն")]),t._v(" "),e("th",{staticClass:"px-6 py-3"},[t._v("Լայն")]),t._v(" "),e("th",{staticClass:"px-6 py-3"},[t._v("Երկար")]),t._v(" "),e("th",{staticClass:"px-6 py-3"},[t._v("Բարձր")]),t._v(" "),e("th",{staticClass:"px-6 py-3"},[t._v("Հաստ")]),t._v(" "),e("th",{staticClass:"px-6 py-3 text-right"},[t._v("Գործողություններ")])])])}],!1,null,null,null);e.default=component.exports},719:function(t,e,r){"use strict";r.r(e);r(24),r(43),r(23),r(49),r(17),r(8);var n=r(15);r(39),r(40),r(27),r(30);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){Object(n.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var c={props:{visible:{type:Boolean,default:!1},item:{type:Object,default:null},categories:{type:Array,default:function(){return[]}},submitting:{type:Boolean,default:!1}},data:function(){return{form:this.makeForm(this.item)}},computed:{isEdit:function(){return!(!this.item||!this.item.id)}},watch:{item:{deep:!0,immediate:!0,handler:function(t){this.form=this.makeForm(t)}},visible:function(t){t&&this.item&&(this.form=this.makeForm(this.item))}},methods:{makeForm:function(t){var e,r,n,o,l;return{description:(null==t?void 0:t.description)||"",width:null!==(e=null==t?void 0:t.width)&&void 0!==e?e:null,length:null!==(r=null==t?void 0:t.length)&&void 0!==r?r:null,height:null!==(n=null==t?void 0:t.height)&&void 0!==n?n:null,thickness:null!==(o=null==t?void 0:t.thickness)&&void 0!==o?o:null,material_category_id:null!==(l=null==t?void 0:t.material_category_id)&&void 0!==l?l:null,image:null}},onFile:function(t){var e;this.form.image=(null===(e=t.target.files)||void 0===e?void 0:e[0])||null},submit:function(){var t;this.$emit("submit",{isEdit:this.isEdit,id:null===(t=this.item)||void 0===t?void 0:t.id,data:l({},this.form)})}}},d=(r(672),r(32)),component=Object(d.a)(c,function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[t.visible?e("div",{staticClass:"fixed inset-0 z-50 flex items-center justify-center"},[e("div",{staticClass:"absolute inset-0 bg-black/40",on:{click:function(e){return t.$emit("close")}}}),t._v(" "),e("div",{staticClass:"relative bg-white dark:bg-gray-900 rounded-xl p-6 w-[95%] max-w-2xl shadow-xl"},[e("div",{staticClass:"flex items-center justify-between mb-4"},[e("h3",{staticClass:"text-lg font-semibold"},[t._v("\n          "+t._s(t.isEdit?"Փոփոխել նյութը":"Նոր նյութ")+"\n        ")]),t._v(" "),e("button",{staticClass:"text-gray-500",on:{click:function(e){return t.$emit("close")}}},[t._v("✕")])]),t._v(" "),e("form",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-4",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"md:col-span-2"},[e("label",{staticClass:"block text-sm mb-1"},[t._v("Նկարագրություն")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800",domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Լայնություն")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.width,expression:"form.width",modifiers:{number:!0}}],staticClass:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800",attrs:{type:"number",step:"0.01"},domProps:{value:t.form.width},on:{input:function(e){e.target.composing||t.$set(t.form,"width",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Երկարություն")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.length,expression:"form.length",modifiers:{number:!0}}],staticClass:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800",attrs:{type:"number",step:"0.01"},domProps:{value:t.form.length},on:{input:function(e){e.target.composing||t.$set(t.form,"length",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Բարձրություն")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.height,expression:"form.height",modifiers:{number:!0}}],staticClass:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800",attrs:{type:"number",step:"0.01"},domProps:{value:t.form.height},on:{input:function(e){e.target.composing||t.$set(t.form,"height",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Հաստություն")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.thickness,expression:"form.thickness",modifiers:{number:!0}}],staticClass:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800",attrs:{type:"number",step:"0.01"},domProps:{value:t.form.thickness},on:{input:function(e){e.target.composing||t.$set(t.form,"thickness",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",{staticClass:"md:col-span-2"},[e("label",{staticClass:"block text-sm mb-1"},[t._v("Կատեգորիա")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.material_category_id,expression:"form.material_category_id"}],staticClass:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800",attrs:{required:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"material_category_id",e.target.multiple?r:r[0])}}},[e("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("Ընտրել…")]),t._v(" "),t._l(t.categories,function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v("\n              "+t._s(r.name)+"\n            ")])})],2)]),t._v(" "),e("div",{staticClass:"md:col-span-2"},[e("label",{staticClass:"block text-sm mb-1"},[t._v("Նկար (ըստ ցանկության)")]),t._v(" "),e("input",{staticClass:"w-full border rounded-lg px-3 py-2 dark:bg-gray-800",attrs:{type:"file",accept:"image/*"},on:{change:t.onFile}})]),t._v(" "),e("div",{staticClass:"md:col-span-2 flex justify-end gap-3 mt-2"},[e("button",{staticClass:"px-5 py-2 rounded bg-gray-200 dark:bg-gray-700",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v("\n            Փակել\n          ")]),t._v(" "),e("button",{staticClass:"px-5 py-2 rounded bg-blue-600 text-white",attrs:{type:"submit",disabled:t.submitting}},[t._v("\n            "+t._s(t.submitting?"Պահվում է…":t.isEdit?"Պահպանել":"Ստեղծել")+"\n          ")])])])])]):t._e()])},[],!1,null,null,null);e.default=component.exports},789:function(t,e,r){"use strict";r.r(e);r(24),r(43),r(18),r(78),r(23),r(39),r(40),r(27);var n=r(11),o=r(1),l=r(15),c=(r(116),r(8),r(30),r(9),r(96)),d=r(683),m=r(684),v=r(719);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach(function(e){Object(l.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var y={components:{MaterialsToolbar:d.default,MaterialsTable:m.default,MaterialFormModal:v.default},layout:"manager",middleware:["role-guard"],meta:{role:"manager"},data:function(){return{search:"",selectedCategory:null,isFormOpen:!1,editingItem:null,submitting:!1,pendingDelete:null}},computed:h(h(h({},Object(c.c)("materials",["getMaterials","getPagination","isLoading"])),Object(c.c)("categories",["allCategories"])),{},{materials:function(){return this.getMaterials},pagination:function(){return this.getPagination},loading:function(){return this.isLoading}}),watch:{search:function(){this.load(1)}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.fetchCategories();case 1:t.load();case 2:case"end":return e.stop()}},e)}))()},methods:h(h(h({},Object(c.b)("materials",["fetchMaterials","deleteMaterial"])),Object(c.b)("categories",["fetchCategories"])),{},{load:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark(function r(){var n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.length>0&&void 0!==t[0]?t[0]:1,r.next=1,e.fetchMaterials({page:o,perPage:e.pagination.per_page||10,search:e.search,categoryId:(null===(n=e.selectedCategory)||void 0===n?void 0:n.id)||null});case 1:case"end":return r.stop()}},r)}))()},goPage:function(p){p<1||p>this.pagination.last_page||this.load(p)},pickCategory:function(t){this.selectedCategory=t,this.load(1)},openCreate:function(){this.editingItem=null,this.isFormOpen=!0},openEdit:function(t){this.editingItem=t,this.isFormOpen=!0},closeForm:function(){this.isFormOpen=!1,this.editingItem=null},confirmDelete:function(t){this.pendingDelete=t},handleSubmit:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark(function r(){var o,l,c,d;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.submitting=!0,r.prev=1,l=new FormData,Object.entries(t.data).forEach(function(t){var e=Object(n.a)(t,2),r=e[0],o=e[1];return null!=o&&l.append(r,o)}),!t.isEdit){r.next=3;break}return l.append("_method","PUT"),r.next=2,e.$axios.post("/api/materials/".concat(t.id),l,{headers:{"Content-Type":"multipart/form-data"}});case 2:r.next=4;break;case 3:return r.next=4,e.$axios.post("/api/materials",l,{headers:{"Content-Type":"multipart/form-data"}});case 4:return null===(o=e.$notify)||void 0===o||o.call(e,{type:"success",text:t.isEdit?"Թարմացվեց":"Ստեղծվեց"}),r.next=5,e.load(e.pagination.current_page||1);case 5:e.closeForm(),r.next=7;break;case 6:r.prev=6,d=r.catch(1),null===(c=e.$notify)||void 0===c||c.call(e,{type:"error",text:d});case 7:return r.prev=7,e.submitting=!1,r.finish(7);case 8:case"end":return r.stop()}},r,null,[[1,6,7,8]])}))()},doDelete:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var r,n,o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,t.deleteMaterial(t.pendingDelete.id);case 1:return n=t.materials.length<=1&&t.pagination.current_page>1?t.pagination.current_page-1:t.pagination.current_page,t.pendingDelete=null,e.next=2,t.load(n);case 2:null===(r=t.$notify)||void 0===r||r.call(t,{type:"success",text:"Ջնջվեց"}),e.next=4;break;case 3:e.prev=3,l=e.catch(0),null===(o=t.$notify)||void 0===o||o.call(t,{type:"error",text:l});case 4:case"end":return e.stop()}},e,null,[[0,3]])}))()}})},_=y,x=r(32),component=Object(x.a)(_,function(){var t,e=this,r=e._self._c;return r("div",{staticClass:"p-6"},[r("MaterialsToolbar",{attrs:{categories:e.allCategories,"selected-category":e.selectedCategory,search:e.search},on:{"update:search":function(t){e.search=t},"pick-category":e.pickCategory,create:e.openCreate}}),e._v(" "),r("div",{staticClass:"mt-5"},[r("MaterialsTable",{attrs:{items:e.materials},on:{remove:e.confirmDelete,edit:e.openEdit}})],1),e._v(" "),r("div",{staticClass:"flex items-center justify-between mt-4"},[r("div",{staticClass:"text-sm opacity-70"},[e._v("\n      Ընդամենը՝ "+e._s(e.pagination.total)+" | Էջ "+e._s(e.pagination.current_page)+" /\n      "+e._s(e.pagination.last_page)+"\n    ")]),e._v(" "),r("div",{staticClass:"flex gap-2"},[r("button",{staticClass:"px-3 py-1 rounded border",attrs:{disabled:e.pagination.current_page<=1||e.loading},on:{click:function(t){return e.goPage(e.pagination.current_page-1)}}},[e._v("\n        Նախորդ\n      ")]),e._v(" "),r("button",{staticClass:"px-3 py-1 rounded border",attrs:{disabled:e.pagination.current_page>=e.pagination.last_page||e.loading},on:{click:function(t){return e.goPage(e.pagination.current_page+1)}}},[e._v("\n        Հաջորդ\n      ")])])]),e._v(" "),e.pendingDelete?r("div",{staticClass:"fixed inset-0 z-50 flex items-center justify-center"},[r("div",{staticClass:"absolute inset-0 bg-black/40",on:{click:function(t){e.pendingDelete=null}}}),e._v(" "),r("div",{staticClass:"relative bg-white dark:bg-gray-900 rounded-xl p-5 shadow-xl w-[95%] max-w-md"},[r("h3",{staticClass:"text-lg font-semibold mb-2"},[e._v("Ջնջե՞լ նյութը")]),e._v(" "),r("p",{staticClass:"text-sm opacity-80 mb-5"},[e._v("\n        "+e._s((null===(t=e.pendingDelete)||void 0===t?void 0:t.description)||"—")+"\n      ")]),e._v(" "),r("div",{staticClass:"flex justify-end gap-3"},[r("button",{staticClass:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700",on:{click:function(t){e.pendingDelete=null}}},[e._v("\n          Չեղարկել\n        ")]),e._v(" "),r("button",{staticClass:"px-4 py-2 rounded bg-red-600 text-white",attrs:{disabled:e.loading},on:{click:e.doDelete}},[e._v("\n          Ջնջել\n        ")])])])]):e._e(),e._v(" "),r("MaterialFormModal",{attrs:{visible:e.isFormOpen,item:e.editingItem,categories:e.allCategories,submitting:e.submitting},on:{close:e.closeForm,submit:e.handleSubmit}})],1)},[],!1,null,null,null);e.default=component.exports;installComponents(component,{MaterialsToolbar:r(683).default,MaterialsTable:r(684).default})}}]);