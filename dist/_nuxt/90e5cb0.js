(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{463:function(t,e,r){"use strict";var o=r(3),n=r(282).trim;o({target:"String",proto:!0,forced:r(464)("trim")},{trim:function(){return n(this)}})},464:function(t,e,r){"use strict";var o=r(112).PROPER,n=r(5),l=r(283);t.exports=function(t){return n(function(){return!!l[t]()||"​᠎"!=="​᠎"[t]()||o&&l[t].name!==t})}},508:function(t,e,r){var content=r(527);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(36).default)("1e8a6727",content,!0,{sourceMap:!1})},526:function(t,e,r){"use strict";r(508)},527:function(t,e,r){var o=r(35)(function(i){return i[1]});o.push([t.i,"",""]),o.locals={},t.exports=o},536:function(t,e,r){"use strict";r.r(e);r(19),r(42),r(48),r(46),r(44),r(18),r(6),r(23),r(32),r(27),r(61),r(463),r(28);function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,a){if(t){if("string"==typeof t)return n(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,l=function(){};return{s:l,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function n(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var l={name:"ServiceFormModal",props:{visible:{type:Boolean,default:!1},service:{type:Object,default:null},submitting:{type:Boolean,default:!1}},data:function(){return{locales:["hy","ru","en"],mapNames:{hy:"HY",ru:"RU",en:"EN"},active:"hy",form:{title:{hy:"",ru:"",en:""},slug:{hy:"",ru:"",en:""},description:{hy:"",ru:"",en:""}},files:{image:null,video:null,video_poster:null},preview:{image:"",video_poster:""}}},computed:{isEdit:function(){var t;return!(null===(t=this.service)||void 0===t||!t.id)}},watch:{visible:function(t){var e=this;t?(this.hydrate(),this.$nextTick(function(){var t,r;return null===(t=e.$refs.card)||void 0===t||null===(r=t.focus)||void 0===r?void 0:r.call(t)})):this.reset()},service:function(){this.visible&&this.hydrate()}},methods:{hydrate:function(){var t,e,r,o,n,l,c,d,v,f,m,h,y=(null===(t=this.service)||void 0===t?void 0:t.translations)||null;y?(this.form.title={hy:(null===(o=y.title)||void 0===o?void 0:o.hy)||"",ru:(null===(n=y.title)||void 0===n?void 0:n.ru)||"",en:(null===(l=y.title)||void 0===l?void 0:l.en)||""},this.form.slug={hy:(null===(c=y.slug)||void 0===c?void 0:c.hy)||"",ru:(null===(d=y.slug)||void 0===d?void 0:d.ru)||"",en:(null===(v=y.slug)||void 0===v?void 0:v.en)||""},this.form.description={hy:(null===(f=y.description)||void 0===f?void 0:f.hy)||"",ru:(null===(m=y.description)||void 0===m?void 0:m.ru)||"",en:(null===(h=y.description)||void 0===h?void 0:h.en)||""}):this.service&&(this.form.title.hy=this.service.title||"",this.form.slug.hy=this.service.slug||"",this.form.description.hy=this.service.description||"");this.preview.image=(null===(e=this.service)||void 0===e?void 0:e.image_url)||"",this.preview.video_poster=(null===(r=this.service)||void 0===r?void 0:r.video_poster_url)||"",this.active="hy"},reset:function(){this.form={title:{hy:"",ru:"",en:""},slug:{hy:"",ru:"",en:""},description:{hy:"",ru:"",en:""}},this.files={image:null,video:null,video_poster:null},this.preview={image:"",video_poster:""},this.active="hy"},maybeAutoslug:function(code){this.form.slug[code]||(this.form.slug[code]=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString().normalize("NFD").replace(/[\u0300-\u036F]/g,"").replace(/[^a-zA-Z0-9\u0561-\u0587\u0531-\u0556\s_-]/g,"").trim().replace(/\s+/g,"-").toLowerCase()}(this.form.title[code]||""))},onFile:function(t,e){var r,o=this,n=null===(r=t.target.files)||void 0===r?void 0:r[0];if(n&&(this.files[e]=n,"image"===e||"video_poster"===e)){var l=new FileReader;l.onload=function(t){return o.preview[e]=t.target.result},l.readAsDataURL(n)}},submit:function(){var t,e,r=new FormData,n=o(this.locales);try{for(n.s();!(e=n.n()).done;){var code=e.value,l=this.form.title[code],s=this.form.slug[code],c=this.form.description[code];l&&r.append("title[".concat(code,"]"),l),s&&r.append("slug[".concat(code,"]"),s),c&&r.append("description[".concat(code,"]"),c)}}catch(t){n.e(t)}finally{n.f()}this.files.image&&r.append("image",this.files.image),this.files.video&&r.append("video",this.files.video),this.files.video_poster&&r.append("video_poster",this.files.video_poster),this.$emit("submit",{asFormData:r,isEdit:this.isEdit,id:null===(t=this.service)||void 0===t?void 0:t.id})}}},c=l,d=(r(526),r(11)),component=Object(d.a)(c,function(){var t,e,r,o,n=this,l=n._self._c;return n.visible?l("div",{staticClass:"fixed inset-0 z-[1000] bg-black/40 flex items-center justify-center p-4",on:{click:function(t){return t.target!==t.currentTarget?null:n.$emit("close")}}},[l("div",{ref:"card",staticClass:"w-full max-w-3xl rounded-2xl bg-white shadow-xl flex flex-col max-h-[90vh] pb-[env(safe-area-inset-bottom)]",attrs:{tabindex:"0"},on:{keydown:function(t){return!t.type.indexOf("key")&&n._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:n.$emit("close")}}},[l("div",{staticClass:"flex items-center justify-between px-5 py-4 border-b"},[l("h3",{staticClass:"text-lg font-semibold"},[n._v("\n        "+n._s(n.isEdit?"Խմբագրել ծառայություն":"Նոր ծառայություն")+"\n      ")]),n._v(" "),l("button",{staticClass:"text-gray-500 hover:text-gray-800",on:{click:function(t){return n.$emit("close")}}},[n._v("\n        ✕\n      ")])]),n._v(" "),l("div",{staticClass:"p-5 space-y-5 overflow-y-auto"},[l("div",[l("div",{staticClass:"flex gap-2 mb-3"},n._l(n.locales,function(code){return l("button",{key:code,staticClass:"px-3 py-1.5 rounded border text-sm",class:code===n.active?"bg-gray-900 text-white border-gray-900":"bg-white hover:bg-gray-50",attrs:{type:"button"},on:{click:function(t){n.active=code}}},[n._v("\n            "+n._s(n.mapNames[code])+"\n          ")])}),0),n._v(" "),l("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-3"},[l("div",[l("label",{staticClass:"text-sm font-medium"},[n._v("\n              Վերնագիր ("+n._s(n.active.toUpperCase())+")\n            ")]),n._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:n.form.title[n.active],expression:"form.title[active]"}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"text"},domProps:{value:n.form.title[n.active]},on:{input:[function(t){t.target.composing||n.$set(n.form.title,n.active,t.target.value)},function(t){return n.maybeAutoslug(n.active)}]}})]),n._v(" "),l("div",[l("label",{staticClass:"text-sm font-medium"},[n._v("\n              Slug ("+n._s(n.active.toUpperCase())+")\n            ")]),n._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:n.form.slug[n.active],expression:"form.slug[active]"}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"text"},domProps:{value:n.form.slug[n.active]},on:{input:function(t){t.target.composing||n.$set(n.form.slug,n.active,t.target.value)}}})])]),n._v(" "),l("div",[l("label",{staticClass:"text-sm font-medium"},[n._v("\n            Նկարագրություն ("+n._s(n.active.toUpperCase())+")\n          ")]),n._v(" "),l("textarea",{directives:[{name:"model",rawName:"v-model",value:n.form.description[n.active],expression:"form.description[active]"}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{rows:"4"},domProps:{value:n.form.description[n.active]},on:{input:function(t){t.target.composing||n.$set(n.form.description,n.active,t.target.value)}}})])]),n._v(" "),l("div",{staticClass:"grid grid-cols-1 md:grid-cols-3 gap-4"},[l("div",[l("label",{staticClass:"text-sm font-medium"},[n._v("Նկարը")]),n._v(" "),l("input",{staticClass:"block w-full mt-1",attrs:{type:"file",accept:"image/*"},on:{change:function(t){return n.onFile(t,"image")}}}),n._v(" "),n.preview.image||null!==(t=n.service)&&void 0!==t&&t.image_url?l("div",{staticClass:"mt-2"},[l("img",{staticClass:"h-24 w-full object-cover rounded border",attrs:{src:n.preview.image||(null===(e=n.service)||void 0===e?void 0:e.image_url),alt:""}})]):n._e()]),n._v(" "),l("div",[l("label",{staticClass:"text-sm font-medium"},[n._v("Վիդեո (mp4/webm/ogg)")]),n._v(" "),l("input",{staticClass:"block w-full mt-1",attrs:{type:"file",accept:"video/*"},on:{change:function(t){return n.onFile(t,"video")}}}),n._v(" "),l("p",{staticClass:"text-xs text-gray-500 mt-1"},[n._v("Մաքս. 50ՄԲ")])]),n._v(" "),l("div",[l("label",{staticClass:"text-sm font-medium"},[n._v("Վիդեո պոստեր")]),n._v(" "),l("input",{staticClass:"block w-full mt-1",attrs:{type:"file",accept:"image/*"},on:{change:function(t){return n.onFile(t,"video_poster")}}}),n._v(" "),n.preview.video_poster||null!==(r=n.service)&&void 0!==r&&r.video_poster_url?l("div",{staticClass:"mt-2"},[l("img",{staticClass:"h-24 w-full object-cover rounded border",attrs:{src:n.preview.video_poster||(null===(o=n.service)||void 0===o?void 0:o.video_poster_url),alt:""}})]):n._e()])])]),n._v(" "),l("div",{staticClass:"px-5 py-4 border-t mt-auto bg-white sticky bottom-0 pb-[env(safe-area-inset-bottom)]"},[l("div",{staticClass:"flex items-center justify-end gap-3"},[l("button",{staticClass:"px-4 py-2 rounded-lg border",attrs:{disabled:n.submitting,type:"button"},on:{click:function(t){return n.$emit("close")}}},[n._v("\n          Չեղարկել\n        ")]),n._v(" "),l("button",{staticClass:"px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",attrs:{disabled:n.submitting,type:"button"},on:{click:n.submit}},[n._v("\n          "+n._s(n.submitting?"Պահպանում…":n.isEdit?"Պահպանել":"Ավելացնել")+"\n        ")])])])])]):n._e()},[],!1,null,"4e377637",null);e.default=component.exports}}]);