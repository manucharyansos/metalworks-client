(window.webpackJsonp=window.webpackJsonp||[]).push([[75,23,24,27,28,38,61],{574:function(t,e,r){"use strict";var n=r(4),o=r(405).trim;n({target:"String",proto:!0,forced:r(575)("trim")},{trim:function(){return o(this)}})},575:function(t,e,r){"use strict";var n=r(112).PROPER,o=r(6),l=r(406);t.exports=function(t){return o(function(){return!!l[t]()||"​᠎"!=="​᠎"[t]()||n&&l[t].name!==t})}},578:function(t,e,r){"use strict";r.r(e);r(403);var n={name:"InputWithLabelIcon",props:{label:{type:String,default:""},label_Id:{type:String,default:""},for_LAbel:{type:String,default:""},type:{type:String,default:""},value:{type:[String,Array,Number],default:""},placeholder:{type:String,default:""},classes:{type:String,default:""},label_class:{type:[String,Object],default:""},disabled:{type:Boolean,default:!1}}},o=r(32),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative"},[e("span",{staticClass:"absolute start-1 bottom-3 text-gray-500 dark:text-gray-400"},[t._t("label_svg")],2),t._v(" "),e("input",{staticClass:"block py-2.5 ps-6 pe-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",class:t.classes,attrs:{id:t.label_Id,type:t.type,placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),t._v(" "),e("label",{staticClass:"absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-2 z-10 origin-[0] start-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto",class:t.label_class,attrs:{for:t.for_LAbel}},[t._v("\n    "+t._s(t.label)+"\n  ")])])},[],!1,null,"faa5144a",null);e.default=component.exports},580:function(t,e,r){var content=r(588);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("50c38fbe",content,!0,{sourceMap:!1})},581:function(t,e,r){"use strict";r.r(e);r(33),r(403);var n={name:"Pagination",props:{meta:{type:Object,required:!0}},computed:{canPrev:function(){var t;return Number((null===(t=this.meta)||void 0===t?void 0:t.current_page)||1)>1},canNext:function(){var t,e;return Number((null===(t=this.meta)||void 0===t?void 0:t.current_page)||1)<Number((null===(e=this.meta)||void 0===e?void 0:e.last_page)||1)},pages:function(){var t,e,r=Number((null===(t=this.meta)||void 0===t?void 0:t.current_page)||1),n=Number((null===(e=this.meta)||void 0===e?void 0:e.last_page)||1),o=[];if(n<=7)for(var i=1;i<=n;i++)o.push(i);else{o.push(1),r>4&&o.push("…");for(var l=Math.max(2,r-1),d=Math.min(n-1,r+1),c=l;c<=d;c++)o.push(c);r<n-3&&o.push("…"),o.push(n)}return o}},methods:{go:function(p){var t;"…"!==p&&p!==(null===(t=this.meta)||void 0===t?void 0:t.current_page)&&this.$emit("change",p)}}},o=r(32),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("nav",{staticClass:"flex items-center justify-center gap-1 mt-2",attrs:{role:"navigation","aria-label":"Էջավորում"}},[e("button",{staticClass:"px-2 py-1 mx-1 text-xs sm:text-sm font-medium rounded-lg border transition bg-indigo-50 text-neutral-700 border-indigo-200 hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:!t.canPrev},on:{click:function(e){return t.$emit("change",t.meta.current_page-1)}}},[t._v("\n    "+t._s(t.$t?t.$t("pagination.previous"):"Նախորդ")+"\n  ")]),t._v(" "),t._l(t.pages,function(p,i){return e("div",{key:"".concat(i,"-").concat(p)},["…"===p?e("span",{staticClass:"px-2 py-1 mx-1 text-xs sm:text-sm text-neutral-500"},[t._v("\n      …\n    ")]):e("button",{staticClass:"px-3 py-1 mx-1 text-xs sm:text-sm font-medium rounded-lg transition",class:p===t.meta.current_page?"bg-indigo-500 text-white shadow-sm":"bg-indigo-50 text-neutral-700 hover:bg-indigo-100 border border-indigo-200",on:{click:function(e){return t.go(p)}}},[t._v("\n      "+t._s(p)+"\n    ")])])}),t._v(" "),e("button",{staticClass:"px-2 py-1 mx-1 text-xs sm:text-sm font-medium rounded-lg border transition bg-indigo-50 text-neutral-700 border-indigo-200 hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:!t.canNext},on:{click:function(e){return t.$emit("change",t.meta.current_page+1)}}},[t._v("\n    "+t._s(t.$t?t.$t("pagination.next"):"Հաջորդ")+"\n  ")])],2)},[],!1,null,null,null);e.default=component.exports},584:function(t,e,r){var content=r(594);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("10846d58",content,!0,{sourceMap:!1})},587:function(t,e,r){"use strict";r(580)},588:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".animate-fade-in[data-v-91e2255e]{animation:fadeIn-91e2255e .3s ease-out}@keyframes fadeIn-91e2255e{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}select[data-v-91e2255e]::-ms-expand{display:none}",""]),n.locals={},t.exports=n},592:function(t,e,r){"use strict";r.r(e);r(23),r(49),r(17),r(8),r(403);var n={props:{displayField:{type:String,default:"name"},label:{type:String,default:""},value:{type:[Number,Object,String],default:null},name:{type:String,default:""},dataValue:{type:[Array,Object],default:function(){return[]}},placeholder:{type:String,default:""}},data:function(){return{selectValue:this.value,isOpen:!1}},watch:{value:function(t){this.selectValue=t},selectValue:function(t){this.$emit("input",t),this.$emit("change",t)}},mounted:function(){var t=this,select=this.$el.querySelector("select");select&&(select.addEventListener("focus",function(){return t.isOpen=!0}),select.addEventListener("blur",function(){return t.isOpen=!1}))}},o=(r(587),r(32)),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[t.label?e("label",{staticClass:"block mb-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors",attrs:{for:t.name}},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),t._v(" "),e("div",{staticClass:"relative"},[e("select",t._b({directives:[{name:"model",rawName:"v-model",value:t.selectValue,expression:"selectValue"}],staticClass:"appearance-none w-full px-4 py-2.5 pr-10 text-sm font-medium text-gray-900 bg-white border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:focus:ring-blue-500 transition-all duration-200 ease-in-out hover:border-gray-400 dark:hover:border-gray-500 disabled:opacity-60 disabled:cursor-not-allowed",attrs:{id:t.name,name:t.name,disabled:0===t.dataValue.length},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectValue=e.target.multiple?r:r[0]}}},"select",t.$attrs,!1),[e("option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[t._v("\n        "+t._s(t.placeholder||"Ընտրեք տարբերակը")+"\n      ")]),t._v(" "),t._l(t.dataValue,function(r,n){return e("option",{key:n,staticClass:"text-sm",domProps:{value:r}},[t._v("\n        "+t._s("value"===t.displayField?r.value:r.label)+"\n      ")])})],2)]),t._v(" "),t.dataValue&&0!==t.dataValue.length?t._e():e("p",{staticClass:"mt-2 text-xs text-red-600 dark:text-red-400 animate-fade-in"},[t._v("\n    Տվյալներ չկան։\n  ")]),t._v(" "),t.$slots.helper?e("p",{staticClass:"mt-1.5 text-xs text-gray-500 dark:text-gray-400"},[t._t("helper")],2):t._e()])},[],!1,null,"91e2255e",null);e.default=component.exports},593:function(t,e,r){"use strict";r(584)},594:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".modal-backdrop-enter-active[data-v-2de90e03],.modal-backdrop-leave-active[data-v-2de90e03]{transition:opacity .3s ease}.modal-backdrop-enter-from[data-v-2de90e03],.modal-backdrop-leave-to[data-v-2de90e03]{opacity:0}.modal-backdrop-enter-active .relative[data-v-2de90e03],.modal-backdrop-leave-active .relative[data-v-2de90e03]{transition:all .4s cubic-bezier(.175,.885,.32,1.1)}.modal-backdrop-enter-from .relative[data-v-2de90e03]{opacity:0;transform:translateY(40px) scale(.92)}.modal-backdrop-leave-to .relative[data-v-2de90e03]{opacity:0;transform:translateY(-30px) scale(.92)}.slide-fade-enter-active[data-v-2de90e03],.slide-fade-leave-active[data-v-2de90e03]{transition:all .35s ease-out}.slide-fade-enter-from[data-v-2de90e03],.slide-fade-leave-to[data-v-2de90e03]{opacity:0;transform:translateY(-16px)}",""]),n.locals={},t.exports=n},617:function(t,e,r){"use strict";r.r(e);var n=r(184),o=(r(33),r(23),r(38),r(8),r(18),r(52),r(78),{name:"OrdersToolbar",props:{search:{type:String,default:""},statusOptions:{type:Array,default:function(){return[]}},selectedStatuses:{type:Array,default:function(){return[]}}},data:function(){return{localSearch:this.search}},watch:{search:function(t){this.localSearch=t}},methods:{isActive:function(t){return this.selectedStatuses.includes(t.value)},toggleStatus:function(t){var e=t.value,r=this.selectedStatuses.includes(e)?this.selectedStatuses.filter(function(t){return t!==e}):[].concat(Object(n.a)(this.selectedStatuses),[e]);this.$emit("update:selected-statuses",r)},clearFilters:function(){this.$emit("update:selected-statuses",[])}}}),l=r(32),component=Object(l.a)(o,function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},[e("div",{staticClass:"w-full md:w-1/3"},[e("div",{staticClass:"relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.localSearch,expression:"localSearch"}],staticClass:"w-full rounded-xl border border-gray-300 bg-white px-4 py-2 text-sm text-gray-800 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",attrs:{type:"text",placeholder:"Որոնել ըստ համարի, անունի կամ կոդի..."},domProps:{value:t.localSearch},on:{input:[function(e){e.target.composing||(t.localSearch=e.target.value)},function(e){return t.$emit("update:search",t.localSearch)}]}}),t._v(" "),e("span",{staticClass:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-gray-400"},[e("svg",{staticClass:"h-4 w-4",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35M10 18a8 8 0 100-16 8 8 0 000 16z"}})])])])]),t._v(" "),e("div",{staticClass:"flex flex-wrap items-center gap-2"},[e("span",{staticClass:"mr-1 text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"},[t._v("\n      Կարգավիճակներ\n    ")]),t._v(" "),t._l(t.statusOptions,function(r,n){return e("button",{key:n,staticClass:"rounded-full px-3 py-1 text-xs font-medium transition-all",class:t.isActive(r)?"bg-indigo-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",attrs:{type:"button"},on:{click:function(e){return t.toggleStatus(r)}}},[t._v("\n      "+t._s(r.label)+"\n    ")])}),t._v(" "),t.selectedStatuses.length?e("button",{staticClass:"rounded-full bg-transparent px-2 py-1 text-xs font-medium text-gray-500 underline underline-offset-2 hover:text-gray-700 dark:text-gray-300 dark:hover:text-white",attrs:{type:"button"},on:{click:t.clearFilters}},[t._v("\n      Մաքրել\n    ")]):t._e()],2)])},[],!1,null,null,null);e.default=component.exports},618:function(t,e,r){"use strict";r.r(e);r(24),r(43),r(17),r(79),r(403),r(8);var n={name:"OrderCard",props:{order:{type:Object,required:!0},factoryId:{type:[Number,String],required:!0},currentUserId:{type:[Number,String],required:!0}},computed:{factoryOrder:function(){var t=this;return this.order.factory_orders?this.order.factory_orders.find(function(e){return String(e.factory_id)===String(t.factoryId)}):null},status:function(){var t,s=null===(t=this.factoryOrder)||void 0===t?void 0:t.status;return s&&"pending"!==s?s:null},operatorName:function(){var t;return(null===(t=this.factoryOrder)||void 0===t||null===(t=t.operator)||void 0===t?void 0:t.name)||null},statusLabel:function(){return this.status||"Առանց կարգավիճակի"},isTakenByOther:function(){var t,e=null===(t=this.factoryOrder)||void 0===t?void 0:t.operator_id;return!!e&&String(e)!==String(this.currentUserId)},isCompleted:function(){return"Ավարտել"===this.status},isLocked:function(){return this.isTakenByOther||this.isCompleted},badgeClass:function(){switch(this.status){case"Հաստատել":return"bg-green-100 text-green-700 dark:bg-green-700/30 dark:text-green-200";case"Մերժել":return"bg-red-100 text-red-700 dark:bg-red-700/30 dark:text-red-200";case"Կատարման ժամկետի փոխարինում":return"bg-orange-100 text-orange-700 dark:bg-orange-700/30 dark:text-orange-200";case"Ավարտել":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-700/30 dark:text-emerald-200";default:return"bg-gray-100 text-gray-600 dark:bg-gray-700/50 dark:text-gray-200"}},cardStatusClass:function(){return"Ավարտել"===this.status?"border-emerald-200 dark:border-emerald-500/50":"Մերժել"===this.status?"border-red-200 dark:border-red-500/50":"Կատարման ժամկետի փոխարինում"===this.status?"border-orange-200 dark:border-orange-500/50":"Հաստատել"===this.status?"border-green-200 dark:border-green-500/50":""}},methods:{onDragStart:function(t){this.isLocked?t.preventDefault():(t.dataTransfer.effectAllowed="move",this.$emit("drag-start",this.order))}}},o=r(32),component=Object(o.a)(n,function(){var t,e,r,n,o=this,l=o._self._c;return l("div",{staticClass:"group relative flex flex-col rounded-2xl border bg-white p-4 text-sm shadow-sm transition-all dark:border-gray-700 dark:bg-gray-800",class:[o.cardStatusClass,o.isLocked?"opacity-60 cursor-not-allowed":"cursor-move hover:-translate-y-1 hover:shadow-xl"],attrs:{draggable:!o.isLocked},on:{dragstart:o.onDragStart}},[l("div",{staticClass:"mb-2 flex items-start justify-between gap-2"},[l("div",[l("p",{staticClass:"text-xs text-gray-400 dark:text-gray-500"},[o._v("Պատվերի համար")]),o._v(" "),l("h3",{staticClass:"text-sm font-semibold text-gray-900 dark:text-gray-50"},[o._v("\n        "+o._s((null===(t=o.order.order_number)||void 0===t?void 0:t.number)||"Պատվեր #".concat(o.order.id))+"\n      ")]),o._v(" "),l("p",{staticClass:"mt-1 text-xs text-gray-500 dark:text-gray-400"},[o._v("\n        Կոդ:\n        "),l("span",{staticClass:"font-mono"},[o._v("\n          "+o._s(null===(e=o.order.prefix_code)||void 0===e?void 0:e.code)+"\n        ")])])]),o._v(" "),l("span",{staticClass:"inline-flex items-center rounded-full px-2 py-1 text-[10px] font-semibold uppercase tracking-wide",class:o.badgeClass},[o._v("\n      "+o._s(o.statusLabel)+"\n    ")])]),o._v(" "),l("p",{staticClass:"line-clamp-2 text-xs text-gray-600 dark:text-gray-300",attrs:{title:o.order.description}},[o._v("\n    "+o._s(o.order.description||"Առանց նկարագրության")+"\n  ")]),o._v(" "),l("div",{staticClass:"mt-3 grid grid-cols-2 gap-2 text-[11px] text-gray-500 dark:text-gray-400"},[l("div",{staticClass:"flex flex-col gap-1"},[l("span",{staticClass:"text-[10px] uppercase tracking-wide text-gray-400"},[o._v("\n        Ստեղծման ամսաթիվ\n      ")]),o._v(" "),l("span",{staticClass:"font-medium text-gray-700 dark:text-gray-200"},[o._v("\n        "+o._s(o.order.created_at)+"\n      ")])]),o._v(" "),l("div",{staticClass:"flex flex-col gap-1"},[l("span",{staticClass:"text-[10px] uppercase tracking-wide text-gray-400"},[o._v("\n        Ավարտի ժամկետ\n      ")]),o._v(" "),l("span",{staticClass:"font-medium text-gray-700 dark:text-gray-200"},[o._v("\n        "+o._s(null!==(r=o.order.dates)&&void 0!==r&&r.finish_date?o.$formatDate(o.order.dates.finish_date):"Հաշվի առնել")+"\n      ")])]),o._v(" "),l("div",{staticClass:"flex flex-col gap-1"},[l("span",{staticClass:"text-[10px] uppercase tracking-wide text-gray-400"},[o._v("\n        Ստեղծող\n      ")]),o._v(" "),l("span",{staticClass:"font-medium text-gray-700 dark:text-gray-200"},[o._v("\n        "+o._s((null===(n=o.order.creator)||void 0===n?void 0:n.name)||"—")+"\n      ")])]),o._v(" "),l("div",{staticClass:"flex flex-col gap-1"},[l("span",{staticClass:"text-[10px] uppercase tracking-wide text-gray-400"},[o._v("\n        Օպերատոր\n      ")]),o._v(" "),l("span",{staticClass:"font-medium text-gray-700 dark:text-gray-200"},[o._v("\n        "+o._s(o.operatorName||"Չնշված")+"\n      ")])])]),o._v(" "),o.isTakenByOther?l("p",{staticClass:"mt-2 text-[10px] font-medium text-red-500 flex items-center gap-1"},[l("span",{staticClass:"inline-block h-1.5 w-1.5 rounded-full bg-red-500"}),o._v("\n    Պատվերը վերցված է այլ օպերատորի կողմից\n  ")]):o.isCompleted?l("p",{staticClass:"mt-2 text-[10px] font-medium text-emerald-600 flex items-center gap-1 dark:text-emerald-300"},[l("span",{staticClass:"inline-block h-1.5 w-1.5 rounded-full bg-emerald-500"}),o._v("\n    Առաջադրանքը ավարտված է\n  ")]):o._e(),o._v(" "),l("div",{staticClass:"mt-4 flex items-center justify-between pt-2"},[l("button",{staticClass:"flex items-center gap-1 text-xs font-medium text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-200",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),o.$emit("view-details",o.order)}}},[o._v("\n      Դիտել մանրամասն\n      "),l("svg",{staticClass:"h-3 w-3",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[l("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"}})])]),o._v(" "),l("button",{staticClass:"rounded-full px-3 py-1 text-xs font-semibold shadow-sm transition-all",class:o.isLocked?"bg-gray-200 text-gray-400 cursor-not-allowed dark:bg-gray-700 dark:text-gray-500":"bg-indigo-50 text-indigo-700 hover:bg-indigo-100 hover:shadow-md dark:bg-indigo-600/20 dark:text-indigo-200 dark:hover:bg-indigo-600/30",attrs:{type:"button",disabled:o.isLocked},on:{click:function(t){t.stopPropagation(),!o.isLocked&&o.$emit("edit",o.order)}}},[o._v("\n      Խմբագրել\n    ")])]),o._v(" "),o.isLocked?o._e():l("div",{staticClass:"pointer-events-none absolute -left-1 top-1/2 hidden -translate-y-1/2 text-xs text-gray-300 group-hover:inline"},[o._v("\n    ☰\n  ")])])},[],!1,null,null,null);e.default=component.exports},619:function(t,e,r){"use strict";r.r(e);r(41),r(18),r(61);var n=r(592),o=r(578),l={components:{SelectWithLabel:n.default,InputWithLabelIcon:o.default},props:{isOpen:Boolean,actionOptions:{type:Array,required:!0},cancelReasons:{type:Array,required:!0},todayFormatted:String,tomorrowDate:String},emits:["close","confirm"],data:function(){return{localSelectedOption:null,localAdditionalOption:null,localChangeDate:null}},watch:{isOpen:function(t){t||this.reset()}},methods:{reset:function(){this.localSelectedOption=null,this.localAdditionalOption=null,this.localChangeDate=null},confirm:function(){var t;this.localSelectedOption&&(this.$emit("confirm",{status:this.localSelectedOption.value,canceling:(null===(t=this.localAdditionalOption)||void 0===t?void 0:t.value)||"",cancel_date:"date_changed"===this.localSelectedOption.value?this.localChangeDate:null,operator_finish_date:"finished"===this.localSelectedOption.value?(new Date).toISOString().slice(0,19).replace("T"," "):null}),this.$emit("close"))}}},d=(r(593),r(32)),component=Object(d.a)(l,function(){var t,e,r,n=this,o=n._self._c;return o("transition",{attrs:{name:"modal-backdrop"}},[n.isOpen?o("div",{staticClass:"fixed inset-0 z-[9999] flex items-center justify-center px-4 py-8 overflow-y-auto bg-black/30 backdrop-blur-sm",on:{click:function(t){return n.$emit("close")}}},[o("div",{staticClass:"relative w-full max-w-md bg-white dark:bg-gray-900 rounded-3xl shadow-2xl overflow-hidden",on:{click:function(t){t.stopPropagation()}}},[o("div",{staticClass:"px-6 pt-6 pb-4 border-b border-gray-100 dark:border-gray-800"},[o("div",{staticClass:"flex items-start justify-between"},[o("div",[o("h3",{staticClass:"text-xl font-bold text-gray-900 dark:text-white"},[n._v("\n              Գործողություն պատվերի վրա\n            ")]),n._v(" "),o("p",{staticClass:"text-sm text-gray-500 dark:text-gray-400 mt-1"},[n._v("\n              Ընտրեք կարգավիճակը և լրացրեք անհրաժեշտ տվյալները\n            ")])]),n._v(" "),o("button",{staticClass:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors ml-4",on:{click:function(t){return n.$emit("close")}}},[o("svg",{staticClass:"w-6 h-6",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])])])]),n._v(" "),o("div",{staticClass:"p-6 space-y-6"},[o("div",[o("label",{staticClass:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[n._v("\n            Գործողություն\n          ")]),n._v(" "),o("SelectWithLabel",{attrs:{"data-value":n.actionOptions,placeholder:"Ընտրել գործողություն..."},model:{value:n.localSelectedOption,callback:function(t){n.localSelectedOption=t},expression:"localSelectedOption"}})],1),n._v(" "),o("transition",{attrs:{name:"slide-fade"}},["canceled"===(null===(t=n.localSelectedOption)||void 0===t?void 0:t.value)?o("div",{staticClass:"animate-in fade-in slide-in-from-top duration-300"},[o("label",{staticClass:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[n._v("\n              Մերժման պատճառ\n            ")]),n._v(" "),o("SelectWithLabel",{attrs:{"data-value":n.cancelReasons,placeholder:"Ընտրել պատճառ..."},model:{value:n.localAdditionalOption,callback:function(t){n.localAdditionalOption=t},expression:"localAdditionalOption"}})],1):n._e()]),n._v(" "),o("transition",{attrs:{name:"slide-fade"}},["date_changed"===(null===(e=n.localSelectedOption)||void 0===e?void 0:e.value)?o("div",{staticClass:"animate-in fade-in slide-in-from-top duration-300"},[o("label",{staticClass:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[n._v("\n              Նոր կատարման ամսաթիվ\n            ")]),n._v(" "),o("input-with-label-icon",{staticClass:"w-full",attrs:{type:"date",min:n.tomorrowDate},model:{value:n.localChangeDate,callback:function(t){n.localChangeDate=t},expression:"localChangeDate"}})],1):n._e()]),n._v(" "),o("transition",{attrs:{name:"slide-fade"}},["finished"===(null===(r=n.localSelectedOption)||void 0===r?void 0:r.value)?o("div",{staticClass:"p-5 rounded-2xl bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/30 dark:to-green-900/30 border border-emerald-200 dark:border-emerald-800 animate-in fade-in zoom-in duration-300"},[o("p",{staticClass:"text-center"},[o("span",{staticClass:"text-sm text-emerald-700 dark:text-emerald-300 font-medium"},[n._v("Ավարտի ամսաթիվը կլինի՝")]),n._v(" "),o("span",{staticClass:"block text-2xl font-bold text-emerald-800 dark:text-emerald-400 mt-1"},[n._v("\n                "+n._s(n.todayFormatted)+"\n              ")])])]):n._e()]),n._v(" "),o("button",{staticClass:"w-full py-4 rounded-2xl font-bold text-white text-lg transition-all duration-200 transform active:scale-98 shadow-lg",class:n.localSelectedOption?"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-indigo-500/30":"bg-gray-400 cursor-not-allowed shadow-none",attrs:{disabled:!n.localSelectedOption},on:{click:n.confirm}},[n._v("\n          "+n._s(n.localSelectedOption?"Հաստատել գործողությունը":"Ընտրեք գործողություն")+"\n        ")])],1)])]):n._e()])},[],!1,null,"2de90e03",null);e.default=component.exports},697:function(t,e,r){var content=r(749);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("96013b28",content,!0,{sourceMap:!1})},748:function(t,e,r){"use strict";r(697)},749:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".fade-list-enter-active[data-v-3c8fe5a8],.fade-list-leave-active[data-v-3c8fe5a8]{transition:all .2s ease}.fade-list-enter-from[data-v-3c8fe5a8],.fade-list-leave-to[data-v-3c8fe5a8]{opacity:0;transform:translateY(6px)}",""]),n.locals={},t.exports=n},787:function(t,e,r){"use strict";r.r(e);r(39),r(40),r(27),r(30);var n=r(11),o=r(1),l=r(184),d=r(15),c=(r(9),r(24),r(43),r(33),r(23),r(79),r(38),r(49),r(41),r(17),r(8),r(18),r(52),r(25),r(61),r(574),r(26),r(409),r(410),r(114),r(96)),f=r(617),v=r(618),m=r(581),x=r(770);function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach(function(e){Object(d.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var _={components:{OrderActionModal:r(619).default,LaserOrderDetailsPanel:x.default,OrdersToolbar:f.default,OrderCard:v.default,Pagination:m.default},layout:"factory",middleware:["role-guard"],meta:{role:"laser"},data:function(){return{searchable:"",isModal:!1,isOpenDetails:!1,selectedOrder:{},dxfUrl:"",details:{name:"",quantity:0,description:"",files:[]},draggingOrder:null,draggingFromColumnId:null,selectedStatuses:[],currentPage:1,perPage:12,currentFactoryId:null,currentUserId:null,statusOptions:[],actionOptions:[],cancelReasons:[{label:"Ոչ հստակ պատվեր",value:"unclear"},{label:"Սխալ տվյալներ",value:"wrong_data"},{label:"Նյութի բացակայություն",value:"no_material"},{label:"Այլ պատճառ",value:"other"}],selectedOption:null,additionalOption:null,changeDate:null}},computed:h(h({},Object(c.c)("factory",["getOrderByFactories"])),{},{allOrders:function(){var t,e=null===(t=this.getOrderByFactories)||void 0===t?void 0:t.orders;return Array.isArray(e)?e:[]},filteredByStatus:function(){var t=this;return this.selectedStatuses.length?this.allOrders.filter(function(e){var r,n=t.getFactoryOrderForCurrentFactory(e);if(!n)return!1;var o=null!==(r=n.status)&&void 0!==r?r:"null";return t.selectedStatuses.includes(o)}):this.allOrders},filteredBySearch:function(){var t=this.searchable.trim().toLowerCase();return t?this.filteredByStatus.filter(function(e){var r,n,o,l,d=(null===(r=e.order_number)||void 0===r||null===(r=r.number)||void 0===r?void 0:r.toLowerCase())||"",c=(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())||"",f=(null===(o=e.description)||void 0===o?void 0:o.toLowerCase())||"",v=(null===(l=e.prefix_code)||void 0===l||null===(l=l.code)||void 0===l?void 0:l.toLowerCase())||"";return d.includes(t)||f.includes(t)||c.includes(t)||v.includes(t)}):this.filteredByStatus},paginatedOrders:function(){var t=Array.isArray(this.filteredBySearch)?this.filteredBySearch:[],e=(this.currentPage-1)*this.perPage;return t.slice(e,e+this.perPage)},paginationMeta:function(){var t=this.filteredBySearch.length||0,e=Math.max(Math.ceil(t/this.perPage),1);return{current_page:this.currentPage,per_page:this.perPage,total:t,last_page:e}},boardColumns:function(){var t=this,e=Array.isArray(this.paginatedOrders)?this.paginatedOrders:[],r=(Array.isArray(this.statusOptions)?this.statusOptions:[]).map(function(s){return{id:s.value,label:s.label,value:s.value,icon:t.mapStatusIcon(s.icon),color:s.color||"#6B7280"}});return[].concat([{id:"no_status",label:"Առանց կարգավիճակի",value:"null",icon:"•",color:"#9CA3AF"}],Object(l.a)(r)).map(function(col){var r=e.filter(function(e){var r,n=t.getFactoryOrderForCurrentFactory(e);return!!n&&(null!==(r=n.status)&&void 0!==r?r:"null")===col.value});return h(h({},col),{},{orders:r})})},finishDate:function(){return this.$formatDate(new Date)},todayFormatted:function(){return this.$formatDate(new Date,"dd.MM.yyyy")},tomorrowDate:function(){var t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}}),mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var r,o,l,d,c,f,v,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,Promise.all([t.$axios.get("/api/factories/factory-order-actions"),t.$axios.get("/api/factories/factory-order-filters")]);case 1:l=e.sent,d=Object(n.a)(l,2),c=d[0],f=d[1],t.actionOptions=Array.isArray(c.data)?c.data:[],t.statusOptions=Array.isArray(f.data)?f.data:[],e.next=3;break;case 2:e.prev=2,e.catch(0),t.$notify({text:"Չհաջողվեց բեռնել գործողությունները",type:"error"});case 3:if(v=null===(r=t.$auth.user)||void 0===r?void 0:r.factory_id,m=null===(o=t.$auth.user)||void 0===o?void 0:o.id,t.currentFactoryId=v||null,t.currentUserId=m||null,!t.currentFactoryId){e.next=4;break}return e.next=4,t.fetchOrdersByFactory(t.currentFactoryId);case 4:case"end":return e.stop()}},e,null,[[0,2]])}))()},methods:h(h({},Object(c.b)("factory",["fetchOrdersByFactory","doneFinishedOrder","downloadUploadedFile"])),{},{mapStatusIcon:function(t){switch(t){case"Check":case"Check Circle":return"✓";case"Cross":return"✕";case"Refresh":return"⟳";default:return"•"}},getFactoryOrderForCurrentFactory:function(t){var e=this;if(t.factory_orders&&t.factory_orders.length){var r=t.factory_orders.find(function(t){return String(t.factory_id)===String(e.currentFactoryId)});if(r){var n=r.status,o=n&&"pending"!==n?n:null;return h(h({},r),{},{status:o})}}if(t.factories&&t.factories.length&&t.factories.some(function(t){return String(t.id)===String(e.currentFactoryId)}))return{factory_id:this.currentFactoryId,status:null,operator_id:null};return null},handlePageChange:function(t){this.currentPage=t},viewFile:function(t){this.dxfUrl=t},downloadFile:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=1,e.downloadUploadedFile(t);case 1:t.status="downloaded";case 2:case"end":return r.stop()}},r)}))()},loadFile:function(t){var e=this;if(t instanceof Blob){var r=new FileReader;r.onload=function(t){var r=new Blob([t.target.result],{type:"application/dxf"});e.dxfUrl=URL.createObjectURL(r)},r.readAsArrayBuffer(t)}},updateOrder:function(t){var e=this.getFactoryOrderForCurrentFactory(t);"finished"!==(null==e?void 0:e.status)?null!=e&&e.operator_id&&String(e.operator_id)!==String(this.currentUserId)?this.$notify({text:"Պատվերը զբաղված է այլ օպերատորի կողմից",type:"warning"}):(this.selectedOrder=t,this.isModal=!0):this.$notify({text:"Այս առաջադրանքն արդեն ավարտված է",type:"info"})},closeModal:function(){this.isModal=!1,this.selectedOrder={}},handleModalConfirm:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={id:e.selectedOrder.id,factory_id:e.currentFactoryId,factory_order:{status:t.status,canceling:t.canceling,cancel_date:t.cancel_date,operator_finish_date:t.operator_finish_date}},r.next=1,e.doneFinishedOrder(n);case 1:if(!r.sent){r.next=2;break}return e.$notify({text:"Հաջողությամբ թարմացվեց",type:"success"}),e.closeModal(),r.next=2,e.fetchOrdersByFactory(e.currentFactoryId);case 2:case"end":return r.stop()}},r)}))()},doneOrder:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedOption){e.next=1;break}return e.abrupt("return");case 1:return n={id:t.selectedOrder.id,factory_id:t.currentFactoryId,factory_order:{status:t.selectedOption.value,canceling:(null===(r=t.additionalOption)||void 0===r?void 0:r.value)||"",cancel_date:"date_changed"===t.selectedOption.value?t.changeDate:null,operator_finish_date:"finished"===t.selectedOption.value?(new Date).toISOString().slice(0,19).replace("T"," "):null}},e.next=2,t.doneFinishedOrder(n);case 2:if(!e.sent){e.next=3;break}return t.$notify({text:"Հաջողությամբ թարմացվեց",type:"success"}),t.closeModal(),e.next=3,t.fetchOrdersByFactory(t.currentFactoryId);case 3:case"end":return e.stop()}},e)}))()},toggleDetails:function(t){this.isOpenDetails=!this.isOpenDetails,this.details=t},onDragStart:function(t,e){this.draggingOrder=t,this.draggingFromColumnId=e.id},onDrop:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.draggingOrder){r.next=1;break}return r.abrupt("return");case 1:return n="null"===t.value?null:t.value,r.next=2,e.updateOrderStatusByDrag(e.draggingOrder,n);case 2:e.draggingOrder=null,e.draggingFromColumnId=null;case 3:case"end":return r.stop()}},r)}))()},updateOrderStatusByDrag:function(t,e){var r=this;return Object(o.a)(regeneratorRuntime.mark(function n(){var o,l,dt,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=r.getFactoryOrderForCurrentFactory(t))||"finished"!==o.status){n.next=1;break}return r.$notify({text:"Արդեն ավարտված պատվերի կարգավիճակը չի կարող փոխվել։",duration:3e3,position:"top",type:"info"}),n.abrupt("return");case 1:if(!o||!o.operator_id||String(o.operator_id)===String(r.currentUserId)){n.next=2;break}return r.$notify({text:"Պատվերը ընդունված է այլ օպերատորի կողմից, դուք չեք կարող փոխել։",duration:3e3,position:"top",type:"warning"}),n.abrupt("return");case 2:return l=null,"date_changed"===e&&((dt=new Date).setDate(dt.getDate()+1),l=dt.toISOString().slice(0,19).replace("T"," ")),d={id:t.id,factory_id:r.currentFactoryId,factory_order:{status:e,canceling:"",cancel_date:l,operator_finish_date:"finished"===e?(new Date).toISOString().slice(0,19).replace("T"," "):null}},n.next=3,r.doneFinishedOrder(d);case 3:if(!n.sent){n.next=5;break}return r.$notify({text:"Կարգավիճակը հաջողությամբ թարմացվեց։",duration:2500,position:"top",type:"success"}),n.next=4,r.fetchOrdersByFactory(r.currentFactoryId);case 4:n.next=6;break;case 5:r.$notify({text:"Սխալ տեղի ունեցավ կարգավիճակը թարմացնելիս։",duration:3e3,position:"top",type:"error"});case 6:case"end":return n.stop()}},n)}))()}})},k=(r(748),r(32)),component=Object(k.a)(_,function(){var t=this,e=t._self._c;return e("main",{staticClass:"min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col"},[t.getOrderByFactories&&!t.isModal?[e("div",{staticClass:"container mx-auto px-4 py-6 sm:py-10 flex-1 flex flex-col"},[e("OrdersToolbar",{attrs:{search:t.searchable,"status-options":t.statusOptions,"selected-statuses":t.selectedStatuses},on:{"update:search":function(e){return t.searchable=e},"update:selected-statuses":function(e){return t.selectedStatuses=e}}}),t._v(" "),t.boardColumns.length?e("div",{staticClass:"mt-4 flex-1"},[e("div",{staticClass:"grid gap-4 md:grid-cols-2 xl:grid-cols-4 h-full"},t._l(t.boardColumns,function(r){return e("div",{key:r.id,staticClass:"flex flex-col rounded-2xl bg-gray-50/70 p-3 shadow-sm dark:bg-gray-800/60 h-[calc(100vh-260px)]",on:{dragover:function(t){t.preventDefault()},drop:function(e){return t.onDrop(r)}}},[e("div",{staticClass:"mb-2 flex items-center justify-between shrink-0"},[e("div",{staticClass:"flex items-center gap-2"},[e("span",{staticClass:"flex h-6 w-6 items-center justify-center rounded-full text-xs font-semibold text-white",style:{backgroundColor:r.color||"#6B7280"}},[t._v("\n                  "+t._s(r.icon)+"\n                ")]),t._v(" "),e("h3",{staticClass:"text-sm font-semibold text-gray-800 dark:text-gray-100"},[t._v("\n                  "+t._s(r.label)+"\n                ")])]),t._v(" "),e("span",{staticClass:"rounded-full bg-gray-200 px-2 py-0.5 text-xs font-medium text-gray-700 dark:bg-gray-700 dark:text-gray-200"},[t._v("\n                "+t._s(r.orders.length)+"\n              ")])]),t._v(" "),e("div",{staticClass:"mt-1 flex-1 overflow-y-auto pr-1 space-y-3"},[e("transition-group",{staticClass:"flex flex-col gap-3",attrs:{name:"fade-list",tag:"div"}},t._l(r.orders,function(n){return e("OrderCard",{key:n.id,attrs:{order:n,"factory-id":t.currentFactoryId,"current-user-id":t.currentUserId},on:{"drag-start":function(e){return t.onDragStart(n,r)},"view-details":t.toggleDetails,edit:t.updateOrder}})}),1),t._v(" "),r.orders.length?t._e():e("div",{staticClass:"mt-2 flex items-center justify-center rounded-xl border border-dashed border-gray-300 bg-white/60 p-3 text-center text-xs text-gray-400 dark:border-gray-600 dark:bg-gray-900/40 dark:text-gray-500"},[t._v("\n                Քաշեք պատվերներ այստեղ\n              ")])],1)])}),0)]):e("div",{staticClass:"mt-10 flex items-center justify-center rounded-2xl bg-white p-8 text-center text-sm text-gray-500 shadow-sm dark:bg-gray-800 dark:text-gray-300"},[t._v("\n        Պատվերներ չկան։\n      ")]),t._v(" "),e("div",{staticClass:"mt-8 flex justify-center"},[t.paginationMeta.total>t.perPage?e("Pagination",{attrs:{pagination:t.paginationMeta,meta:""},on:{"page-changed":t.handlePageChange}}):t._e()],1)],1)]:t._e(),t._v(" "),e("OrderActionModal",{attrs:{"is-open":t.isModal,"action-options":t.actionOptions,"cancel-reasons":t.cancelReasons,"today-formatted":t.todayFormatted,"tomorrow-date":t.tomorrowDate},on:{close:t.closeModal,confirm:t.handleModalConfirm}}),t._v(" "),t.isOpenDetails?[e("div",{staticClass:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},[e("div",{staticClass:"relative w-full max-w-4xl rounded-lg bg-white p-6 shadow-xl dark:bg-gray-800"},[e("button",{staticClass:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",on:{click:function(e){t.isOpenDetails=!1}}},[e("svg",{staticClass:"h-6 w-6",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])]),t._v(" "),e("LaserOrderDetailsPanel",{attrs:{details:t.details,"dxf-url":t.dxfUrl},on:{"view-file":t.viewFile,"download-file":t.downloadFile,"close-dxf":function(e){t.dxfUrl=""}}})],1)])]:t._e(),t._v(" "),e("notifications")],2)},[],!1,null,"3c8fe5a8",null);e.default=component.exports}}]);