(window.webpackJsonp=window.webpackJsonp||[]).push([[45,11,17,20,21,26],{409:function(e,t,r){"use strict";r.r(t);r(253);var n={name:"InputWithLabels",props:{id:{type:String,default:""},label:{type:String,default:""},type:{type:String,default:"text"},value:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},classes:{type:String,default:""},plaseholder:{type:String,default:""}}},l=r(8),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative"},[t("span",{staticClass:"absolute start-0 bottom-3 text-gray-500 dark:text-gray-400"},[e._t("label_svg")],2),e._v(" "),t("input",{staticClass:"block py-2.5 ps-8 pe-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",class:e.classes,attrs:{id:e.id,type:e.type,disabled:e.disabled,plaseholder:e.plaseholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),t("label",{staticClass:"absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform scale-75 top-3 left-6 origin-[0] peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-focus:scale-75 peer-focus:-translate-y-6",attrs:{for:e.id}},[e._v("\n    "+e._s(e.label)+"\n  ")]),e._v(" "),t("span",{staticClass:"absolute end-2 bottom-4 text-gray-500 dark:text-gray-400"},[e._t("label_back")],2)])},[],!1,null,null,null);t.default=component.exports},412:function(e,t,r){"use strict";r.r(t);r(25),r(49),r(18),r(10),r(253);var n={props:{displayField:{type:String,default:"name"},label:{type:String,default:""},value:{type:[Number,Object,String],default:null},name:{type:String,default:""},dataValue:{type:[Array,Object],default:function(){return[]}}},data:function(){return{selectValue:this.value}},watch:{selectValue:function(e){this.$emit("input",e)}}},l=r(8),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",[e.label?t("label",{staticClass:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",attrs:{for:e.name}},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),e._v(" "),t("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.selectValue,expression:"selectValue"}],staticClass:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",attrs:{id:e.name,name:e.name},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectValue=t.target.multiple?r:r[0]}}},"select",e.$attrs,!1),e._l(e.dataValue,function(data,r){return t("option",{key:r,staticClass:"first-letter:lowercase",domProps:{value:data}},[e._v("\n      "+e._s("value"===e.displayField?data.value:data.name)+"\n    ")])}),0),e._v(" "),e.dataValue&&0!==e.dataValue.length?e._e():t("p",{staticClass:"mt-2 text-sm text-red-500"},[e._v("\n    Տվյալներ չկան։\n  ")])])},[],!1,null,null,null);t.default=component.exports},414:function(e,t,r){"use strict";r.r(t);r(253);var n={props:{label:{type:String,default:""},value:{type:String,default:""},for_LAbel:{type:String,default:""},textarea_id:{type:String,default:""},rows:{type:Number,default:4},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1}}},l=r(8),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",[t("label",{staticClass:"text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1",attrs:{for:e.for_LAbel}},[e._v(e._s(e.label))]),e._v(" "),t("textarea",{staticClass:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",attrs:{id:e.textarea_id,rows:e.rows,placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])},[],!1,null,"2bf44f05",null);t.default=component.exports},432:function(e,t,r){var content=r(449);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(27).default)("43d63d3c",content,!0,{sourceMap:!1})},437:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(128);var l=r(172),o=r(100);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||Object(l.a)(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},438:function(e,t,r){"use strict";r.r(t);var n={name:"CreateOrderForm",props:{isEditingMode:{type:Boolean,default:!1},successButton:{type:String,default:"Հաստատել"},cancelButton:{type:String,default:"Չեղարկել"},openFilesButton:{type:String,default:"Ընտրել ֆայլերը"},editButton:{type:String,default:"Խմբագրել"}}},l=r(8),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col items-center w-full p-6 bg-white rounded-xl shadow-lg"},[t("h2",{staticClass:"text-center text-neutral-700 font-sans italic text-xl my-6 font-bold"},[e._v("\n    "+e._s(e.isEditingMode?"Ստեղծել նոր պատվեր խմբագրելով":"Պատվերի մանրամասները")+"\n  ")]),e._v(" "),t("div",{staticClass:"w-full grid grid-cols-1 sm:grid-cols-2 gap-12 items-center"},[t("div",{staticClass:"flex flex-col"},[e._t("pmpGroup")],2),e._v(" "),t("div",{staticClass:"flex flex-col"},[e._t("pmpName")],2)]),e._v(" "),t("div",{staticClass:"w-full grid grid-cols-1 sm:grid-cols-2 gap-12 items-center my-3"},[t("div",{staticClass:"flex flex-col w-full"},[e._t("finishDate")],2),e._v(" "),e.isEditingMode?t("div",{staticClass:"flex flex-col w-full"},[e._t("quantity")],2):e._e()]),e._v(" "),t("div",{staticClass:"flex flex-col w-full"},[e._t("description")],2),e._v(" "),t("div",{staticClass:"flex flex-row w-full gap-6 justify-end"},[t("button",{staticClass:"mt-8 py-3 px-10 bg-blue-500 rounded-full text-white font-semibold hover:bg-blue-600 transition-transform transform hover:scale-105",on:{click:function(t){return e.$emit("openFiles")}}},[e._v("\n      "+e._s(e.isEditingMode?e.openFilesButton:e.editButton)+"\n    ")]),e._v(" "),t("button",{staticClass:"mt-8 py-3 px-10 bg-red-500 rounded-full text-white font-semibold hover:bg-red-600 transition-transform transform hover:scale-105",on:{click:function(t){return e.$emit("cancelButton")}}},[e._v("\n      "+e._s(e.cancelButton)+"\n    ")]),e._v(" "),e.isEditingMode?e._e():t("button",{staticClass:"mt-8 py-3 px-10 bg-green-500 rounded-full text-white font-semibold hover:bg-green-600 transition-transform transform hover:scale-105",on:{click:function(t){return e.$emit("addButton")}}},[e._v("\n      "+e._s(e.successButton)+"\n    ")])])])},[],!1,null,null,null);t.default=component.exports},448:function(e,t,r){"use strict";r(432)},449:function(e,t,r){var n=r(26)(function(i){return i[1]});n.push([e.i,".transition-colors[data-v-4817113e]{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.sticky[data-v-4817113e]{position:sticky;z-index:10}.line-through[data-v-4817113e]{-webkit-text-decoration:line-through;text-decoration:line-through}",""]),n.locals={},e.exports=n},482:function(e,t,r){var content=r(539);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(27).default)("1a39bac3",content,!0,{sourceMap:!1})},498:function(e,t,r){"use strict";r.r(t);r(80),r(18),r(97);var n=r(437),l=r(20);r(29),r(54),r(43),r(25),r(256),r(423),r(49),r(424),r(253),r(39),r(47),r(48),r(10),r(465),r(30),r(466),r(467),r(468),r(469),r(470),r(471),r(472),r(473),r(474),r(475),r(476),r(477),r(478),r(479),r(480),r(481),r(38),r(35);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){Object(l.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d={name:"ShowFiles",props:{pmps:{type:Object,default:function(){return{exists:!1}}},factories:{type:Array,default:function(){return[]}},autoOpenFactoryId:{type:[String,Number],default:null},selectedFiles:{type:Array,default:function(){return[]}},fileQuantities:{type:Object,default:function(){return{}}},isEditingMode:{type:Boolean,default:!1}},data:function(){return{selectedFactory:null}},computed:{factoriesWithCount:function(){var e=this;return this.factories.map(function(t){var r=e.pmps.exists?e.pmps.pmp.files.filter(function(e){return e.path.includes("/".concat(t.value,"/"))}).length:0;return c(c({},t),{},{fileCount:r})})},allSelected:function(){var e=this;if(!this.pmps.exists||!this.selectedFactory)return!1;var t=this.pmps.pmp.remote_number.flatMap(function(t){return e.getFactoryFiles(t.id)});return t.length>0&&this.selectedFiles.length===t.length},areQuantitiesValid:function(){var e=this;return this.selectedFiles.every(function(t){return e.isQuantityValid(t)})}},mounted:function(){var e=this;if(this.autoOpenFactoryId){var t=this.factoriesWithCount.find(function(t){return t.id===e.autoOpenFactoryId});t&&t.fileCount>0&&this.selectFactory(t)}else{var r=this.factoriesWithCount.find(function(e){return e.fileCount>0});r&&this.selectFactory(r)}},methods:{selectFactory:function(e){this.selectedFactory=e},getFactoryFiles:function(e){var t=this;return this.pmps.exists?this.pmps.pmp.files.filter(function(r){var n=r.path.includes("/".concat(t.selectedFactory.value,"/"));return r.remote_number_id===e&&n}):[]},toggleFileSelection:function(e){var t=Object(n.a)(this.selectedFiles),r=c({},this.fileQuantities);t.includes(e)?(t=t.filter(function(t){return t!==e}),delete r[e]):(t.push(e),r[e]=1),this.$emit("update:selectedFiles",t),this.$emit("update:fileQuantities",r)},updateQuantity:function(e,t){var r=c(c({},this.fileQuantities),{},Object(l.a)({},e,Number(t)));this.$emit("update:fileQuantities",r)},toggleSelectAll:function(){var e=this,t=Object(n.a)(this.selectedFiles),r=c({},this.fileQuantities);if(this.allSelected){var l=this.pmps.pmp.remote_number.flatMap(function(t){return e.getFactoryFiles(t.id).map(function(e){return e.id})});t=t.filter(function(e){return!l.includes(e)}),l.forEach(function(e){delete r[e]})}else{var o=this.pmps.pmp.remote_number.flatMap(function(t){return e.getFactoryFiles(t.id)}).map(function(e){return e.id});t=Object(n.a)(new Set([].concat(Object(n.a)(t),Object(n.a)(o)))),o.forEach(function(e){r[e]||(r[e]=1)})}this.$emit("update:selectedFiles",t),this.$emit("update:fileQuantities",r)},isQuantityValid:function(e){var t=this.fileQuantities[e];return void 0!==t&&t>0},submitSelectedFiles:function(){var e=this;if(this.areQuantitiesValid){var t=this.pmps.pmp.files.filter(function(t){return e.selectedFiles.includes(t.id)}).map(function(t){return c(c({},t),{},{quantity:e.fileQuantities[t.id]})});this.$emit("files-selected",t);var r={};this.pmps.pmp.files.forEach(function(t){e.selectedFiles.includes(t.id)&&(r[t.factory_id]||(r[t.factory_id]=[]),r[t.factory_id].push({id:t.id,quantity:e.fileQuantities[t.id]}))}),Object.keys(r).forEach(function(t){var data={user_id:e.$parent.selectedClient.id,creator_id:e.$auth.user.id,name:"".concat(e.$parent.selectedPmp.group,".").concat(e.$parent.selectedPmpRemoteNumber),description:e.$parent.description,status:"pending",finish_date:e.$parent.finishDate,remote_number_id:e.$parent.remote_number_id,pmp_id:e.$parent.selectedPmp.id,link_existing_files:e.$parent.link_existing_files,factory_id:t,selected_files:r[t]};e.$emit("factory-files-selected",data)}),this.$emit("back")}else this.$notify({text:"Խնդրում ենք մուտքագրել վավեր քանակ բոլոր ընտրված ֆայլերի համար (քանակը պետք է լինի > 0):",duration:3e3,speed:1e3,position:"top",type:"error"})}}},f=(r(448),r(8)),component=Object(f.a)(d,function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-4 bg-white rounded-lg shadow-md"},[e.selectedFactory?t("div",[t("button",{staticClass:"mb-4 flex items-center text-blue-600 hover:text-blue-800",on:{click:function(t){e.selectedFactory=null}}},[t("svg",{staticClass:"h-5 w-5 mr-1",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"}})]),e._v("\n      Վերադառնալ արտադրամասերի ցանկին\n    ")]),e._v(" "),e.pmps.exists?t("div",{staticClass:"space-y-6"},[t("div",{staticClass:"p-4 bg-gray-50 rounded-md"},[t("h2",{staticClass:"text-2xl font-bold text-gray-800"},[e._v("\n          Խումբ: "+e._s(e.pmps.pmp.group)+" - "+e._s(e.pmps.pmp.group_name)+"\n        ")]),e._v(" "),t("div",{staticClass:"mt-2 flex items-center justify-between"},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"bg-green-100 px-3 py-1 rounded-full text-green-800 flex items-center"},[t("svg",{staticClass:"h-4 w-4 mr-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}})]),e._v(" "),t("span",{staticClass:"text-sm font-medium"},[e._v(e._s(e.selectedFactory.name))])])]),e._v(" "),t("button",{staticClass:"text-sm text-blue-600 hover:text-blue-800",on:{click:e.toggleSelectAll}},[e._v("\n            "+e._s(e.allSelected?"Չեղարկել բոլորը":"Ընտրել բոլորը")+"\n          ")])])]),e._v(" "),e._l(e.pmps.pmp.remote_number,function(r){return t("div",{key:r.id,staticClass:"pl-4 border-l-4 border-blue-200"},[t("h3",{staticClass:"text-xl font-semibold text-gray-700"},[e._v("\n          Հեռակա համար: "+e._s(r.remote_number)+" -\n          "+e._s(r.remote_number_name)+"\n        ")]),e._v(" "),t("div",{staticClass:"mt-4 space-y-3"},[e._l(e.getFactoryFiles(r.id),function(r){return t("div",{key:r.id,staticClass:"p-3 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",class:{"bg-blue-50 border border-blue-200":e.selectedFiles.includes(r.id)}},[t("div",{staticClass:"flex items-start"},[t("input",{staticClass:"mt-1 h-4 w-4 text-blue-600 rounded focus:ring-blue-500",attrs:{id:"file_"+r.id,type:"checkbox"},domProps:{checked:e.selectedFiles.includes(r.id)},on:{change:function(t){return e.toggleFileSelection(r.id)}}}),e._v(" "),t("div",{staticClass:"ml-3 flex-1"},[t("label",{staticClass:"cursor-pointer",attrs:{for:"file_"+r.id}},[t("p",{staticClass:"font-medium text-blue-600 flex items-center"},[t("svg",{staticClass:"h-5 w-5 mr-2 text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})]),e._v("\n                    "+e._s(r.original_name)+"\n                  ")]),e._v(" "),t("p",{staticClass:"text-sm text-gray-600 ml-7 mt-1"},[e._v("\n                    "+e._s(r.path)+"\n                  ")])]),e._v(" "),e.selectedFiles.includes(r.id)?t("div",{staticClass:"mt-2 ml-7"},[t("label",{staticClass:"text-sm text-gray-600",attrs:{for:"quantity_"+r.id}},[e._v("\n                    Քանակ *\n                  ")]),e._v(" "),t("input",{staticClass:"w-24 p-1 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",class:{"border-red-500":!e.isQuantityValid(r.id)},attrs:{id:"quantity_"+r.id,type:"number",min:"1",required:"",placeholder:"1"},domProps:{value:e.fileQuantities[r.id]},on:{input:function(t){return e.updateQuantity(r.id,t.target.value)}}}),e._v(" "),e.isQuantityValid(r.id)?e._e():t("p",{staticClass:"text-red-500 text-xs mt-1"},[e._v("\n                    Քանակը պետք է լինի 1 կամ ավելի\n                  ")]),e._v(" "),e.isEditingMode&&r.quantity?t("p",{staticClass:"text-sm text-gray-600 mt-1"},[t("span",{staticClass:"line-through"},[e._v(e._s(r.quantity))]),e._v("\n                    → "+e._s(e.fileQuantities[r.id]||1)+"\n                  ")]):e._e()]):e._e()]),e._v(" "),t("div",{staticClass:"text-right"},[r.quantity?t("span",{staticClass:"block text-green-700"},[e._v("\n                  Քանակ: "+e._s(r.quantity)+"\n                ")]):e._e(),e._v(" "),r.material_type?t("span",{staticClass:"block text-purple-700"},[e._v("\n                  Նյութ: "+e._s(r.material_type)+"\n                ")]):e._e(),e._v(" "),r.thickness?t("span",{staticClass:"block text-orange-700"},[e._v("\n                  Հաստություն: "+e._s(r.thickness)+"\n                ")]):e._e()])])])}),e._v(" "),0===e.getFactoryFiles(r.id).length?t("div",{staticClass:"p-3 text-center text-gray-500"},[e._v("\n            Ֆայլեր չեն գտնվել այս հեռակա համարի համար\n          ")]):e._e()],2)])})],2):t("div",{staticClass:"p-4 text-center text-gray-500"},[e._v("\n      Տվյալներ չեն գտնվել\n    ")]),e._v(" "),e.selectedFiles.length>0?t("div",{staticClass:"mt-6 sticky bottom-4 flex gap-4"},[t("button",{staticClass:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md transition-colors",attrs:{disabled:!e.areQuantitiesValid},on:{click:e.submitSelectedFiles}},[e._v("\n        Հաստատել ընտրությունը ("+e._s(e.selectedFiles.length)+")\n      ")]),e._v(" "),t("button",{staticClass:"flex-1 py-3 bg-gray-500 hover:bg-gray-600 text-white font-medium rounded-lg shadow-md transition-colors",on:{click:function(t){e.selectedFactory=null}}},[e._v("\n        Ընտրել այլ գործարանից\n      ")])]):e._e()]):t("div",{staticClass:"space-y-4"},[t("h2",{staticClass:"text-xl font-bold text-gray-800 mb-4"},[e._v("Ընտրեք արտադրամաս")]),e._v(" "),t("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},e._l(e.factoriesWithCount,function(r){return t("div",{key:r.id,staticClass:"p-4 border rounded-lg cursor-pointer transition-colors flex items-center justify-between",class:{"hover:border-blue-300":r.fileCount>0,"border-green-200 bg-green-50 hover:bg-green-100":r.fileCount>0,"border-gray-100 bg-gray-50 hover:bg-gray-100":0===r.fileCount,"opacity-60":0===r.fileCount},on:{click:function(t){r.fileCount>0&&e.selectFactory(r)}}},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"p-2 rounded-full mr-3",class:{"bg-green-100 text-green-600":r.fileCount>0,"bg-gray-100 text-gray-400":0===r.fileCount}},[t("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}})])]),e._v(" "),t("div",[t("h3",{staticClass:"font-semibold text-lg"},[e._v(e._s(r.name))]),e._v(" "),t("p",{staticClass:"text-gray-600 text-sm"},[e._v(e._s(r.value))])])]),e._v(" "),t("span",{staticClass:"px-2 py-1 rounded-full text-sm font-medium",class:{"bg-green-100 text-green-800":r.fileCount>0,"bg-gray-100 text-gray-400":0===r.fileCount}},[e._v("\n          "+e._s(r.fileCount)+" ֆայլ\n        ")])])}),0)])])},[],!1,null,"4817113e",null);t.default=component.exports},538:function(e,t,r){"use strict";r(482)},539:function(e,t,r){var n=r(26)(function(i){return i[1]});n.push([e.i,".container[data-v-5e6b69a5]{padding:1rem}",""]),n.locals={},e.exports=n},584:function(e,t,r){"use strict";r.r(t);r(29),r(54),r(18),r(47),r(48),r(39),r(38);var n=r(0),l=r(20),o=(r(11),r(43),r(25),r(256),r(80),r(49),r(10),r(97),r(40)),c=r(409),d=r(412),f=r(438),m=r(498),h=r(414);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){Object(l.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _={components:{InputWithLabels:c.default,SelectWithLabel:d.default,CreateOrderForm:f.default,ShowFiles:m.default,TextareaWithLabel:h.default},layout:"EngineerLayout",middleware:["engineer","roleRedirect"],data:function(){return{isSelectedClient:!1,isSelectPmpGroup:!1,isSelectPmpName:!1,selectedClient:null,pmpGroupSearch:"",pmpNameSearch:"",selectedPmp:null,selectedPmpRemoteNumber:null,quantity:null,description:"",finishDate:"",formSubmitted:!1,isFiles:!1,selectedFiles:[],fileQuantities:{},autoOpenFactoryId:null,isLoading:!1,files_existing:!1}},computed:y(y(y(y({},Object(o.c)("factory",["getFactory"])),Object(o.c)("users",["getUsers"])),Object(o.c)("pmp",["getPmpes","getPmp"])),{},{users:function(){return this.getUsers},filteredPmpGroups:function(){var e,t;if(!this.pmpGroupSearch)return(null===(e=this.getPmpes)||void 0===e?void 0:e.pmp)||[];var r=this.pmpGroupSearch.toLowerCase();return null===(t=this.getPmpes)||void 0===t?void 0:t.pmp.filter(function(e){return e.group.toLowerCase().includes(r)||e.group_name.toLowerCase().includes(r)})},filteredPmpNames:function(){if(!this.selectedPmp)return[];var e=this.selectedPmp.remote_number||[];if(!this.pmpNameSearch)return e;var t=this.pmpNameSearch.toLowerCase();return e.filter(function(e){return e.remote_number.toLowerCase().includes(t)})},isEditingMode:function(){return this.$route.path.includes("/editing")}}),watch:{selectedPmp:function(e){e||(this.selectedPmpRemoteNumber=null,this.pmpNameSearch="")}},mounted:function(){this.fetchUsers(),this.fetchFactory(),this.fetchPmps()},methods:y(y(y(y(y({},Object(o.b)("factory",["fetchFactory"])),Object(o.b)("users",["fetchUsers"])),Object(o.b)("engineer",["createNewOrder"])),Object(o.b)("pmp",["fetchPmps","checkPmpByRemoteNumber","checkIfGroupExists"])),{},{selectPmpGroup:function(e){this.remote_number_id=e.id,this.selectedPmp=e,this.pmpGroupSearch=e.group,this.isSelectPmpGroup=!1},selectPmpRemoteNumber:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.selectedPmpRemoteNumber=e.remote_number,t.pmpNameSearch=e.remote_number,t.isSelectPmpName=!1,t.remote_number_id=e.id,r.next=1,t.checkPmpByRemoteNumber(e.id);case 1:case"end":return r.stop()}},r)}))()},filterPmpGroups:function(){this.isSelectPmpGroup=!0},filterPmpNames:function(){this.isSelectPmpName=!0},openFiles:function(e){if(this.formSubmitted=!0,this.files_existing=e,this.selectedClient&&this.selectedPmp&&this.selectedPmpRemoteNumber&&this.finishDate&&this.description&&(!this.isEditingMode||this.quantity&&!(this.quantity<=0))){var t=this.getFactory.find(function(e){return e.files&&e.files.length>0});this.autoOpenFactoryId=t?t.id:null,this.isFiles=!0}else this.$notify({text:"Խնդրում ենք լրացնել բոլոր պարտադիր դաշտերը։",duration:3e3,speed:1e3,position:"top",type:"error"})},handleFilesSelected:function(e){this.selectedFiles=e.map(function(e){return e.id}),this.fileQuantities=e.reduce(function(e,t){return e[t.id]=t.quantity,e},{}),this.isFiles=!1,this.pmpFiles()},pmpFiles:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark(function t(){var data,r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=1;break}return t.abrupt("return");case 1:if(e.isLoading=!0,e.formSubmitted=!0,e.selectedClient&&e.selectedPmp&&e.selectedPmpRemoteNumber&&e.finishDate&&e.description&&(!e.isEditingMode||e.quantity&&!(e.quantity<=0)&&e.selectedFiles&&0!==e.selectedFiles.length)){t.next=2;break}return e.$notify({text:"Խնդրում ենք լրացնել բոլոր պարտադիր դաշտերը".concat(e.isEditingMode?" և ընտրել ֆայլեր":"","։"),duration:3e3,speed:1e3,position:"top",type:"error"}),e.isLoading=!1,t.abrupt("return");case 2:if(!(e.selectedFiles.filter(function(t){return!e.fileQuantities[t]||e.fileQuantities[t]<=0}).length>0)){t.next=3;break}return e.$notify({text:"Խնդրում ենք սահմանել վավեր քանակ (1 կամ ավելի) բոլոր ընտրված ֆայլերի համար։",duration:3e3,speed:1e3,position:"top",type:"error"}),e.isLoading=!1,t.abrupt("return");case 3:return data={user_id:e.selectedClient.id,creator_id:e.$auth.user.id,name:"".concat(e.selectedPmp.group,".").concat(e.selectedPmpRemoteNumber),description:e.description,quantity:e.quantity,status:"pending",finish_date:e.finishDate,remote_number_id:e.remote_number_id,pmp_id:e.selectedPmp.id,link_existing_files:e.files_existing,selected_files:e.selectedFiles.map(function(t){return{id:t,quantity:e.fileQuantities[t]}})},t.prev=4,t.next=5,e.createNewOrder(data);case 5:e.$notify({text:"Պատվերը հաջողությամբ ստեղծվեց".concat(e.selectedFiles.length>0?" ".concat(e.selectedFiles.length," ֆայլով"):"","։"),duration:3e3,speed:1e3,position:"top",type:"success"}),e.resetForm(),e.selectedFiles=[],e.fileQuantities={},e.$router.push("/engineer/orders"),t.next=7;break;case 6:t.prev=6,n=t.catch(4),e.$notify({text:"Սխալ՝ ".concat((null===(r=n.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||n.message),duration:3e3,speed:1e3,position:"top",type:"error"});case 7:return t.prev=7,e.isLoading=!1,t.finish(7);case 8:case"end":return t.stop()}},t,null,[[4,6,7,8]])}))()},cancelBack:function(){this.$router.push("/engineer")},resetForm:function(){this.selectedClient=null,this.selectedPmp=null,this.selectedPmpRemoteNumber=null,this.pmpGroupSearch="",this.pmpNameSearch="",this.description="",this.finishDate="",this.quantity=null,this.formSubmitted=!1,this.isFiles=!1,this.autoOpenFactoryId=null}})},x=(r(538),r(8)),component=Object(x.a)(_,function(){var e,t,r,n,l=this,o=l._self._c;return o("div",{staticClass:"container flex flex-col"},[o("h1",{staticClass:"text-3xl font-sans italic leading-6 my-6 text-start mx-4"},[l._v("\n    "+l._s(l.isEditingMode?"Ստեղծել նոր պատվեր խմբագրելով":"Ստեղծել նոր պատվեր")+"\n  ")]),l._v(" "),l.isFiles?o("div",[o("show-files",{attrs:{pmps:l.getPmp,factories:l.getFactory,"auto-open-factory-id":l.autoOpenFactoryId,"selected-files":l.selectedFiles,"file-quantities":l.fileQuantities},on:{"update:selectedFiles":function(e){l.selectedFiles=e},"update:selected-files":function(e){l.selectedFiles=e},"update:fileQuantities":function(e){l.fileQuantities=e},"update:file-quantities":function(e){l.fileQuantities=e},"files-selected":l.handleFilesSelected,back:function(e){l.isFiles=!1}}})],1):o("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full mt-12"},[o("div",{staticClass:"w-full h-full ml-auto mr-4 p-6 bg-white rounded-xl shadow-lg"},[o("select-with-label",{class:{"border-red-600":l.formSubmitted&&!l.selectedClient},attrs:{"data-value":l.users,label:"Ընտրել հաճախորդ"},model:{value:l.selectedClient,callback:function(e){l.selectedClient=e},expression:"selectedClient"}}),l._v(" "),o("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-8 my-12"},[o("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"name",value:null===(e=l.selectedClient)||void 0===e?void 0:e.name,label:"Անուն",type:"text",disabled:!0}}),l._v(" "),o("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"phone",value:null===(t=l.selectedClient)||void 0===t||null===(t=t.client)||void 0===t?void 0:t.phone,label:"Հեռախոսահամար",type:"text",disabled:!0}}),l._v(" "),o("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"email",value:null===(r=l.selectedClient)||void 0===r?void 0:r.email,label:"Էլ․ փոստ",type:"text",disabled:!0}}),l._v(" "),o("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"address",value:null===(n=l.selectedClient)||void 0===n||null===(n=n.client)||void 0===n?void 0:n.address,label:"Հասցե",type:"text",disabled:!0}})],1)],1),l._v(" "),o("div",{staticClass:"w-full"},[o("create-order-form",{attrs:{"is-editing-mode":l.isEditingMode,"open-files-button":"Ընտրել ֆայլերը","success-button":"Հաստատել","cancel-button":"Չեղարկել","edit-button":"Խմբագրել"},on:{openFiles:function(e){return l.openFiles(!0)},addButton:l.pmpFiles,cancelButton:l.cancelBack},scopedSlots:l._u([{key:"pmpGroup",fn:function(){return[o("div",{staticClass:"relative shadow-md rounded-lg p-3 pt-5"},[o("label",{staticClass:"block text-sm font-medium text-gray-600 mb-1",attrs:{for:"pmpGroup"}},[l._v("\n              Ծածկագիր\n            ")]),l._v(" "),o("div",{staticClass:"relative"},[o("input",{directives:[{name:"model",rawName:"v-model",value:l.pmpGroupSearch,expression:"pmpGroupSearch"}],staticClass:"w-full pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",attrs:{id:"pmpGroup",type:"text",placeholder:"Փնտրել ծածկագիր"},domProps:{value:l.pmpGroupSearch},on:{focus:function(e){l.isSelectPmpGroup=!0},input:[function(e){e.target.composing||(l.pmpGroupSearch=e.target.value)},l.filterPmpGroups]}}),l._v(" "),o("button",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",on:{click:function(e){l.isSelectPmpGroup=!l.isSelectPmpGroup}}},[o("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),l._v(" "),l.isSelectPmpGroup?o("div",{staticClass:"absolute z-10 mt-1 w-full bg-white rounded-md shadow-lg border border-gray-200 max-h-60 overflow-auto"},[o("ul",{staticClass:"py-1"},l._l(l.filteredPmpGroups,function(e){return o("li",{key:e.id,staticClass:"px-4 py-2 hover:bg-blue-50 cursor-pointer text-gray-700",class:{"border-red-600":l.formSubmitted&&!l.selectedPmp},on:{click:function(t){return l.selectPmpGroup(e)}}},[l._v("\n                  "+l._s(e.group)+" : "+l._s(e.group_name)+"\n                ")])}),0)]):l._e()])]},proxy:!0},{key:"pmpName",fn:function(){return[o("div",{staticClass:"relative shadow-md rounded-lg p-3 pt-5"},[o("label",{staticClass:"block text-sm font-medium text-gray-600 mb-1",attrs:{for:"pmpRemoteNumberName"}},[l._v("\n              Ընտրել Անունը\n            ")]),l._v(" "),o("div",{staticClass:"relative"},[o("input",{directives:[{name:"model",rawName:"v-model",value:l.pmpNameSearch,expression:"pmpNameSearch"}],staticClass:"w-full pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",attrs:{id:"pmpRemoteNumberName",type:"text",placeholder:"Փնտրել անուն",disabled:!l.selectedPmp},domProps:{value:l.pmpNameSearch},on:{focus:function(e){l.isSelectPmpName=!!l.selectedPmp},input:[function(e){e.target.composing||(l.pmpNameSearch=e.target.value)},l.filterPmpNames]}}),l._v(" "),o("button",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",attrs:{disabled:!l.selectedPmp},on:{click:function(e){l.isSelectPmpName=!l.isSelectPmpName}}},[o("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),l._v(" "),l.isSelectPmpName&&l.selectedPmp?o("div",{staticClass:"absolute z-10 mt-1 w-full bg-white rounded-md shadow-lg border border-gray-200 max-h-60 overflow-auto"},[o("ul",{staticClass:"py-1"},l._l(l.filteredPmpNames,function(e,t){return o("li",{key:t,staticClass:"px-4 py-2 hover:bg-blue-50 cursor-pointer text-gray-700",class:{"border-red-600":l.formSubmitted&&!l.selectedPmpRemoteNumber},on:{click:function(t){return l.selectPmpRemoteNumber(e)}}},[l._v("\n                  "+l._s(e.remote_number)+"\n                  "+l._s(e.remote_number_name)+"\n                ")])}),0)]):l._e()])]},proxy:!0},{key:"finishDate",fn:function(){return[o("input-with-labels",{staticClass:"shadow-md rounded-lg p-3 pt-5",class:{"border-red-600":l.formSubmitted&&!l.finishDate},attrs:{id:"finishDate",label:"Անհաժեշտ ավարտի ամսաթիվ",type:"datetime-local"},model:{value:l.finishDate,callback:function(e){l.finishDate=e},expression:"finishDate"}})]},proxy:!0},{key:"description",fn:function(){return[o("textarea-with-label",{staticClass:"shadow-md rounded-lg p-3 pt-5",class:{"border-red-600":l.formSubmitted&&!l.description},attrs:{id:"description",label:"Նկարագրություն",type:"text"},model:{value:l.description,callback:function(e){l.description=e},expression:"description"}})]},proxy:!0}],null,!1,2973702597)})],1)]),l._v(" "),o("notifications")],1)},[],!1,null,"5e6b69a5",null);t.default=component.exports}}]);