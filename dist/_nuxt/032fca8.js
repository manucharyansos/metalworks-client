(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{414:function(t,e,r){var content=r(426);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(35).default)("83321030",content,!0,{sourceMap:!1})},416:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(126);var l=r(166),o=r(100);function c(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||Object(l.a)(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},425:function(t,e,r){"use strict";r(414)},426:function(t,e,r){var n=r(34)((function(i){return i[1]}));n.push([t.i,".transition-colors[data-v-52d91962]{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.sticky[data-v-52d91962]{position:sticky;z-index:10}",""]),n.locals={},t.exports=n},469:function(t,e,r){"use strict";r.r(e);r(80),r(20),r(97);var n=r(416),l=r(36);r(39),r(51),r(45),r(33),r(409),r(52),r(410),r(50),r(77),r(78),r(12),r(440),r(25),r(441),r(442),r(443),r(444),r(445),r(446),r(447),r(448),r(449),r(450),r(451),r(452),r(453),r(454),r(455),r(456),r(44),r(30);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d={name:"ShowFiles",props:{pmps:{type:Object,default:function(){return{exists:!1}}},factories:{type:Array,default:function(){return[]}}},data:function(){return{selectedFactory:null,selectedFiles:[]}},computed:{factoriesWithCount:function(){var t=this;return this.factories.map((function(e){var r=t.pmps.exists?t.pmps.pmp.files.filter((function(t){return t.path.includes("/".concat(e.value,"/"))})).length:0;return c(c({},e),{},{fileCount:r})}))},allSelected:function(){var t=this;if(!this.pmps.exists||!this.selectedFactory)return!1;var e=this.pmps.pmp.remote_number.flatMap((function(e){return t.getFactoryFiles(e.id)}));return e.length>0&&this.selectedFiles.length===e.length}},methods:{selectFactory:function(t){this.selectedFactory=t,this.selectedFiles=[]},getFactoryFiles:function(t){var e=this;return this.pmps.exists?this.pmps.pmp.files.filter((function(r){var n=r.path.includes("/".concat(e.selectedFactory.value,"/"));return r.remote_number_id===t&&n})):[]},toggleFileSelection:function(t){this.selectedFiles.includes(t)?this.selectedFiles=this.selectedFiles.filter((function(e){return e!==t})):this.selectedFiles.push(t)},toggleSelectAll:function(){var t=this;if(this.allSelected)this.selectedFiles=[];else{var e=this.pmps.pmp.remote_number.flatMap((function(e){return t.getFactoryFiles(e.id).map((function(t){return t.id}))}));this.selectedFiles=Object(n.a)(new Set(e))}},submitSelectedFiles:function(){var t=this,e={};this.pmps.pmp.files.forEach((function(r){t.selectedFiles.includes(r.id)&&(e[r.factory_id]||(e[r.factory_id]=[]),e[r.factory_id].push(r.id))})),Object.keys(e).forEach((function(r){var data={user_id:t.$parent.selectedClient.id,creator_id:t.$auth.user.id,name:"".concat(t.$parent.selectedPmp.group,".").concat(t.$parent.selectedPmpRemoteNumber),description:t.$parent.description,quantity:t.$parent.quantity,status:"pending",finish_date:t.$parent.finishDate,remote_number_id:t.$parent.remote_number_id,pmp_id:t.$parent.selectedPmp.id,link_existing_files:!0,factory_id:r,selected_files:e[r]};t.$emit("factory-files-selected",data)})),this.$emit("back")},goBack:function(){this.$emit("back")}}},m=(r(425),r(15)),component=Object(m.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-4 bg-white rounded-lg shadow-md"},[t.selectedFactory?e("div",[e("button",{staticClass:"mb-4 flex items-center text-blue-600 hover:text-blue-800",on:{click:function(e){t.selectedFactory=null}}},[e("svg",{staticClass:"h-5 w-5 mr-1",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"}})]),t._v("\n      Վերադառնալ արտադրամասերի ցանկին\n    ")]),t._v(" "),t.pmps.exists?e("div",{staticClass:"space-y-6"},[e("div",{staticClass:"p-4 bg-gray-50 rounded-md"},[e("h2",{staticClass:"text-2xl font-bold text-gray-800"},[t._v("\n          Խումբ: "+t._s(t.pmps.pmp.group)+" - "+t._s(t.pmps.pmp.group_name)+"\n        ")]),t._v(" "),e("div",{staticClass:"mt-2 flex items-center justify-between"},[e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"bg-green-100 px-3 py-1 rounded-full text-green-800 flex items-center"},[e("svg",{staticClass:"h-4 w-4 mr-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}})]),t._v(" "),e("span",{staticClass:"text-sm font-medium"},[t._v(t._s(t.selectedFactory.name))])])]),t._v(" "),e("button",{staticClass:"text-sm text-blue-600 hover:text-blue-800",on:{click:t.toggleSelectAll}},[t._v("\n            "+t._s(t.allSelected?"Չեղարկել բոլորը":"Ընտրել բոլորը")+"\n          ")])])]),t._v(" "),t._l(t.pmps.pmp.remote_number,(function(r){return e("div",{key:r.id,staticClass:"pl-4 border-l-4 border-blue-200"},[e("h3",{staticClass:"text-xl font-semibold text-gray-700"},[t._v("\n          Հեռակա համար: "+t._s(r.remote_number)+" -\n          "+t._s(r.remote_number_name)+"\n        ")]),t._v(" "),e("div",{staticClass:"mt-4 space-y-3"},[t._l(t.getFactoryFiles(r.id),(function(r){return e("div",{key:r.id,staticClass:"p-3 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",class:{"bg-blue-50 border border-blue-200":t.selectedFiles.includes(r.id)}},[e("div",{staticClass:"flex items-start"},[e("input",{staticClass:"mt-1 h-4 w-4 text-blue-600 rounded focus:ring-blue-500",attrs:{id:"file_"+r.id,type:"checkbox"},domProps:{checked:t.selectedFiles.includes(r.id)},on:{change:function(e){return t.toggleFileSelection(r.id)}}}),t._v(" "),e("div",{staticClass:"ml-3 flex-1"},[e("label",{staticClass:"cursor-pointer",attrs:{for:"file_"+r.id}},[e("p",{staticClass:"font-medium text-blue-600 flex items-center"},[e("svg",{staticClass:"h-5 w-5 mr-2 text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})]),t._v("\n                    "+t._s(r.original_name)+"\n                  ")]),t._v(" "),e("p",{staticClass:"text-sm text-gray-600 ml-7 mt-1"},[t._v("\n                    "+t._s(r.path)+"\n                  ")])])]),t._v(" "),e("div",{staticClass:"text-right"},[r.quantity?e("span",{staticClass:"block text-green-700"},[t._v("Քանակ: "+t._s(r.quantity))]):t._e(),t._v(" "),r.material_type?e("span",{staticClass:"block text-purple-700"},[t._v("Նյութ: "+t._s(r.material_type))]):t._e(),t._v(" "),r.thickness?e("span",{staticClass:"block text-orange-700"},[t._v("Հաստություն: "+t._s(r.thickness))]):t._e()])])])})),t._v(" "),0===t.getFactoryFiles(r.id).length?e("div",{staticClass:"p-3 text-center text-gray-500"},[t._v("\n            Ֆայլեր չեն գտնվել այս հեռակա համարի համար\n          ")]):t._e()],2)])}))],2):e("div",{staticClass:"p-4 text-center text-gray-500"},[t._v("\n      Տվյալներ չեն գտնվել\n    ")]),t._v(" "),t.selectedFiles.length>0?e("div",{staticClass:"mt-6 sticky bottom-4"},[e("button",{staticClass:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md transition-colors",on:{click:t.submitSelectedFiles}},[t._v("\n        Հաստատել ընտրությունը ("+t._s(t.selectedFiles.length)+")\n      ")])]):t._e()]):e("div",{staticClass:"space-y-4"},[e("h2",{staticClass:"text-xl font-bold text-gray-800 mb-4"},[t._v("Ընտրեք արտադրամաս")]),t._v(" "),e("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},t._l(t.factoriesWithCount,(function(r){return e("div",{key:r.id,staticClass:"p-4 border rounded-lg cursor-pointer transition-colors flex items-center justify-between",class:{"hover:border-blue-300":r.fileCount>0,"border-green-200 bg-green-50 hover:bg-green-100":r.fileCount>0,"border-gray-100 bg-gray-50 hover:bg-gray-100":0===r.fileCount,"opacity-60":0===r.fileCount},on:{click:function(e){r.fileCount>0&&t.selectFactory(r)}}},[e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"p-2 rounded-full mr-3",class:{"bg-green-100 text-green-600":r.fileCount>0,"bg-gray-100 text-gray-400":0===r.fileCount}},[e("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}})])]),t._v(" "),e("div",[e("h3",{staticClass:"font-semibold text-lg"},[t._v(t._s(r.name))]),t._v(" "),e("p",{staticClass:"text-gray-600 text-sm"},[t._v(t._s(r.value))])])]),t._v(" "),e("span",{staticClass:"px-2 py-1 rounded-full text-sm font-medium",class:{"bg-green-100 text-green-800":r.fileCount>0,"bg-gray-100 text-gray-400":0===r.fileCount}},[t._v("\n          "+t._s(r.fileCount)+" ֆայլ\n        ")])])})),0)])])}),[],!1,null,"52d91962",null);e.default=component.exports}}]);