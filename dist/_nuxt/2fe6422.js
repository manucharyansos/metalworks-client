(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{618:function(t,e,r){"use strict";r.r(e);r(24),r(43),r(17),r(79),r(403),r(8);var n={name:"OrderCard",props:{order:{type:Object,required:!0},factoryId:{type:[Number,String],required:!0},currentUserId:{type:[Number,String],required:!0}},computed:{factoryOrder:function(){var t=this;return this.order.factory_orders?this.order.factory_orders.find(function(e){return String(e.factory_id)===String(t.factoryId)}):null},status:function(){var t,s=null===(t=this.factoryOrder)||void 0===t?void 0:t.status;return s&&"pending"!==s?s:null},operatorName:function(){var t;return(null===(t=this.factoryOrder)||void 0===t||null===(t=t.operator)||void 0===t?void 0:t.name)||null},statusLabel:function(){return this.status||"Առանց կարգավիճակի"},isTakenByOther:function(){var t,e=null===(t=this.factoryOrder)||void 0===t?void 0:t.operator_id;return!!e&&String(e)!==String(this.currentUserId)},isCompleted:function(){return"Ավարտել"===this.status},isLocked:function(){return this.isTakenByOther||this.isCompleted},badgeClass:function(){switch(this.status){case"Հաստատել":return"bg-green-100 text-green-700 dark:bg-green-700/30 dark:text-green-200";case"Մերժել":return"bg-red-100 text-red-700 dark:bg-red-700/30 dark:text-red-200";case"Կատարման ժամկետի փոխարինում":return"bg-orange-100 text-orange-700 dark:bg-orange-700/30 dark:text-orange-200";case"Ավարտել":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-700/30 dark:text-emerald-200";default:return"bg-gray-100 text-gray-600 dark:bg-gray-700/50 dark:text-gray-200"}},cardStatusClass:function(){return"Ավարտել"===this.status?"border-emerald-200 dark:border-emerald-500/50":"Մերժել"===this.status?"border-red-200 dark:border-red-500/50":"Կատարման ժամկետի փոխարինում"===this.status?"border-orange-200 dark:border-orange-500/50":"Հաստատել"===this.status?"border-green-200 dark:border-green-500/50":""}},methods:{onDragStart:function(t){this.isLocked?t.preventDefault():(t.dataTransfer.effectAllowed="move",this.$emit("drag-start",this.order))}}},d=r(32),component=Object(d.a)(n,function(){var t,e,r,n,d=this,o=d._self._c;return o("div",{staticClass:"group relative flex flex-col rounded-2xl border bg-white p-4 text-sm shadow-sm transition-all dark:border-gray-700 dark:bg-gray-800",class:[d.cardStatusClass,d.isLocked?"opacity-60 cursor-not-allowed":"cursor-move hover:-translate-y-1 hover:shadow-xl"],attrs:{draggable:!d.isLocked},on:{dragstart:d.onDragStart}},[o("div",{staticClass:"mb-2 flex items-start justify-between gap-2"},[o("div",[o("p",{staticClass:"text-xs text-gray-400 dark:text-gray-500"},[d._v("Պատվերի համար")]),d._v(" "),o("h3",{staticClass:"text-sm font-semibold text-gray-900 dark:text-gray-50"},[d._v("\n        "+d._s((null===(t=d.order.order_number)||void 0===t?void 0:t.number)||"Պատվեր #".concat(d.order.id))+"\n      ")]),d._v(" "),o("p",{staticClass:"mt-1 text-xs text-gray-500 dark:text-gray-400"},[d._v("\n        Կոդ:\n        "),o("span",{staticClass:"font-mono"},[d._v("\n          "+d._s(null===(e=d.order.prefix_code)||void 0===e?void 0:e.code)+"\n        ")])])]),d._v(" "),o("span",{staticClass:"inline-flex items-center rounded-full px-2 py-1 text-[10px] font-semibold uppercase tracking-wide",class:d.badgeClass},[d._v("\n      "+d._s(d.statusLabel)+"\n    ")])]),d._v(" "),o("p",{staticClass:"line-clamp-2 text-xs text-gray-600 dark:text-gray-300",attrs:{title:d.order.description}},[d._v("\n    "+d._s(d.order.description||"Առանց նկարագրության")+"\n  ")]),d._v(" "),o("div",{staticClass:"mt-3 grid grid-cols-2 gap-2 text-[11px] text-gray-500 dark:text-gray-400"},[o("div",{staticClass:"flex flex-col gap-1"},[o("span",{staticClass:"text-[10px] uppercase tracking-wide text-gray-400"},[d._v("\n        Ստեղծման ամսաթիվ\n      ")]),d._v(" "),o("span",{staticClass:"font-medium text-gray-700 dark:text-gray-200"},[d._v("\n        "+d._s(d.order.created_at)+"\n      ")])]),d._v(" "),o("div",{staticClass:"flex flex-col gap-1"},[o("span",{staticClass:"text-[10px] uppercase tracking-wide text-gray-400"},[d._v("\n        Ավարտի ժամկետ\n      ")]),d._v(" "),o("span",{staticClass:"font-medium text-gray-700 dark:text-gray-200"},[d._v("\n        "+d._s(null!==(r=d.order.dates)&&void 0!==r&&r.finish_date?d.$formatDate(d.order.dates.finish_date):"Հաշվի առնել")+"\n      ")])]),d._v(" "),o("div",{staticClass:"flex flex-col gap-1"},[o("span",{staticClass:"text-[10px] uppercase tracking-wide text-gray-400"},[d._v("\n        Ստեղծող\n      ")]),d._v(" "),o("span",{staticClass:"font-medium text-gray-700 dark:text-gray-200"},[d._v("\n        "+d._s((null===(n=d.order.creator)||void 0===n?void 0:n.name)||"—")+"\n      ")])]),d._v(" "),o("div",{staticClass:"flex flex-col gap-1"},[o("span",{staticClass:"text-[10px] uppercase tracking-wide text-gray-400"},[d._v("\n        Օպերատոր\n      ")]),d._v(" "),o("span",{staticClass:"font-medium text-gray-700 dark:text-gray-200"},[d._v("\n        "+d._s(d.operatorName||"Չնշված")+"\n      ")])])]),d._v(" "),d.isTakenByOther?o("p",{staticClass:"mt-2 text-[10px] font-medium text-red-500 flex items-center gap-1"},[o("span",{staticClass:"inline-block h-1.5 w-1.5 rounded-full bg-red-500"}),d._v("\n    Պատվերը վերցված է այլ օպերատորի կողմից\n  ")]):d.isCompleted?o("p",{staticClass:"mt-2 text-[10px] font-medium text-emerald-600 flex items-center gap-1 dark:text-emerald-300"},[o("span",{staticClass:"inline-block h-1.5 w-1.5 rounded-full bg-emerald-500"}),d._v("\n    Առաջադրանքը ավարտված է\n  ")]):d._e(),d._v(" "),o("div",{staticClass:"mt-4 flex items-center justify-between pt-2"},[o("button",{staticClass:"flex items-center gap-1 text-xs font-medium text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-200",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),d.$emit("view-details",d.order)}}},[d._v("\n      Դիտել մանրամասն\n      "),o("svg",{staticClass:"h-3 w-3",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"}})])]),d._v(" "),o("button",{staticClass:"rounded-full px-3 py-1 text-xs font-semibold shadow-sm transition-all",class:d.isLocked?"bg-gray-200 text-gray-400 cursor-not-allowed dark:bg-gray-700 dark:text-gray-500":"bg-indigo-50 text-indigo-700 hover:bg-indigo-100 hover:shadow-md dark:bg-indigo-600/20 dark:text-indigo-200 dark:hover:bg-indigo-600/30",attrs:{type:"button",disabled:d.isLocked},on:{click:function(t){t.stopPropagation(),!d.isLocked&&d.$emit("edit",d.order)}}},[d._v("\n      Խմբագրել\n    ")])]),d._v(" "),d.isLocked?d._e():o("div",{staticClass:"pointer-events-none absolute -left-1 top-1/2 hidden -translate-y-1/2 text-xs text-gray-300 group-hover:inline"},[d._v("\n    ☰\n  ")])])},[],!1,null,null,null);e.default=component.exports}}]);