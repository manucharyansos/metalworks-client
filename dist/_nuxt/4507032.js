(window.webpackJsonp=window.webpackJsonp||[]).push([[72,18,19,20,50,53,61],{574:function(t,e,r){"use strict";var n=r(4),o=r(405).trim;n({target:"String",proto:!0,forced:r(575)("trim")},{trim:function(){return o(this)}})},575:function(t,e,r){"use strict";var n=r(112).PROPER,o=r(6),l=r(406);t.exports=function(t){return o(function(){return!!l[t]()||"​᠎"!=="​᠎"[t]()||n&&l[t].name!==t})}},581:function(t,e,r){"use strict";r.r(e);r(33),r(403);var n={name:"Pagination",props:{meta:{type:Object,required:!0}},computed:{canPrev:function(){var t;return Number((null===(t=this.meta)||void 0===t?void 0:t.current_page)||1)>1},canNext:function(){var t,e;return Number((null===(t=this.meta)||void 0===t?void 0:t.current_page)||1)<Number((null===(e=this.meta)||void 0===e?void 0:e.last_page)||1)},pages:function(){var t,e,r=Number((null===(t=this.meta)||void 0===t?void 0:t.current_page)||1),n=Number((null===(e=this.meta)||void 0===e?void 0:e.last_page)||1),o=[];if(n<=7)for(var i=1;i<=n;i++)o.push(i);else{o.push(1),r>4&&o.push("…");for(var l=Math.max(2,r-1),d=Math.min(n-1,r+1),c=l;c<=d;c++)o.push(c);r<n-3&&o.push("…"),o.push(n)}return o}},methods:{go:function(p){var t;"…"!==p&&p!==(null===(t=this.meta)||void 0===t?void 0:t.current_page)&&this.$emit("change",p)}}},o=r(32),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("nav",{staticClass:"flex items-center justify-center gap-1 mt-2",attrs:{role:"navigation","aria-label":"Էջավորում"}},[e("button",{staticClass:"px-2 py-1 mx-1 text-xs sm:text-sm font-medium rounded-lg border transition bg-indigo-50 text-neutral-700 border-indigo-200 hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:!t.canPrev},on:{click:function(e){return t.$emit("change",t.meta.current_page-1)}}},[t._v("\n    "+t._s(t.$t?t.$t("pagination.previous"):"Նախորդ")+"\n  ")]),t._v(" "),t._l(t.pages,function(p,i){return e("div",{key:"".concat(i,"-").concat(p)},["…"===p?e("span",{staticClass:"px-2 py-1 mx-1 text-xs sm:text-sm text-neutral-500"},[t._v("\n      …\n    ")]):e("button",{staticClass:"px-3 py-1 mx-1 text-xs sm:text-sm font-medium rounded-lg transition",class:p===t.meta.current_page?"bg-indigo-500 text-white shadow-sm":"bg-indigo-50 text-neutral-700 hover:bg-indigo-100 border border-indigo-200",on:{click:function(e){return t.go(p)}}},[t._v("\n      "+t._s(p)+"\n    ")])])}),t._v(" "),e("button",{staticClass:"px-2 py-1 mx-1 text-xs sm:text-sm font-medium rounded-lg border transition bg-indigo-50 text-neutral-700 border-indigo-200 hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:!t.canNext},on:{click:function(e){return t.$emit("change",t.meta.current_page+1)}}},[t._v("\n    "+t._s(t.$t?t.$t("pagination.next"):"Հաջորդ")+"\n  ")])],2)},[],!1,null,null,null);e.default=component.exports},590:function(t,e,r){var content=r(626);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("0fef53b3",content,!0,{sourceMap:!1})},623:function(t,e,r){var content=r(654);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("819ef306",content,!0,{sourceMap:!1})},624:function(t,e,r){var content=r(658);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("4fbdf7fb",content,!0,{sourceMap:!1})},625:function(t,e,r){"use strict";r(590)},626:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".h-24.w-24[data-v-24d3eac8]{animation:pulse-24d3eac8 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes pulse-24d3eac8{0%,to{opacity:1}50%{opacity:.9}}",""]),n.locals={},t.exports=n},627:function(t,e,r){var content=r(660);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("74fb7101",content,!0,{sourceMap:!1})},646:function(t,e,r){"use strict";r.r(e);var n={name:"PermissionDenied"},o=(r(625),r(32)),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100 px-4"},[e("div",{staticClass:"w-full max-w-md text-center"},[e("div",{staticClass:"mx-auto mb-8 flex h-24 w-24 items-center justify-center rounded-full bg-red-100/80 shadow-lg ring-8 ring-red-50/50"},[e("svg",{staticClass:"h-14 w-14 text-red-500",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}})])]),t._v(" "),e("h2",{staticClass:"mb-3 text-2xl font-bold text-gray-900 sm:text-3xl"},[t._v("\n      Արգելված է\n    ")]),t._v(" "),t._m(0),t._v(" "),e("button",{staticClass:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-6 py-3 font-medium text-white shadow-md transition-all duration-200 hover:bg-blue-700 hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-100 active:scale-95",on:{click:function(e){return t.$router.push("/engineer")}}},[e("svg",{staticClass:"h-5 w-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7 -7 7 -7"}})]),t._v("\n      Վերադառնալ\n    ")])])])},[function(){var t=this,e=t._self._c;return e("p",{staticClass:"mb-10 text-base leading-relaxed text-gray-600 sm:text-lg"},[t._v("\n      Դուք չունեք հասանելիություն։"),e("br"),t._v(" "),e("span",{staticClass:"font-medium text-gray-700"},[t._v("Խնդրում ենք դիմել ադմինիստրատորին")]),t._v("\n      օգնության համար։\n    ")])}],!1,null,"24d3eac8",null);e.default=component.exports},651:function(t,e,r){"use strict";r(4)({target:"Number",stat:!0},{isFinite:r(652)})},652:function(t,e,r){"use strict";var n=r(7).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&n(t)}},653:function(t,e,r){"use strict";r(623)},654:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".animate-pulse[data-v-1a9b7a34]{animation:pulse-1a9b7a34 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes pulse-1a9b7a34{0%,to{opacity:1}50%{opacity:.7}}",""]),n.locals={},t.exports=n},657:function(t,e,r){"use strict";r(624)},658:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".fade-zoom-enter-active[data-v-712a3062],.fade-zoom-leave-active[data-v-712a3062]{transition:all .18s ease}.fade-zoom-enter[data-v-712a3062],.fade-zoom-leave-to[data-v-712a3062]{opacity:0;transform:scale(.98)}",""]),n.locals={},t.exports=n},659:function(t,e,r){"use strict";r(627)},660:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".absolute[data-v-74b08752]{z-index:50}",""]),n.locals={},t.exports=n},688:function(t,e,r){var content=r(731);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("33aac90c",content,!0,{sourceMap:!1})},709:function(t,e,r){"use strict";r.r(e);r(18),r(78),r(38),r(403),r(651),r(115);var n={name:"OrdersToolbar",props:{search:{type:String,default:""},perPage:{type:Number,default:12}},data:function(){return{tmr:null,showCustom:!1,customPage:this.perPage}},computed:{selectValue:function(){return[4,12,24].includes(this.perPage)?this.perPage:"custom"}},watch:{perPage:function(t){[4,12,24].includes(t)?this.showCustom=!1:(this.showCustom=!0,this.customPage=t)}},methods:{onSearchInput:function(t){var e=this,r=t.target.value;clearTimeout(this.tmr),this.tmr=setTimeout(function(){return e.$emit("update:search",r)},300)},onSelectChange:function(t){var e=t.target.value;"custom"===e?(this.showCustom=!0,this.$nextTick(function(){})):(this.showCustom=!1,this.$emit("update:per-page",Number(e)))},applyCustom:function(){var t=Number(this.customPage);Number.isFinite(t)&&(t=Math.max(1,Math.min(500,Math.floor(t))),this.customPage=t,this.$emit("update:per-page",t))}}},o=r(32),component=Object(o.a)(n,function(){var t,e,r=this,n=r._self._c;return n("div",{staticClass:"w-full flex flex-wrap items-center gap-3"},[n("div",{staticClass:"flex-1 min-w-[240px] relative"},[n("input",{staticClass:"w-full rounded-xl border px-4 py-2.5 dark:bg-gray-800 dark:text-gray-100",attrs:{placeholder:(null===(t=r.$t)||void 0===t?void 0:t.call(r,"search"))||"Որոնել պատվեր… (անուն, նկարագրություն, համար, կոդ)"},domProps:{value:r.search},on:{input:r.onSearchInput}}),r._v(" "),null!==(e=r.search)&&void 0!==e&&e.length?n("button",{staticClass:"absolute right-9 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",attrs:{"aria-label":"Մաքրել"},on:{click:function(t){return r.$emit("update:search","")}}},[r._v("\n      ✕\n    ")]):r._e(),r._v(" "),n("div",{staticClass:"absolute right-3 top-1/2 -translate-y-1/2 opacity-60 pointer-events-none"},[n("svg",{staticClass:"w-5 h-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-4.35-4.35M10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z"}})])])]),r._v(" "),n("div",{staticClass:"flex items-center gap-2"},[n("label",{staticClass:"text-sm opacity-80"},[r._v("Էջում")]),r._v(" "),r.showCustom?r._e():n("select",{staticClass:"rounded-lg border px-3 py-2 dark:bg-gray-800 dark:text-gray-100",domProps:{value:r.selectValue},on:{change:r.onSelectChange}},[n("option",{domProps:{value:4}},[r._v("4")]),r._v(" "),n("option",{domProps:{value:12}},[r._v("12")]),r._v(" "),n("option",{domProps:{value:24}},[r._v("24")]),r._v(" "),n("option",{attrs:{value:"custom"}},[r._v("Այլ…")])]),r._v(" "),r.showCustom?n("input",{directives:[{name:"model",rawName:"v-model.number",value:r.customPage,expression:"customPage",modifiers:{number:!0}}],staticClass:"w-20 rounded-lg border px-2 py-2 dark:bg-gray-800 dark:text-gray-100",attrs:{type:"number",inputmode:"numeric",min:"1",max:"500",placeholder:"qty"},domProps:{value:r.customPage},on:{keyup:function(t){return!t.type.indexOf("key")&&r._k(t.keyCode,"enter",13,t.key,"Enter")?null:r.applyCustom.apply(null,arguments)},blur:[r.applyCustom,function(t){return r.$forceUpdate()}],input:function(t){t.target.composing||(r.customPage=r._n(t.target.value))}}}):r._e()])])},[],!1,null,null,null);e.default=component.exports},710:function(t,e,r){"use strict";r.r(e);r(24),r(43),r(41),r(17),r(33),r(38),r(49),r(403),r(8),r(52),r(574);var n={props:{order:{type:Object,required:!0}},computed:{filesCount:function(){var t=(this.order.selected_files||[]).reduce(function(a,s){return a+(Number(s.quantity)||1)},0);return t>0?t:(this.order.factory_orders||[]).reduce(function(t,e){return t+(e.files||[]).reduce(function(b,t){var e,q=(null===(e=t.pivot)||void 0===e?void 0:e.quantity)||t.quantity||1;return b+Number(q)},0)},0)},overallStatusText:function(){var t=(this.order.factory_orders||[]).map(function(t){var e;return null===(e=t.status)||void 0===e?void 0:e.toLowerCase().trim()});return 0===t.length?"Չկա":t.includes("canceled")?"Չեղարկված":t.every(function(s){return"done"===s||"completed"===s||"confirmed"===s})?"Ավարտված":t.some(function(s){return"pending"===s||"in_progress"===s})?"Ընթացքում":"Այլ"},overallStatusClass:function(){var t=(this.order.factory_orders||[]).map(function(t){var e;return null===(e=t.status)||void 0===e?void 0:e.toLowerCase().trim()});return t.includes("canceled")?"bg-rose-600":t.every(function(s){return["done","completed","confirmed"].includes(s)})?"bg-emerald-600":t.some(function(s){return["pending","in_progress"].includes(s)})?"bg-amber-600":"bg-blue-600"},deadlineClass:function(){var t,e=null===(t=this.order.dates)||void 0===t?void 0:t.finish_date;if(!e)return"text-gray-500";var r=this.hoursUntil(e);return r<0?"text-rose-600 font-bold animate-pulse":r<=24?"text-orange-600 font-bold":"text-gray-500"},cardBorderClass:function(){var t,e=null===(t=this.order.dates)||void 0===t?void 0:t.finish_date;if(!e)return"border-gray-200 dark:border-gray-800";var r=this.hoursUntil(e);return r<0?"border-rose-500 border-4 shadow-rose-500/20":r<=24?"border-orange-500 border-3 shadow-orange-500/20":"border-gray-200 dark:border-gray-800"}},methods:{formatDate:function(t){return t?new Date(t).toLocaleDateString("hy-AM"):"—"},formatDeadline:function(t){if(!t)return"—";var e=new Date(t),r=e-new Date,n=Math.floor(r/864e5),o=Math.floor(r%864e5/36e5);return r<0?"Անցել է ժամկետը":0===n?"Այսօր ".concat(e.toLocaleTimeString("hy-AM",{hour:"2-digit",minute:"2-digit"})):1===n?"Վաղը":"".concat(n," օր ").concat(o," ժամ")},hoursUntil:function(t){return t?(new Date(t)-new Date)/36e5:1/0},formatStatus:function(t){if(!t)return"—";return{pending:"Սպասում",in_progress:"Ընթացքում",done:"Ավարտված",completed:"Ավարտված",confirmed:"Հաստատված",canceled:"Չեղարկված","Ավարտել":"Ավարտված"}[t.toLowerCase().trim()]||t},factoryStatusClass:function(t){if(!t)return"bg-gray-500";var s=t.toLowerCase().trim();return s.includes("canceled")?"bg-rose-600":["done","completed","confirmed","Ավարտել"].some(function(t){return s.includes(t)})?"bg-emerald-600":["pending","in_progress"].some(function(t){return s.includes(t)})?"bg-amber-600":"bg-blue-600"},factoryColorClass:function(t){return{DXF:"bg-purple-600",DLD:"bg-indigo-600",CNC:"bg-pink-600",Bend:"bg-indigo-600","Laser cutting":"bg-purple-600"}[t]||"bg-gray-600"}}},o=(r(653),r(32)),component=Object(o.a)(n,function(){var t,e,r,n,o,l,d=this,c=d._self._c;return c("div",{staticClass:"group bg-white dark:bg-gray-900 rounded-2xl shadow-sm border-2 transition-all duration-300 p-5 hover:shadow-xl",class:d.cardBorderClass},[c("div",{staticClass:"flex items-start justify-between gap-4"},[c("div",{staticClass:"flex-1"},[c("div",{staticClass:"text-xs uppercase tracking-wider text-gray-400 mb-1"},[d._v("\n        #"+d._s((null===(t=d.order.order_number)||void 0===t?void 0:t.number)||"—")+" ·\n        "+d._s((null===(e=d.order.prefix_code)||void 0===e?void 0:e.code)||"—")+"\n      ")]),d._v(" "),c("h3",{staticClass:"text-lg font-semibold text-gray-900 dark:text-gray-100"},[d._v("\n        "+d._s(d.order.name||"Անանուն պատվեր")+"\n      ")])]),d._v(" "),c("div",{staticClass:"flex flex-col items-end gap-2"},[c("span",{staticClass:"px-3 py-1 rounded-full text-xs font-medium text-white",class:d.overallStatusClass},[d._v("\n        "+d._s(d.overallStatusText)+"\n      ")]),d._v(" "),c("span",{staticClass:"px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300",attrs:{title:"Ստեղծող"}},[d._v("\n        "+d._s(null!==(r=null===(n=d.order.creator)||void 0===n?void 0:n.name)&&void 0!==r?r:"ID: ".concat(null!==(o=d.order.creator_id)&&void 0!==o?o:"—"))+"\n      ")])])]),d._v(" "),c("p",{staticClass:"mt-3 text-sm text-gray-600 dark:text-gray-300 line-clamp-2"},[d._v("\n    "+d._s(d.order.description||"—")+"\n  ")]),d._v(" "),c("div",{staticClass:"mt-4 space-y-2"},d._l(d.order.factory_orders,function(t,e){var r,n,o,l;return c("div",{key:e,staticClass:"flex items-center justify-between text-xs"},[c("div",{staticClass:"flex items-center gap-2"},[c("div",{staticClass:"w-7 h-E rounded-full ring-2 ring-white dark:ring-gray-900 flex items-center justify-center text-white text-[10px] font-bold",class:d.factoryColorClass(null===(r=t.factory)||void 0===r?void 0:r.value),attrs:{title:null===(n=t.factory)||void 0===n?void 0:n.name}},[d._v("\n          "+d._s(((null===(o=t.factory)||void 0===o?void 0:o.name)||"F")[0])+"\n        ")]),d._v(" "),c("span",{staticClass:"text-gray-600 dark:text-gray-400"},[d._v(d._s(null===(l=t.factory)||void 0===l?void 0:l.name))])]),d._v(" "),c("span",{staticClass:"px-3 py-1 rounded-full text-xs font-medium text-white",class:d.factoryStatusClass(t.status)},[d._v("\n        "+d._s(d.formatStatus(t.status))+"\n      ")])])}),0),d._v(" "),c("div",{staticClass:"mt-5 grid grid-cols-2 gap-3 text-xs text-gray-500 dark:text-gray-400"},[c("div",{staticClass:"flex items-center gap-2"},[c("svg",{staticClass:"w-4 h-4 opacity-80",attrs:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[c("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3M3 11h18M5 19h14a2 2 0 0 0 2-2v-6H3v6a2 2 0 0 0 2 2Z"}})]),d._v(" "),c("span",[d._v("Ստեղծվել՝ "+d._s(d.order.created_at))])]),d._v(" "),c("div",{staticClass:"flex items-center gap-2"},[c("svg",{staticClass:"w-4 h-4 opacity-80",attrs:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[c("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7l9 6 9-6-9-4-9 4Zm0 0v10l9 4 9-4V7"}})]),d._v(" "),c("span",[d._v("Ֆայլեր՝ "+d._s(d.filesCount))])]),d._v(" "),c("div",{staticClass:"flex items-center gap-2 col-span-2"},[c("svg",{staticClass:"w-4 h-4",attrs:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[c("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}})]),d._v(" "),c("span",{class:d.deadlineClass},[d._v("\n        Ավարտ՝ "+d._s(d.formatDeadline(null===(l=d.order.dates)||void 0===l?void 0:l.finish_date))+"\n      ")])])]),d._v(" "),c("div",{staticClass:"mt-5 flex items-center justify-between"},[c("div",{staticClass:"flex -space-x-2"},d._l((d.order.factory_orders||[]).slice(0,3),function(t,e){var r,n,o;return c("div",{key:e,staticClass:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-gray-900 flex items-center justify-center text-white text-xs font-bold",class:d.factoryColorClass(null===(r=t.factory)||void 0===r?void 0:r.value),attrs:{title:null===(n=t.factory)||void 0===n?void 0:n.name}},[d._v("\n        "+d._s(((null===(o=t.factory)||void 0===o?void 0:o.name)||"F")[0])+"\n      ")])}),0),d._v(" "),c("button",{staticClass:"px-5 py-2 rounded-xl bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 active:scale-95 transition",on:{click:function(t){return d.$emit("open",d.order)}}},[d._v("\n      Բացել\n    ")])])])},[],!1,null,"1a9b7a34",null);e.default=component.exports},711:function(t,e,r){"use strict";r.r(e);r(24),r(43),r(17);var n=r(1),o=r(15),l=(r(9),r(33),r(23),r(403),r(39),r(40),r(27),r(8),r(30),r(18),r(61),r(96));function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach(function(e){Object(o.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var v={name:"OrderDetailsModal",components:{FileGallery:r(712).default},props:{visible:{type:Boolean,default:!1},order:{type:Object,default:null}},computed:{number:function(){var t;return null===(t=this.order)||void 0===t||null===(t=t.order_number)||void 0===t?void 0:t.number},code:function(){var t;return null===(t=this.order)||void 0===t||null===(t=t.prefix_code)||void 0===t?void 0:t.code},creatorName:function(){var t,e,r,n;return null!==(t=null===(e=this.order)||void 0===e||null===(e=e.creator)||void 0===e?void 0:e.name)&&void 0!==t?t:"ID: ".concat(null!==(r=null===(n=this.order)||void 0===n?void 0:n.creator_id)&&void 0!==r?r:"—")},finishDate:function(){var t;return(null===(t=this.order)||void 0===t||null===(t=t.dates)||void 0===t?void 0:t.finish_date)||null},isOverdue:function(){if(!this.finishDate)return!1;var t=new Date(this.finishDate),e=new Date;return e.setHours(0,0,0,0),t.setHours(0,0,0,0),t<=e},selectedCount:function(){var t;return((null===(t=this.order)||void 0===t?void 0:t.selected_files)||[]).reduce(function(a,s){return a+(Number(s.quantity)||1)},0)},factoryCount:function(){var t;return((null===(t=this.order)||void 0===t?void 0:t.factory_orders)||[]).reduce(function(t,e){return t+(e.files||[]).reduce(function(b,t){return b+(t.pivot&&Number(t.pivot.quantity)||Number(t.quantity)||1)},0)},0)},totalCount:function(){return this.selectedCount+this.factoryCount},statusBadge:function(){var t,s=((null===(t=this.order)||void 0===t?void 0:t.status)||"").toLowerCase();return"pending"===s?"bg-amber-50 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":"done"===s||"completed"===s?"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"canceled"===s?"bg-rose-50 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}},methods:c(c({},Object(l.b)("factory",["downloadUploadedFile"])),{},{safeDate:function(t){if(!t)return"—";var dt=new Date(t);return isNaN(dt)?t:dt.toLocaleDateString()},safeDateTime:function(t){if(!t)return"—";var dt=new Date(t);return isNaN(dt)?t:dt.toLocaleString()},countFactoryFiles:function(t){return((null==t?void 0:t.files)||[]).reduce(function(b,t){return b+(t.pivot&&Number(t.pivot.quantity)||Number(t.quantity)||1)},0)},publicUrl:function(t){if(!t||"string"!=typeof t)return null;var e=this.$axios.defaults.baseURL;return"".concat(e,"/storage/").concat(t)},isPreviewable:function(t){var p=((null==t?void 0:t.path)||"").toLowerCase(),e=((null==t?void 0:t.original_name)||"").toLowerCase();return/\.pdf$/.test(p)||/\.pdf$/.test(e)||/\.(png|jpe?g|webp|gif)$/.test(p)||/\.(png|jpe?g|webp|gif)$/.test(e)},downloadFile:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark(function r(){var path,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,(path=null==t?void 0:t.path)&&"string"==typeof path){r.next=1;break}return r.abrupt("return");case 1:return n=String(path).replace(/\\/g,"/"),r.next=2,e.downloadUploadedFile({path:n,original_name:(null==t?void 0:t.original_name)||"file"});case 2:r.next=4;break;case 3:r.prev=3,o=r.catch(0),e.$notify({text:o,duration:3e3,speed:1e3,position:"top",type:"error"});case 4:case"end":return r.stop()}},r,null,[[0,3]])}))()}})},f=(r(657),r(32)),component=Object(f.a)(v,function(){var t,e,r,n,o,l,d=this,c=d._self._c;return c("transition",{attrs:{name:"fade-zoom"}},[d.visible?c("div",{staticClass:"fixed inset-0 z-50 flex items-center justify-center"},[c("div",{staticClass:"absolute inset-0 bg-black/40",on:{click:function(t){return d.$emit("close")}}}),d._v(" "),c("div",{staticClass:"relative max-h-[90vh] overflow-y-auto w-[95%] max-w-4xl bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-6",attrs:{role:"dialog","aria-modal":"true"},on:{keydown:function(t){return!t.type.indexOf("key")&&d._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:d.$emit("close")}}},[c("div",{staticClass:"flex items-start justify-between gap-3 mb-4"},[c("div",[c("h3",{staticClass:"text-xl font-semibold text-gray-900 dark:text-gray-100"},[d._v("\n            Պատվեր #"+d._s(d.number||(null===(t=d.order)||void 0===t?void 0:t.id)||"—")+"\n          ")]),d._v(" "),c("p",{staticClass:"text-sm text-gray-500 dark:text-gray-400"},[d.code?c("span",[d._v("Կոդ — "+d._s(d.code))]):d._e()])]),d._v(" "),c("button",{staticClass:"text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition",attrs:{"aria-label":"Փակել"},on:{click:function(t){return d.$emit("close")}}},[d._v("\n          ✕\n        ")])]),d._v(" "),c("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},[c("div",{staticClass:"p-4 rounded-xl border border-gray-200 dark:border-gray-800"},[c("div",{staticClass:"text-xs opacity-60 mb-1"},[d._v("Անուն")]),d._v(" "),c("div",{staticClass:"font-medium"},[d._v(d._s((null===(e=d.order)||void 0===e?void 0:e.name)||"—"))])]),d._v(" "),c("div",{staticClass:"p-4 rounded-xl border border-gray-200 dark:border-gray-800"},[c("div",{staticClass:"text-xs opacity-60 mb-1"},[d._v("Ստեղծող")]),d._v(" "),c("div",{staticClass:"font-medium"},[d._v(d._s(d.creatorName))])]),d._v(" "),c("div",{staticClass:"p-4 rounded-xl border border-gray-200 dark:border-gray-800"},[c("div",{staticClass:"text-xs opacity-60 mb-1"},[d._v("Կարգավիճակ")]),d._v(" "),c("span",{staticClass:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium",class:d.statusBadge},[d._v("\n            "+d._s(((null===(r=d.order)||void 0===r?void 0:r.status)||"—").toUpperCase())+"\n          ")])]),d._v(" "),c("div",{staticClass:"p-4 rounded-xl border border-gray-200 dark:border-gray-800"},[c("div",{staticClass:"text-xs opacity-60 mb-1"},[d._v("Ստեղծվել է")]),d._v(" "),c("div",{staticClass:"font-medium"},[d._v(d._s(d.safeDate(null===(n=d.order)||void 0===n?void 0:n.created_at)))])]),d._v(" "),c("div",{staticClass:"p-4 rounded-xl border border-gray-200 dark:border-gray-800 md:col-span-2"},[c("div",{staticClass:"text-xs opacity-60 mb-1"},[d._v("Նկարագրություն")]),d._v(" "),c("div",{staticClass:"whitespace-pre-line"},[d._v("\n            "+d._s((null===(o=d.order)||void 0===o?void 0:o.description)||"—")+"\n          ")])])]),d._v(" "),d.finishDate?c("div",{staticClass:"mb-6"},[c("h4",{staticClass:"text-sm font-semibold mb-2"},[d._v("Ժամանակագրություն")]),d._v(" "),c("ul",{staticClass:"space-y-2"},[c("li",{staticClass:"flex items-start gap-3"},[c("span",{staticClass:"w-2 h-2 rounded-full bg-blue-600 mt-2 animate-ping",class:{"bg-red-500":d.isOverdue,"bg-blue-600 animate-ping":!d.isOverdue}}),d._v(" "),c("div",{staticClass:"flex-1"},[c("div",{staticClass:"text-sm font-medium"},[d._v("Ավարտի պլանային օր")]),d._v(" "),c("div",{staticClass:"text-xs opacity-70"},[d._v("\n                "+d._s(d.safeDateTime(d.finishDate))+"\n              ")])])])])]):d._e(),d._v(" "),c("div",{staticClass:"mb-3 flex flex-wrap items-center gap-2"},[c("span",{staticClass:"text-sm text-gray-600 dark:text-gray-300"},[d._v("Ֆայլերի ամփոփում")]),d._v(" "),c("span",{staticClass:"text-xs px-2 py-1 rounded-full bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300"},[d._v("\n          Ընտրված՝ "+d._s(d.selectedCount)+"\n        ")]),d._v(" "),c("span",{staticClass:"text-xs px-2 py-1 rounded-full bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"},[d._v("\n          Արտադրամասերից՝ "+d._s(d.factoryCount)+"\n        ")]),d._v(" "),c("span",{staticClass:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"},[d._v("\n          Ընդամենը՝ "+d._s(d.totalCount)+"\n        ")])]),d._v(" "),((null===(l=d.order)||void 0===l?void 0:l.factory_orders)||[]).length?c("div",{staticClass:"mb-6"},[c("h4",{staticClass:"text-sm font-semibold mb-2"},[d._v("Արտադրամասեր")]),d._v(" "),c("div",{staticClass:"space-y-4"},d._l(d.order.factory_orders,function(t){var e,r;return c("div",{key:t.id,staticClass:"rounded-xl border border-gray-200 dark:border-gray-800 p-4"},[c("div",{staticClass:"flex items-center justify-between mb-3"},[c("div",[c("div",{staticClass:"text-sm font-semibold"},[d._v("\n                  "+d._s((null===(e=t.factory)||void 0===e?void 0:e.name)||"Արտադրամաս")+"\n                ")]),d._v(" "),c("div",{staticClass:"text-xs mt-1 text-gray-500 dark:text-gray-400"},[d._v("\n                  Կատարող՝\n                  "),c("span",{staticClass:"font-medium"},[d._v("\n                    "+d._s((null===(r=t.operator)||void 0===r?void 0:r.name)||"—")+"\n                  ")])])]),d._v(" "),c("div",{staticClass:"text-xs opacity-70"},[d._v("\n                Ֆայլեր՝ "+d._s(d.countFactoryFiles(t))+"\n              ")])]),d._v(" "),c("FileGallery",{attrs:{items:t.files||[]}})],1)}),0)]):d._e(),d._v(" "),c("div",{staticClass:"mt-6 flex justify-end"},[c("button",{staticClass:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 transition",on:{click:function(t){return d.$emit("close")}}},[d._v("\n          Փակել\n        ")])])])]):d._e(),d._v(" "),c("notifications")],1)},[],!1,null,"712a3062",null);e.default=component.exports},713:function(t,e,r){"use strict";r.r(e);r(24),r(43),r(17),r(79),r(8);var n={name:"OrderDetailsModal",props:{details:{type:Object,required:!0,default:function(){return{name:"",quantity:null,description:"",factory_orders:[],selectedFiles:[],link_existing_files:!1}}},dxfUrl:{type:String,default:""}},emits:["close","view-file","download-file"],methods:{getSelectedFileQuantity:function(t){var e,r=null===(e=this.details.selectedFiles)||void 0===e?void 0:e.find(function(e){return e.pmp_file_id===t.id});return r?r.quantity:null}}},o=(r(659),r(32)),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"absolute top-0 min-h-screen w-full flex items-center justify-center bg-gray-100 rounded p-4 text-gray-700"},[e("button",{staticClass:"fixed top-10 right-20",on:{click:function(e){return t.$emit("close")}}},[e("svg",{staticClass:"w-6 h-6 text-gray-800",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"red",viewBox:"0 0 24 24"}},[e("path",{attrs:{stroke:"red","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18 17.94 6M18 18 6.06 6"}})])]),t._v(" "),e("div",{staticClass:"grid lg:grid-cols-2 grid-cols-1 justify-between gap-2 bg-white p-6 rounded-lg shadow-slate-500 lg:w-5/6 w-full"},[e("div",{staticClass:"flex items-center justify-center show_file_section mx-auto text-center"},[t._t("showFiles")],2),t._v(" "),e("div",{staticClass:"flex flex-col items-start justify-center"},[e("h3",{staticClass:"text-lg font-bold mb-4"},[t._v("Առաջադրանքի մանրամասներ")]),t._v(" "),e("ul",{staticClass:"text-base font-medium leading-7"},[e("li",[t._v("Անուն: "+t._s(t.details.name||"N/A"))]),t._v(" "),e("li",[t._v("Քանակ: "+t._s(t.details.quantity||"N/A"))]),t._v(" "),e("li",[t._v("Նկարագրություն: "+t._s(t.details.description||"N/A"))])]),t._v(" "),t.details.factory_orders&&t.details.factory_orders.length>0?e("div",{staticClass:"flex flex-col items-center justify-center w-full"},[e("h4",{staticClass:"text-lg font-bold mt-4"},[t._v("Ֆայլեր")]),t._v(" "),e("ul",{staticClass:"w-full"},t._l(t.details.factory_orders,function(r){var n,o;return e("li",{key:r.id},[r.files&&r.files.length>0?e("div",[e("div",{staticClass:"flex items-center justify-between mb-2 px-1"},[e("div",{staticClass:"text-sm font-semibold"},[t._v("\n                  "+t._s((null===(n=r.factory)||void 0===n?void 0:n.name)||"Արտադրամաս")+"\n                ")]),t._v(" "),e("div",{staticClass:"text-xs text-gray-500"},[t._v("\n                  Կատարող՝\n                  "),e("span",{staticClass:"font-medium"},[t._v(t._s((null===(o=r.operator)||void 0===o?void 0:o.name)||"—"))])])]),t._v(" "),t._l(r.files,function(r){return e("div",{key:r.id,staticClass:"border border-gray-200 rounded-md my-1 shadow-slate-600 shadow-md rounded-b-lg w-full"},[e("div",{staticClass:"flex items-center gap-4 justify-between p-3"},[e("button",{staticClass:"text-blue-500 hover:text-blue-700",on:{click:function(e){return t.$emit("view-file",r.path)}}},[t._v("\n                    Դիտել\n                  ")]),t._v(" "),e("button",{staticClass:"text-green-500 hover:text-green-700 flex items-center gap-2 justify-between",class:{"text-black":"downloaded"===r.status},on:{click:function(e){return t.$emit("download-file",r)}}},[t._v("\n                    "+t._s(r.original_name)+"\n                    "),e("img",{staticClass:"w-8 h-8",attrs:{src:"/images/img.png",alt:"File Icon"}})])]),t._v(" "),e("div",{staticClass:"flex items-center justify-between gap-2 my-2 p-3"},[e("p",{staticClass:"flex flex-col items-center gap-2"},[e("span",{staticClass:"font-montserrat font-bold"},[t._v("Քանակ։")]),t._v(" "),t.details.link_existing_files&&t.getSelectedFileQuantity(r)?e("span",[e("span",{staticClass:"line-through"},[t._v(t._s(r.quantity||"N/A"))]),t._v(" "),e("span",{staticClass:"ml-2 text-blue-500"},[t._v(t._s(t.getSelectedFileQuantity(r)))])]):e("span",[t._v(t._s(r.quantity||"N/A"))])]),t._v(" "),e("p",{staticClass:"flex flex-col items-center gap-2"},[e("span",{staticClass:"italic font-sans font-bold"},[t._v("Նյութի տեսակ։")]),t._v("\n                    "+t._s(r.material_type||"N/A")+"\n                  ")]),t._v(" "),e("p",{staticClass:"flex flex-col items-center gap-2"},[e("span",{staticClass:"font-montserrat font-bold"},[t._v("Հաստություն։")]),t._v("\n                    "+t._s(r.thickness||"N/A")+"\n                  ")])])])})],2):t._e()])}),0)]):t._e()])])])},[],!1,null,"74b08752",null);e.default=component.exports},730:function(t,e,r){"use strict";r(688)},731:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".card-enter-active,.card-leave-active{transition:all .18s ease}.card-enter,.card-leave-to{opacity:0;transform:translateY(6px)}",""]),n.locals={},t.exports=n},779:function(t,e,r){"use strict";r.r(e);r(18),r(78),r(24),r(23),r(39),r(40),r(27),r(8),r(30);var n=r(15),o=r(96),l=r(709),d=r(710),c=r(581),v=r(711);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach(function(e){Object(n.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var x={components:{PermissionDenied:r(646).default,OrdersToolbar:l.default,OrderCard:d.default,Pagination:c.default,OrderDetailsModal:v.default},layout:"engineer",middleware:["role-guard"],meta:{role:"engineer"},data:function(){return{isDetailsOpen:!1,selectedOrder:null}},computed:m(m({},Object(o.c)("engineer",["getOrders","getPagination","getFilters","isLoading","getError"])),{},{orders:function(){return this.getOrders},pagination:function(){return this.getPagination},filters:function(){return this.getFilters},loading:function(){return this.isLoading},error:function(){return this.getError}}),created:function(){var t=this;this.fetchOrders().catch(function(){var e;null===(e=t.$notify)||void 0===e||e.call(t,{type:"error",text:"Չհաջողվեց բեռնել պատվերները"})})},methods:m(m({},Object(o.b)("engineer",["fetchOrders","setSearch","setPerPage","goPage"])),{},{onSetSearch:function(q){this.setSearch(q)},onSetPerPage:function(t){this.setPerPage(t)},onGoPage:function(p){this.goPage(p)},openOrder:function(t){this.selectedOrder=t,this.isDetailsOpen=!0}})},_=(r(730),r(32)),component=Object(_.a)(x,function(){var t=this,e=t._self._c;return e("div",{staticClass:"min-h-screen w-full bg-gray-50 dark:bg-gray-950"},[t.$can("orders.view")?e("div",{staticClass:"container mx-auto px-4 sm:px-6 lg:px-8 py-8"},[t._m(0),t._v(" "),e("div",{staticClass:"mt-6"},[e("OrdersToolbar",{attrs:{search:t.filters.search,"per-page":t.pagination.per_page},on:{"update:search":t.onSetSearch,"update:per-page":t.onSetPerPage}})],1),t._v(" "),e("div",{staticClass:"mt-6"},[t.error?e("div",{staticClass:"p-4 rounded-xl bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"},[t._v("\n        "+t._s(t.error)+"\n      ")]):t._e(),t._v(" "),t.loading?e("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5"},t._l(8,function(i){return e("div",{key:i,staticClass:"animate-pulse bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 rounded-2xl p-5"},[e("div",{staticClass:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mb-3"}),t._v(" "),e("div",{staticClass:"h-5 w-40 bg-gray-200 dark:bg-gray-800 rounded mb-2"}),t._v(" "),e("div",{staticClass:"h-20 bg-gray-200 dark:bg-gray-800 rounded mb-4"}),t._v(" "),t._m(1,!0)])}),0):t.orders&&t.orders.length?t._e():e("div",{staticClass:"rounded-2xl bg-white dark:bg-gray-900 border border-dashed border-gray-300 dark:border-gray-700 p-10 text-center"},[e("div",{staticClass:"mx-auto w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 grid place-items-center mb-3"},[e("svg",{staticClass:"w-6 h-6 opacity-60",attrs:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7l9 4 9-4-9-4-9 4ZM3 7v10l9 4 9-4V7"}})])]),t._v(" "),e("h3",{staticClass:"text-lg font-semibold mb-1"},[t._v("Պատվերներ չկան")]),t._v(" "),e("p",{staticClass:"text-sm text-gray-500"},[t._v("\n          Սկսեք նոր պատվերից կամ փոխեք որոնման դաշտը\n        ")])]),t._v(" "),e("transition-group",{staticClass:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",attrs:{name:"card",tag:"div"}},t._l(t.orders,function(r){return e("OrderCard",{key:r.id,attrs:{order:r},on:{open:t.openOrder}})}),1)],1),t._v(" "),e("div",{staticClass:"mt-6"},[e("Pagination",{attrs:{meta:t.pagination},on:{change:t.onGoPage}})],1)]):e("div",{staticClass:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 px-4"},[e("PermissionDenied")],1),t._v(" "),e("OrderDetailsModal",{attrs:{visible:t.isDetailsOpen&&t.$can("orders.view"),order:t.selectedOrder},on:{close:function(e){t.isDetailsOpen=!1}}})],1)},[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center justify-between gap-3 flex-wrap"},[e("div",[e("h1",{staticClass:"text-2xl font-bold text-gray-900 dark:text-gray-100"},[t._v("\n          Իմ պատվերները\n        ")]),t._v(" "),e("p",{staticClass:"text-sm text-gray-500 dark:text-gray-400"},[t._v("\n          Փնտրեք, դիտեք և կառավարեք ձեր ստեղծած պատվերները\n        ")])])])},function(){var t=this._self._c;return t("div",{staticClass:"flex justify-between"},[t("div",{staticClass:"h-8 w-24 bg-gray-200 dark:bg-gray-800 rounded"}),this._v(" "),t("div",{staticClass:"h-8 w-20 bg-gray-200 dark:bg-gray-800 rounded"})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{OrderDetailsModal:r(713).default})}}]);