(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{412:function(e,r,t){"use strict";var o=t(3),n=t(255).trim;o({target:"String",proto:!0,forced:t(413)("trim")},{trim:function(){return n(this)}})},413:function(e,r,t){"use strict";var o=t(98).PROPER,n=t(5),l=t(256);e.exports=function(e){return n(function(){return!!l[e]()||"​᠎"!=="​᠎"[e]()||o&&l[e].name!==e})}},487:function(e,r,t){var content=t(545);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(23).default)("89bdc09a",content,!0,{sourceMap:!1})},544:function(e,r,t){"use strict";t(487)},545:function(e,r,t){var o=t(22)(function(i){return i[1]});o.push([e.i,"button[data-v-73abb915],input[type=file]+label[data-v-73abb915]{transition:all .2s ease}@media (max-width:640px){.flex-wrap[data-v-73abb915]{justify-content:center}}",""]),o.locals={},e.exports=o},594:function(e,r,t){"use strict";t.r(r);t(29),t(53),t(19),t(27),t(47),t(48),t(39);var o=t(0),n=t(20),l=(t(11),t(58),t(259),t(10),t(31),t(30),t(266),t(412),t(38),t(40));function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach(function(r){Object(n.a)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var d={name:"CreateProduct",layout:"ManagerLayout",middleware:["manager","roleRedirect"],data:function(){return{form:{name:"",description:"",price:null,image:null,gallery:[]},imagePreview:null,galleryPreviews:[],errors:{},isSubmitting:!1}},methods:m(m({},Object(l.b)("products",["createProduct"])),{},{handleImageUpload:function(e){var r=this,t=e.target.files[0];if(t){if(!t.type.match("image.*"))return void(this.errors.image="Ընտրված ֆայլը պատկեր չէ");if(t.size>2097152)return void(this.errors.image="Պատկերը չպետք է գերազանցի 2MB");this.form.image=t;var o=new FileReader;o.onload=function(e){r.imagePreview=e.target.result},o.readAsDataURL(t),this.errors.image=null}else this.form.image=null,this.imagePreview=null},handleGalleryUpload:function(e){var r=this,t=Array.from(e.target.files);t.length+this.form.gallery.length>5?this.errors.gallery="Դուք կարող եք ավելացնել առավելագույնը 5 պատկեր":(t.forEach(function(e){if(e.type.match("image.*"))if(e.size>2097152)r.errors.gallery="Պատկերները չպետք է գերազանցեն 2MB";else{var t=new FileReader;t.onload=function(t){r.galleryPreviews.push(t.target.result),r.form.gallery.push(e)},t.readAsDataURL(e)}else r.errors.gallery="Ընտրված ֆայլերից մեկը պատկեր չէ"}),this.galleryPreviews.length<=5&&(this.errors.gallery=null))},removeGalleryImage:function(e){this.galleryPreviews.splice(e,1),this.form.gallery.splice(e,1),this.galleryPreviews.length<5&&(this.errors.gallery=null)},validateForm:function(){this.errors={};var e=!0;return this.form.name.trim()||(this.errors.name="Անունը պարտադիր է",e=!1),this.form.description.trim()||(this.errors.description="Նկարագրությունը պարտադիր է",e=!1),(!this.form.price||this.form.price<0)&&(this.errors.price="Արժեքը պետք է լինի 0 կամ ավելի",e=!1),this.form.image||(this.errors.image="Հիմնական պատկերը պարտադիր է",e=!1),this.form.gallery.length>5&&(this.errors.gallery="Դուք կարող եք ավելացնել առավելագույնը 5 պատկեր",e=!1),e},submitForm:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark(function r(){var t,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.validateForm()){r.next=1;break}return r.abrupt("return");case 1:return e.isSubmitting=!0,r.prev=2,(t=new FormData).append("name",e.form.name),t.append("description",e.form.description),t.append("price",e.form.price),t.append("image",e.form.image),e.form.gallery.forEach(function(e,r){t.append("gallery[".concat(r,"]"),e)}),r.next=3,e.createProduct(t);case 3:e.$router.push("/manager/products"),e.$toast.success("Ապրանքը հաջողությամբ ստեղծվել է",{position:"top-right",duration:3e3}),r.next=5;break;case 4:r.prev=4,o=r.catch(2),console.error("Error creating product:",o),e.$toast.error("Սխալ ապրանքը ստեղծելիս",{position:"top-right",duration:3e3});case 5:return r.prev=5,e.isSubmitting=!1,r.finish(5);case 6:case"end":return r.stop()}},r,null,[[2,4,5,6]])}))()}})},f=(t(544),t(7)),component=Object(f.a)(d,function(){var e=this,r=e._self._c;return r("div",{staticClass:"max-w-2xl mx-auto p-4 sm:p-6 bg-white dark:bg-gray-900 rounded-lg shadow-md"},[r("h1",{staticClass:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white mb-6"},[e._v("\n    Ստեղծել Նոր Ապրանք\n  ")]),e._v(" "),r("form",{staticClass:"space-y-4 sm:space-y-6",on:{submit:function(r){return r.preventDefault(),e.submitForm.apply(null,arguments)}}},[r("div",[r("label",{staticClass:"block text-sm font-medium text-gray-700 dark:text-gray-300",attrs:{for:"name"}},[e._v("Անուն")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",class:{"border-red-500":e.errors.name},attrs:{id:"name",type:"text",placeholder:"Մուտքագրեք ապրանքի անունը"},domProps:{value:e.form.name},on:{input:function(r){r.target.composing||e.$set(e.form,"name",r.target.value)}}}),e._v(" "),e.errors.name?r("p",{staticClass:"mt-1 text-sm text-red-600"},[e._v("\n        "+e._s(e.errors.name)+"\n      ")]):e._e()]),e._v(" "),r("div",[r("label",{staticClass:"block text-sm font-medium text-gray-700 dark:text-gray-300",attrs:{for:"description"}},[e._v("Նկարագրություն")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.description,expression:"form.description"}],staticClass:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",class:{"border-red-500":e.errors.description},attrs:{id:"description",rows:"3",placeholder:"Մուտքագրեք ապրանքի նկարագրությունը"},domProps:{value:e.form.description},on:{input:function(r){r.target.composing||e.$set(e.form,"description",r.target.value)}}}),e._v(" "),e.errors.description?r("p",{staticClass:"mt-1 text-sm text-red-600"},[e._v("\n        "+e._s(e.errors.description)+"\n      ")]):e._e()]),e._v(" "),r("div",[r("label",{staticClass:"block text-sm font-medium text-gray-700 dark:text-gray-300",attrs:{for:"price"}},[e._v("Արժեք (դրամ)")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.price,expression:"form.price",modifiers:{number:!0}}],staticClass:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",class:{"border-red-500":e.errors.price},attrs:{id:"price",type:"number",min:"0",step:"1",placeholder:"Մուտքագրեք ապրանքի արժեքը"},domProps:{value:e.form.price},on:{input:function(r){r.target.composing||e.$set(e.form,"price",e._n(r.target.value))},blur:function(r){return e.$forceUpdate()}}}),e._v(" "),e.errors.price?r("p",{staticClass:"mt-1 text-sm text-red-600"},[e._v("\n        "+e._s(e.errors.price)+"\n      ")]):e._e()]),e._v(" "),r("div",[r("label",{staticClass:"block text-sm font-medium text-gray-700 dark:text-gray-300",attrs:{for:"image"}},[e._v("Հիմնական Պատկեր")]),e._v(" "),r("input",{staticClass:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-gray-300",attrs:{id:"image",type:"file",accept:"image/*"},on:{change:e.handleImageUpload}}),e._v(" "),e.errors.image?r("p",{staticClass:"mt-1 text-sm text-red-600"},[e._v("\n        "+e._s(e.errors.image)+"\n      ")]):e._e(),e._v(" "),e.imagePreview?r("div",{staticClass:"mt-4 flex justify-center"},[r("img",{staticClass:"w-32 h-32 sm:w-40 sm:h-40 object-cover rounded-lg border border-gray-200 dark:border-gray-600",attrs:{src:e.imagePreview,alt:"Image Preview"}})]):e._e()]),e._v(" "),r("div",[r("label",{staticClass:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e._v("Գալերեայի Պատկերներ")]),e._v(" "),r("div",{staticClass:"mt-1 flex flex-wrap gap-2"},[e._l(e.galleryPreviews,function(t,o){return r("div",{key:o,staticClass:"relative group"},[r("img",{staticClass:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-lg border border-gray-200 dark:border-gray-600",attrs:{src:t,alt:"Gallery image ".concat(o+1)}}),e._v(" "),r("button",{staticClass:"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",attrs:{type:"button"},on:{click:function(r){return e.removeGalleryImage(o)}}},[e._v("\n            ×\n          ")])])}),e._v(" "),r("label",{staticClass:"w-20 h-20 sm:w-24 sm:h-24 flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:border-blue-500 transition-colors",attrs:{for:"gallery"}},[r("span",{staticClass:"text-gray-400 dark:text-gray-500 text-2xl"},[e._v("+")]),e._v(" "),r("input",{staticClass:"hidden",attrs:{id:"gallery",type:"file",accept:"image/*",multiple:""},on:{change:e.handleGalleryUpload}})])],2),e._v(" "),e.errors.gallery?r("p",{staticClass:"mt-1 text-sm text-red-600"},[e._v("\n        "+e._s(e.errors.gallery)+"\n      ")]):e._e()]),e._v(" "),r("div",{staticClass:"flex flex-col sm:flex-row justify-end gap-3 sm:space-x-4 pt-4"},[r("button",{staticClass:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",attrs:{type:"button"},on:{click:function(r){return e.$router.push("/manager/products")}}},[e._v("\n        Չեղարկել\n      ")]),e._v(" "),r("button",{staticClass:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-blue-400 dark:bg-blue-500 dark:hover:bg-blue-600 dark:disabled:bg-blue-300",attrs:{type:"submit",disabled:e.isSubmitting}},[e._v("\n        "+e._s(e.isSubmitting?"Հաշվարկվում է...":"Ստեղծել")+"\n      ")])])])])},[],!1,null,"73abb915",null);r.default=component.exports}}]);