(window.webpackJsonp=window.webpackJsonp||[]).push([[78,11,12,13,14],{681:function(t,e,r){"use strict";r.r(e);r(18),r(78);var n={props:{search:{type:String,default:""}}},o=r(32),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col sm:flex-row items-center justify-between gap-3 mb-6"},[e("h1",{staticClass:"text-xl sm:text-2xl font-semibold"},[t._v("Հաճախորդներ")]),t._v(" "),e("div",{staticClass:"flex items-center gap-3 w-full sm:w-auto"},[e("div",{staticClass:"relative w-full sm:w-72"},[e("input",{staticClass:"w-full rounded-lg border px-3 py-2 pr-9",attrs:{type:"text",placeholder:"Որոնել հաճախորդ..."},domProps:{value:t.search},on:{input:function(e){return t.$emit("update:search",e.target.value)}}})]),t._v(" "),e("button",{staticClass:"inline-flex items-center gap-2 rounded-lg bg-blue-600 text-white px-4 py-2 hover:bg-blue-700",on:{click:function(e){return t.$emit("create")}}},[t._v("\n      Նոր հաճախորդ\n    ")])])])},[],!1,null,null,null);e.default=component.exports},682:function(t,e,r){"use strict";r.r(e);r(17);var n={props:{rows:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},submitting:{type:Boolean,default:!1}}},o=r(32),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white dark:bg-gray-800 shadow-xl rounded-xl overflow-hidden"},[e("div",{staticClass:"overflow-x-auto"},[e("table",{staticClass:"w-full text-sm text-left text-gray-700 dark:text-gray-200"},[t._m(0),t._v(" "),e("tbody",[t.loading?e("tr",[e("td",{staticClass:"px-6 py-6 text-center",attrs:{colspan:"5"}},[t._v("Բեռնում…")])]):t._e(),t._v(" "),t._l(t.rows,function(r){return e("tr",{key:r.id,staticClass:"bg-white dark:bg-gray-800 border-b hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",{staticClass:"px-6 py-3 font-medium"},[t._v(t._s(r.name))]),t._v(" "),e("td",{staticClass:"px-6 py-3"},[t._v(t._s(r.phone||"—"))]),t._v(" "),e("td",{staticClass:"px-6 py-3"},[t._v(t._s(r.address||"—"))]),t._v(" "),e("td",{staticClass:"px-6 py-3"},[e("span",{staticClass:"px-2 py-1 rounded-md text-xs font-medium",class:"legalEntity"===r.type?"bg-purple-100 text-purple-800":"bg-emerald-100 text-emerald-800"},[t._v("\n              "+t._s("legalEntity"===r.type?"Իրավաբանական անձ":"Ֆիզ․ անձ")+"\n            ")])]),t._v(" "),e("td",{staticClass:"px-6 py-3 text-right"},[e("button",{staticClass:"px-3 py-1 border rounded-lg mr-2",on:{click:function(e){return t.$emit("edit",r)}}},[t._v("\n              Խմբագրել\n            ")]),t._v(" "),e("button",{staticClass:"px-3 py-1 border rounded-lg text-red-600",on:{click:function(e){return t.$emit("delete",r)}}},[t._v("\n              Ջնջել\n            ")])])])})],2)])])])},[function(){var t=this,e=t._self._c;return e("thead",{staticClass:"text-xs uppercase bg-gray-100 dark:bg-gray-700"},[e("tr",[e("th",{staticClass:"px-6 py-3"},[t._v("Անուն")]),t._v(" "),e("th",{staticClass:"px-6 py-3"},[t._v("Հեռախոս")]),t._v(" "),e("th",{staticClass:"px-6 py-3"},[t._v("Հասցե")]),t._v(" "),e("th",{staticClass:"px-6 py-3"},[t._v("Կարգավիճակ")]),t._v(" "),e("th",{staticClass:"px-6 py-3 w-32 text-right"},[t._v("Գործողություններ")])])])}],!1,null,null,null);e.default=component.exports},717:function(t,e,r){"use strict";r.r(e);r(23),r(49),r(17),r(8),r(24),r(39),r(40),r(27),r(30);var n=r(15);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){Object(n.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var c={props:{visible:Boolean,client:Object,submitting:Boolean,errors:{type:Object,default:function(){return{}}},globalError:{type:String,default:""}},data:function(){return{form:{name:"",phone:"",address:"",type:"",email:"",password:"",password_confirmation:"",company_name:"",AVC:"",accountant:""}}},computed:{isEdit:function(){return!!this.client}},watch:{client:{handler:function(t){var e;t?this.form={name:t.name||"",phone:t.phone||"",address:t.address||"",type:t.type||"",company_name:t.company_name||"",AVC:t.AVC||"",accountant:t.accountant||"",email:(null===(e=t.user)||void 0===e?void 0:e.email)||"",password:"",password_confirmation:""}:this.resetForm()},immediate:!0,deep:!0}},methods:{resetForm:function(){Object.assign(this.$data.form,{name:"",phone:"",address:"",type:"",email:"",password:"",password_confirmation:"",company_name:"",AVC:"",accountant:""})},submit:function(){var t,e,data=l(l({},this.form),{},{type:this.form.type||"physPerson"});this.$emit("submit",{isEdit:this.isEdit,id:(null===(t=this.client)||void 0===t?void 0:t.user_id)||(null===(e=this.client)||void 0===e||null===(e=e.user)||void 0===e?void 0:e.id),data:data})}}},d=r(32),component=Object(d.a)(c,function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"fixed inset-0 bg-black/40 flex items-center justify-center z-[1000]",on:{click:function(e){return e.target!==e.currentTarget?null:t.$emit("close")}}},[e("div",{staticClass:"bg-white p-6 rounded-lg w-full max-w-4xl max-h-screen overflow-y-auto"},[e("h2",{staticClass:"text-lg font-semibold mb-4"},[t._v("\n      "+t._s(t.isEdit?"Խմբագրել հաճախորդին":"Նոր հաճախորդ")+"\n    ")]),t._v(" "),t.globalError?e("div",{staticClass:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700"},[t._v("\n      "+t._s(t.globalError)+"\n    ")]):t._e(),t._v(" "),e("div",{staticClass:"grid grid-cols-2 gap-4"},[e("div",[t._m(0),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"border rounded w-full p-2",attrs:{type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),t.errors.name?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n          "+t._s(t.errors.name[0])+"\n        ")]):t._e()]),t._v(" "),e("div",[t._m(1),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.phone,expression:"form.phone"}],staticClass:"border rounded w-full p-2",attrs:{type:"text"},domProps:{value:t.form.phone},on:{input:function(e){e.target.composing||t.$set(t.form,"phone",e.target.value)}}}),t._v(" "),t.errors.phone?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n          "+t._s(t.errors.phone[0])+"\n        ")]):t._e()]),t._v(" "),e("div",[e("label",{staticClass:"block mb-1"},[t._v("Հասցե")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"border rounded w-full p-2",attrs:{type:"text"},domProps:{value:t.form.address},on:{input:function(e){e.target.composing||t.$set(t.form,"address",e.target.value)}}}),t._v(" "),t.errors.address?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n          "+t._s(t.errors.address[0])+"\n        ")]):t._e()]),t._v(" "),e("div",[t._m(2),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"border rounded w-full p-2",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"type",e.target.multiple?r:r[0])}}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Ընտրել...")]),t._v(" "),e("option",{attrs:{value:"physPerson"}},[t._v("Ֆիզիկական անձ")]),t._v(" "),e("option",{attrs:{value:"legalEntity"}},[t._v("Իրավաբանական անձ")])]),t._v(" "),t.errors.type?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n          "+t._s(t.errors.type[0])+"\n        ")]):t._e()]),t._v(" "),"legalEntity"===t.form.type?[t._m(3),t._v(" "),e("div",[t._m(4),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.company_name,expression:"form.company_name"}],staticClass:"border rounded w-full p-2",attrs:{type:"text"},domProps:{value:t.form.company_name},on:{input:function(e){e.target.composing||t.$set(t.form,"company_name",e.target.value)}}}),t._v(" "),t.errors.company_name?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n            "+t._s(t.errors.company_name[0])+"\n          ")]):t._e()]),t._v(" "),e("div",[t._m(5),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.AVC,expression:"form.AVC"}],staticClass:"border rounded w-full p-2",attrs:{type:"text"},domProps:{value:t.form.AVC},on:{input:function(e){e.target.composing||t.$set(t.form,"AVC",e.target.value)}}}),t._v(" "),t.errors.AVC?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n            "+t._s(t.errors.AVC[0])+"\n          ")]):t._e()]),t._v(" "),e("div",{staticClass:"col-span-2"},[t._m(6),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.accountant,expression:"form.accountant"}],staticClass:"border rounded w-full p-2",attrs:{type:"text"},domProps:{value:t.form.accountant},on:{input:function(e){e.target.composing||t.$set(t.form,"accountant",e.target.value)}}}),t._v(" "),t.errors.accountant?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n            "+t._s(t.errors.accountant[0])+"\n          ")]):t._e()])]:t._e(),t._v(" "),t.isEdit?t._e():[t._m(7),t._v(" "),e("div",[t._m(8),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"border rounded w-full p-2",attrs:{type:"email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),t.errors.email?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n            "+t._s(t.errors.email[0])+"\n          ")]):t._e()]),t._v(" "),e("div",[t._m(9),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"border rounded w-full p-2",attrs:{type:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),t.errors.password?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n            "+t._s(t.errors.password[0])+"\n          ")]):t._e()]),t._v(" "),e("div",[t._m(10),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"border rounded w-full p-2",attrs:{type:"password"},domProps:{value:t.form.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.form,"password_confirmation",e.target.value)}}}),t._v(" "),t.errors.password_confirmation?e("p",{staticClass:"mt-1 text-xs text-red-600"},[t._v("\n            "+t._s(t.errors.password_confirmation[0])+"\n          ")]):t._e()])]],2),t._v(" "),e("div",{staticClass:"flex justify-end mt-6 gap-3"},[e("button",{staticClass:"px-4 py-2 border rounded-lg",on:{click:function(e){return t.$emit("close")}}},[t._v("\n        Չեղարկել\n      ")]),t._v(" "),e("button",{staticClass:"px-4 py-2 bg-blue-600 text-white rounded-lg",attrs:{disabled:t.submitting},on:{click:t.submit}},[t._v("\n        "+t._s(t.submitting?"Պահպանվում է...":t.isEdit?"Թարմացնել":"Ստեղծել")+"\n      ")])])])]):t._e()},[function(){var t=this,e=t._self._c;return e("label",{staticClass:"block mb-1"},[t._v("Անուն / Առաջնային անվանում\n          "),e("span",{staticClass:"text-red-600"},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"block mb-1"},[t._v("Հեռախոս "),e("span",{staticClass:"text-red-600"},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"block mb-1"},[t._v("Կարգավիճակ "),e("span",{staticClass:"text-red-600"},[t._v("*")])])},function(){var t=this._self._c;return t("div",{staticClass:"col-span-2 border-t pt-4 mt-4"},[t("h3",{staticClass:"text-md font-medium mb-3 text-gray-700"},[this._v("\n            Իրավաբանական անձի տվյալներ\n          ")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"block mb-1"},[t._v("Ընկերության անվանումը "),e("span",{staticClass:"text-red-600"},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"block mb-1"},[t._v("ՀՎՀՀ (ԱՎՃ) "),e("span",{staticClass:"text-red-600"},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"block mb-1"},[t._v("Հաշվապահի անունը "),e("span",{staticClass:"text-red-600"},[t._v("*")])])},function(){var t=this._self._c;return t("div",{staticClass:"col-span-2 border-t pt-4 mt-6"},[t("h3",{staticClass:"text-md font-medium mb-3 text-gray-700"},[this._v("\n            Մուտքի տվյալներ\n          ")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"block mb-1"},[t._v("Էլ․ փոստ "),e("span",{staticClass:"text-red-600"},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"block mb-1"},[t._v("Գաղտնաբառ "),e("span",{staticClass:"text-red-600"},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"block mb-1"},[t._v("Գաղտնաբառի կրկնություն "),e("span",{staticClass:"text-red-600"},[t._v("*")])])}],!1,null,null,null);e.default=component.exports},718:function(t,e,r){"use strict";r.r(e);var n={props:{item:Object,submitting:Boolean}},o=r(32),component=Object(o.a)(n,function(){var t=this,e=t._self._c;return t.item?e("div",{staticClass:"fixed inset-0 bg-black/50 flex items-center justify-center z-[1000]"},[e("div",{staticClass:"bg-white p-6 rounded-lg w-full max-w-sm"},[e("p",{staticClass:"mb-4 text-gray-800"},[t._v("Հաստատե՞լ ջնջումը")]),t._v(" "),e("div",{staticClass:"flex justify-end gap-3"},[e("button",{staticClass:"px-4 py-2 border rounded-lg",on:{click:function(e){return t.$emit("close")}}},[t._v("\n        Չեղարկել\n      ")]),t._v(" "),e("button",{staticClass:"px-4 py-2 bg-red-600 text-white rounded-lg",on:{click:function(e){return t.$emit("confirm")}}},[t._v("\n        "+t._s(t.submitting?"Կատարվում է...":"Ջնջել")+"\n      ")])])])]):t._e()},[],!1,null,null,null);e.default=component.exports},788:function(t,e,r){"use strict";r.r(e);r(24),r(39),r(40),r(27),r(30);var n=r(1),o=r(15),l=(r(9),r(23),r(38),r(17),r(8),r(52),r(96)),c=r(681),d=r(682),m=r(717),v=r(718);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach(function(e){Object(o.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var x={components:{ClientsToolbar:c.default,ClientsTable:d.default,ClientFormModal:m.default,ConfirmDelete:v.default},layout:"manager",middleware:["role-guard"],meta:{role:"manager"},data:function(){return{loading:!1,submitting:!1,isFormOpen:!1,selectedClient:null,deleteTarget:null,searchQuery:"",formErrors:{},formGlobalError:"",modalKey:0}},computed:_(_({},Object(l.c)("clients",["allClients"])),{},{filteredClients:function(){var q=(this.searchQuery||"").toLowerCase();return q?this.allClients.filter(function(t){return(t.name||"").toLowerCase().includes(q)||(t.phone||"").toLowerCase().includes(q)||(t.address||"").toLowerCase().includes(q)}):this.allClients}}),mounted:function(){this.loadClients()},methods:_(_({},Object(l.b)("clients",["fetchClients"])),{},{loadClients:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=2,t.fetchClients();case 2:return e.prev=2,t.loading=!1,e.finish(2);case 3:case"end":return e.stop()}},e,null,[[1,,2,3]])}))()},openCreate:function(){this.$can("clients.create")&&(this.selectedClient=null,this.formErrors={},this.formGlobalError="",this.modalKey=Date.now(),this.isFormOpen=!0)},openEdit:function(t){this.$can("clients.view")&&(this.selectedClient=t,this.formErrors={},this.formGlobalError="",this.modalKey=Date.now(),this.isFormOpen=!0)},closeForm:function(){this.isFormOpen=!1,this.selectedClient=null,this.formErrors={},this.formGlobalError=""},confirmDeleteClient:function(t){this.$can("clients.delete")&&(this.deleteTarget=t)},doDelete:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$can("clients.delete")){e.next=6;break}return t.submitting=!0,e.prev=1,e.next=2,t.$axios.delete("/api/clients/client/".concat(t.deleteTarget.id));case 2:return e.next=3,t.loadClients();case 3:e.next=5;break;case 4:e.prev=4,r=e.catch(1),t.$notify({text:r,type:"error"});case 5:return e.prev=5,t.submitting=!1,t.deleteTarget=null,e.finish(5);case 6:case"end":return e.stop()}},e,null,[[1,4,5,6]])}))()},handleSubmit:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark(function r(){var n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.$can("clients.create")){r.next=8;break}if(e.submitting=!0,e.formErrors={},e.formGlobalError="",r.prev=1,!t.isEdit){r.next=3;break}return r.next=2,e.$axios.put("/api/clients/client/".concat(t.id),t.data);case 2:r.next=4;break;case 3:return r.next=4,e.$axios.post("/api/clients/client",t.data);case 4:return r.next=5,e.loadClients();case 5:e.closeForm(),r.next=7;break;case 6:r.prev=6,o=r.catch(1),e.$notify({text:o,type:"error"}),o.response&&422===o.response.status?(e.formErrors=o.response.data.errors||{},e.formGlobalError=o.response.data.message||"Վավերացման սխալ է տեղի ունեցել"):e.formGlobalError=(null===(n=o.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||"Սերվերում սխալ է տեղի ունեցել, փորձեք ավելի ուշ";case 7:return r.prev=7,e.submitting=!1,r.finish(7);case 8:case"end":return r.stop()}},r,null,[[1,6,7,8]])}))()}})},h=r(32),component=Object(h.a)(x,function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mx-auto px-4 sm:px-6 lg:px-8 py-8"},[e("ClientsToolbar",{attrs:{search:t.searchQuery},on:{"update:search":function(e){t.searchQuery=e},create:t.openCreate}}),t._v(" "),t.$can("clients.view")?e("ClientsTable",{attrs:{rows:t.filteredClients,loading:t.loading,submitting:t.submitting},on:{edit:t.openEdit,delete:t.confirmDeleteClient}}):[e("p",{staticClass:"flex items-center justify-center gap-2 text-lg text-red-600 font-medium py-4 bg-red-50 rounded-xl border border-red-200"},[e("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"}})]),t._v("\n      Դուք չեք կարող դիտել ցանկը\n    ")])],t._v(" "),e("ClientFormModal",{key:t.modalKey,attrs:{visible:t.isFormOpen,client:t.selectedClient,submitting:t.submitting,errors:t.formErrors,"global-error":t.formGlobalError},on:{close:t.closeForm,submit:t.handleSubmit}}),t._v(" "),e("ConfirmDelete",{attrs:{item:t.deleteTarget,submitting:t.submitting},on:{close:function(e){t.deleteTarget=null},confirm:t.doDelete}}),t._v(" "),e("notifications")],2)},[],!1,null,null,null);e.default=component.exports;installComponents(component,{ClientsToolbar:r(681).default,ClientsTable:r(682).default})}}]);