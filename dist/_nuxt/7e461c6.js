(window.webpackJsonp=window.webpackJsonp||[]).push([[41,11,17,20,21,26],{388:function(e,t,r){"use strict";r.r(t);r(242);var l={name:"InputWithLabels",props:{id:{type:String,default:""},label:{type:String,default:""},type:{type:String,default:"text"},value:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},classes:{type:String,default:""},plaseholder:{type:String,default:""}}},n=r(15),component=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative"},[t("span",{staticClass:"absolute start-0 bottom-3 text-gray-500 dark:text-gray-400"},[e._t("label_svg")],2),e._v(" "),t("input",{staticClass:"block py-2.5 ps-8 pe-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",class:e.classes,attrs:{id:e.id,type:e.type,disabled:e.disabled,plaseholder:e.plaseholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),t("label",{staticClass:"absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform scale-75 top-3 left-6 origin-[0] peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-focus:scale-75 peer-focus:-translate-y-6",attrs:{for:e.id}},[e._v("\n    "+e._s(e.label)+"\n  ")]),e._v(" "),t("span",{staticClass:"absolute end-2 bottom-4 text-gray-500 dark:text-gray-400"},[e._t("label_back")],2)])}),[],!1,null,null,null);t.default=component.exports},390:function(e,t,r){"use strict";r.r(t);r(33),r(52),r(20),r(12),r(242);var l={props:{label:{type:String,default:""},value:{type:[Number,Object,String],default:null},name:{type:String,default:""},dataValue:{type:[Array,Object],default:function(){return[]}}},data:function(){return{selectValue:this.value}},watch:{selectValue:function(e){this.$emit("input",e)}}},n=r(15),component=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("div",[e.label?t("label",{staticClass:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",attrs:{for:e.name}},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),e._v(" "),t("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.selectValue,expression:"selectValue"}],staticClass:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",attrs:{id:e.name,name:e.name},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectValue=t.target.multiple?r:r[0]}}},"select",e.$attrs,!1),e._l(e.dataValue,(function(data,r){return t("option",{key:r,staticClass:"first-letter:lowercase",domProps:{value:data}},[e._v("\n      "+e._s(data.name)+"\n    ")])})),0),e._v(" "),e.dataValue&&0!==e.dataValue.length?e._e():t("p",{staticClass:"mt-2 text-sm text-red-500"},[e._v("\n    Տվյալներ չկան։\n  ")])])}),[],!1,null,null,null);t.default=component.exports},396:function(e,t,r){"use strict";r.r(t);r(242);var l={props:{label:{type:String,default:""},value:{type:String,default:""},for_LAbel:{type:String,default:""},textarea_id:{type:String,default:""},rows:{type:Number,default:4},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1}}},n=r(15),component=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("label",{staticClass:"text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1",attrs:{for:e.for_LAbel}},[e._v(e._s(e.label))]),e._v(" "),t("textarea",{staticClass:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",attrs:{id:e.textarea_id,rows:e.rows,placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,"2bf44f05",null);t.default=component.exports},398:function(e,t,r){"use strict";var l=r(3),n=r(243).trim;l({target:"String",proto:!0,forced:r(399)("trim")},{trim:function(){return n(this)}})},399:function(e,t,r){"use strict";var l=r(98).PROPER,n=r(5),o=r(244);e.exports=function(e){return n((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||l&&o[e].name!==e}))}},414:function(e,t,r){var content=r(426);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(35).default)("83321030",content,!0,{sourceMap:!1})},416:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var l=r(126);var n=r(166),o=r(100);function c(e){return function(e){if(Array.isArray(e))return Object(l.a)(e)}(e)||Object(n.a)(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},425:function(e,t,r){"use strict";r(414)},426:function(e,t,r){var l=r(34)((function(i){return i[1]}));l.push([e.i,".transition-colors[data-v-52d91962]{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.sticky[data-v-52d91962]{position:sticky;z-index:10}",""]),l.locals={},e.exports=l},468:function(e,t,r){"use strict";r.r(t);var l={name:"CreateByEditing",props:{openModal:{type:Boolean,default:!1},successButton:{type:String,default:"Շարունակել"},cancelButton:{type:String,default:"Խմբագրել"},openFilesButton:{type:String,default:"Ընտրել ֆայլը"},isSuccsess:{type:Boolean,default:!1}}},n=r(15),component=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col items-center w-full p-6 bg-white rounded-xl shadow-lg"},[t("h2",{staticClass:"text-center text-neutral-700 font-sans italic text-xl my-6 font-bold"},[e._v("\n    Ընտրել ծածկագիրը\n  ")]),e._v(" "),t("div",{staticClass:"w-full grid grid-cols-1 sm:grid-cols-2 gap-12 items-center"},[t("div",{staticClass:"flex flex-col"},[e._t("pmpGroup")],2),e._v(" "),t("div",{staticClass:"flex flex-col"},[e._t("pmpName")],2)]),e._v(" "),t("div",{staticClass:"w-full grid grid-cols-1 sm:grid-cols-2 gap-12 items-center my-3"},[t("div",{staticClass:"flex flex-col w-full"},[e._t("finishDate")],2),e._v(" "),t("div",{staticClass:"flex flex-col w-full"},[e._t("quantity")],2)]),e._v(" "),t("div",{staticClass:"flex flex-col w-full"},[e._t("description")],2),e._v(" "),t("div",[t("button",{staticClass:"mt-8 py-3 px-10 bg-blue-500 rounded-full text-white font-semibold hover:bg-blue-600 transition-transform transform hover:scale-105",on:{click:function(t){return e.$emit("openFiles")}}},[e._v("\n      "+e._s(e.openFilesButton)+"\n    ")])])])}),[],!1,null,null,null);t.default=component.exports},469:function(e,t,r){"use strict";r.r(t);r(80),r(20),r(97);var l=r(416),n=r(36);r(39),r(51),r(45),r(33),r(409),r(52),r(410),r(50),r(77),r(78),r(12),r(440),r(25),r(441),r(442),r(443),r(444),r(445),r(446),r(447),r(448),r(449),r(450),r(451),r(452),r(453),r(454),r(455),r(456),r(44),r(30);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,l)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={name:"ShowFiles",props:{pmps:{type:Object,default:function(){return{exists:!1}}},factories:{type:Array,default:function(){return[]}}},data:function(){return{selectedFactory:null,selectedFiles:[]}},computed:{factoriesWithCount:function(){var e=this;return this.factories.map((function(t){var r=e.pmps.exists?e.pmps.pmp.files.filter((function(e){return e.path.includes("/".concat(t.value,"/"))})).length:0;return c(c({},t),{},{fileCount:r})}))},allSelected:function(){var e=this;if(!this.pmps.exists||!this.selectedFactory)return!1;var t=this.pmps.pmp.remote_number.flatMap((function(t){return e.getFactoryFiles(t.id)}));return t.length>0&&this.selectedFiles.length===t.length}},methods:{selectFactory:function(e){this.selectedFactory=e,this.selectedFiles=[]},getFactoryFiles:function(e){var t=this;return this.pmps.exists?this.pmps.pmp.files.filter((function(r){var l=r.path.includes("/".concat(t.selectedFactory.value,"/"));return r.remote_number_id===e&&l})):[]},toggleFileSelection:function(e){this.selectedFiles.includes(e)?this.selectedFiles=this.selectedFiles.filter((function(t){return t!==e})):this.selectedFiles.push(e)},toggleSelectAll:function(){var e=this;if(this.allSelected)this.selectedFiles=[];else{var t=this.pmps.pmp.remote_number.flatMap((function(t){return e.getFactoryFiles(t.id).map((function(e){return e.id}))}));this.selectedFiles=Object(l.a)(new Set(t))}},submitSelectedFiles:function(){var e=this,t={};this.pmps.pmp.files.forEach((function(r){e.selectedFiles.includes(r.id)&&(t[r.factory_id]||(t[r.factory_id]=[]),t[r.factory_id].push(r.id))})),Object.keys(t).forEach((function(r){var data={user_id:e.$parent.selectedClient.id,creator_id:e.$auth.user.id,name:"".concat(e.$parent.selectedPmp.group,".").concat(e.$parent.selectedPmpRemoteNumber),description:e.$parent.description,quantity:e.$parent.quantity,status:"pending",finish_date:e.$parent.finishDate,remote_number_id:e.$parent.remote_number_id,pmp_id:e.$parent.selectedPmp.id,link_existing_files:!0,factory_id:r,selected_files:t[r]};e.$emit("factory-files-selected",data)})),this.$emit("back")},goBack:function(){this.$emit("back")}}},m=(r(425),r(15)),component=Object(m.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-4 bg-white rounded-lg shadow-md"},[e.selectedFactory?t("div",[t("button",{staticClass:"mb-4 flex items-center text-blue-600 hover:text-blue-800",on:{click:function(t){e.selectedFactory=null}}},[t("svg",{staticClass:"h-5 w-5 mr-1",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"}})]),e._v("\n      Վերադառնալ արտադրամասերի ցանկին\n    ")]),e._v(" "),e.pmps.exists?t("div",{staticClass:"space-y-6"},[t("div",{staticClass:"p-4 bg-gray-50 rounded-md"},[t("h2",{staticClass:"text-2xl font-bold text-gray-800"},[e._v("\n          Խումբ: "+e._s(e.pmps.pmp.group)+" - "+e._s(e.pmps.pmp.group_name)+"\n        ")]),e._v(" "),t("div",{staticClass:"mt-2 flex items-center justify-between"},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"bg-green-100 px-3 py-1 rounded-full text-green-800 flex items-center"},[t("svg",{staticClass:"h-4 w-4 mr-1",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}})]),e._v(" "),t("span",{staticClass:"text-sm font-medium"},[e._v(e._s(e.selectedFactory.name))])])]),e._v(" "),t("button",{staticClass:"text-sm text-blue-600 hover:text-blue-800",on:{click:e.toggleSelectAll}},[e._v("\n            "+e._s(e.allSelected?"Չեղարկել բոլորը":"Ընտրել բոլորը")+"\n          ")])])]),e._v(" "),e._l(e.pmps.pmp.remote_number,(function(r){return t("div",{key:r.id,staticClass:"pl-4 border-l-4 border-blue-200"},[t("h3",{staticClass:"text-xl font-semibold text-gray-700"},[e._v("\n          Հեռակա համար: "+e._s(r.remote_number)+" -\n          "+e._s(r.remote_number_name)+"\n        ")]),e._v(" "),t("div",{staticClass:"mt-4 space-y-3"},[e._l(e.getFactoryFiles(r.id),(function(r){return t("div",{key:r.id,staticClass:"p-3 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",class:{"bg-blue-50 border border-blue-200":e.selectedFiles.includes(r.id)}},[t("div",{staticClass:"flex items-start"},[t("input",{staticClass:"mt-1 h-4 w-4 text-blue-600 rounded focus:ring-blue-500",attrs:{id:"file_"+r.id,type:"checkbox"},domProps:{checked:e.selectedFiles.includes(r.id)},on:{change:function(t){return e.toggleFileSelection(r.id)}}}),e._v(" "),t("div",{staticClass:"ml-3 flex-1"},[t("label",{staticClass:"cursor-pointer",attrs:{for:"file_"+r.id}},[t("p",{staticClass:"font-medium text-blue-600 flex items-center"},[t("svg",{staticClass:"h-5 w-5 mr-2 text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})]),e._v("\n                    "+e._s(r.original_name)+"\n                  ")]),e._v(" "),t("p",{staticClass:"text-sm text-gray-600 ml-7 mt-1"},[e._v("\n                    "+e._s(r.path)+"\n                  ")])])]),e._v(" "),t("div",{staticClass:"text-right"},[r.quantity?t("span",{staticClass:"block text-green-700"},[e._v("Քանակ: "+e._s(r.quantity))]):e._e(),e._v(" "),r.material_type?t("span",{staticClass:"block text-purple-700"},[e._v("Նյութ: "+e._s(r.material_type))]):e._e(),e._v(" "),r.thickness?t("span",{staticClass:"block text-orange-700"},[e._v("Հաստություն: "+e._s(r.thickness))]):e._e()])])])})),e._v(" "),0===e.getFactoryFiles(r.id).length?t("div",{staticClass:"p-3 text-center text-gray-500"},[e._v("\n            Ֆայլեր չեն գտնվել այս հեռակա համարի համար\n          ")]):e._e()],2)])}))],2):t("div",{staticClass:"p-4 text-center text-gray-500"},[e._v("\n      Տվյալներ չեն գտնվել\n    ")]),e._v(" "),e.selectedFiles.length>0?t("div",{staticClass:"mt-6 sticky bottom-4"},[t("button",{staticClass:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md transition-colors",on:{click:e.submitSelectedFiles}},[e._v("\n        Հաստատել ընտրությունը ("+e._s(e.selectedFiles.length)+")\n      ")])]):e._e()]):t("div",{staticClass:"space-y-4"},[t("h2",{staticClass:"text-xl font-bold text-gray-800 mb-4"},[e._v("Ընտրեք արտադրամաս")]),e._v(" "),t("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},e._l(e.factoriesWithCount,(function(r){return t("div",{key:r.id,staticClass:"p-4 border rounded-lg cursor-pointer transition-colors flex items-center justify-between",class:{"hover:border-blue-300":r.fileCount>0,"border-green-200 bg-green-50 hover:bg-green-100":r.fileCount>0,"border-gray-100 bg-gray-50 hover:bg-gray-100":0===r.fileCount,"opacity-60":0===r.fileCount},on:{click:function(t){r.fileCount>0&&e.selectFactory(r)}}},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"p-2 rounded-full mr-3",class:{"bg-green-100 text-green-600":r.fileCount>0,"bg-gray-100 text-gray-400":0===r.fileCount}},[t("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}})])]),e._v(" "),t("div",[t("h3",{staticClass:"font-semibold text-lg"},[e._v(e._s(r.name))]),e._v(" "),t("p",{staticClass:"text-gray-600 text-sm"},[e._v(e._s(r.value))])])]),e._v(" "),t("span",{staticClass:"px-2 py-1 rounded-full text-sm font-medium",class:{"bg-green-100 text-green-800":r.fileCount>0,"bg-gray-100 text-gray-400":0===r.fileCount}},[e._v("\n          "+e._s(r.fileCount)+" ֆայլ\n        ")])])})),0)])])}),[],!1,null,"52d91962",null);t.default=component.exports},553:function(e,t,r){"use strict";r.r(t);r(39),r(51),r(20),r(77),r(78),r(50),r(44);var l=r(0),n=r(36),o=(r(11),r(45),r(33),r(80),r(52),r(12),r(97),r(398),r(79)),c=r(388),d=r(390),m=r(468),f=r(469);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,l)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={components:{TextareaWithLabel:r(396).default,InputWithLabels:c.default,CreateByEditing:m.default,SelectWithLabel:d.default,ShowFiles:f.default},layout:"EngineerLayout",middleware:["engineer","roleRedirect"],data:function(){return{isSelectedClient:!1,isSelectPmpGroup:!1,isSelectPmpName:!1,factories:{ids:[],files:{}},selectedClient:null,pmpGroupSearch:"",pmpNameSearch:"",selectedPmp:null,selectedPmpRemoteNumber:null,quantity:0,description:"",finishDate:"",formSubmitted:!1,isSelectedLaser:!1,isSelectedBend:!1,fileNames:[],dxfUrl:"",files:[],selectedFactoryId:null,selectedFileIndex:null,remote_number_id:null,pmpGroupInput:null,isFiles:!1}},computed:v(v(v(v({},Object(o.c)("factory",["getFactory"])),Object(o.c)("users",["getUsers"])),Object(o.c)("pmp",["getPmpes","getPmp"])),{},{users:function(){return this.getUsers},filteredPmpGroups:function(){var e,t;if(!this.pmpGroupSearch)return(null===(e=this.getPmpes)||void 0===e?void 0:e.pmp)||[];var r=this.pmpGroupSearch.toLowerCase();return null===(t=this.getPmpes)||void 0===t?void 0:t.pmp.filter((function(e){return e.group.toLowerCase().includes(r)||e.group_name.toLowerCase().includes(r)}))},filteredPmpNames:function(){if(!this.selectedPmp)return[];var e=this.selectedPmp.remote_number||[];if(!this.pmpNameSearch)return e;var t=this.pmpNameSearch.toLowerCase();return e.filter((function(e){return e.remote_number.toLowerCase().includes(t)}))}}),watch:{selectedPmp:function(e){e||(this.selectedPmpRemoteNumber=null,this.pmpNameSearch="")}},mounted:function(){this.fetchUsers(),this.fetchFactory(),this.fetchPmps()},methods:v(v(v(v(v({},Object(o.b)("factory",["fetchFactory"])),Object(o.b)("users",["fetchUsers"])),Object(o.b)("engineer",["createNewOrder"])),Object(o.b)("pmp",["checkIfGroupExists","fetchPmps","checkPmpByRemoteNumber","checkIfGroupExists"])),{},{handleFactoryFilesSelected:function(data){var e=this;this.createNewOrder(data).then((function(){e.$notify({text:"Պատվերի մասը հաջողությամբ ստեղծվեց ".concat(data.selected_files.length," ֆայլով։"),duration:3e3,speed:1e3,position:"top",type:"success"})})).catch((function(t){var r;e.$notify({text:"Սխալ՝ ".concat((null===(r=t.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||t.message),duration:3e3,speed:1e3,position:"top",type:"error"})}))},selectPmpGroup:function(e){this.remote_number_id=e.id,this.selectedPmp=e,this.pmpGroupSearch=e.group,this.isSelectPmpGroup=!1},selectPmpRemoteNumber:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.selectedPmpRemoteNumber=e.remote_number,t.pmpNameSearch=e.remote_number,t.isSelectPmpName=!1,t.remote_number_id=e.id,r.next=6,t.checkPmpByRemoteNumber(e.id);case 6:case"end":return r.stop()}}),r)})))()},openFiles:function(){this.formSubmitted=!0,this.selectedClient&&this.selectedPmp&&this.selectedPmpRemoteNumber&&this.finishDate&&null!==this.quantity&&!(this.quantity<=0)&&this.description?this.isFiles=!0:this.$notify({text:"Խնդրում ենք լրացնել բոլոր պարտադիր դաշտերը։",duration:3e3,speed:1e3,position:"top",type:"error"})},filterPmpGroups:function(){this.isSelectPmpGroup=!0},filterPmpNames:function(){this.isSelectPmpName=!0},handleFilesSelected:function(e){this.selectedFiles=e.map((function(e){return e.id})),this.isFiles=!1,this.pmpFiles()},pmpFiles:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.formSubmitted=!0,e.selectedClient&&e.selectedPmp&&e.selectedPmpRemoteNumber&&e.finishDate&&null!==e.quantity&&!(e.quantity<=0)&&e.description&&""!==e.description.trim()&&e.selectedFiles&&0!==e.selectedFiles.length){t.next=4;break}return e.$notify({text:"Խնդրում ենք լրացնել բոլոր պարտադիր դաշտերը և ընտրել ֆայլեր։",duration:3e3,speed:1e3,position:"top",type:"error"}),t.abrupt("return");case 4:return data={user_id:e.selectedClient.id,creator_id:e.$auth.user.id,name:"".concat(e.selectedPmp.group,".").concat(e.selectedPmpRemoteNumber),description:e.description,quantity:e.quantity,status:"pending",finish_date:e.finishDate,remote_number_id:e.remote_number_id,pmp_id:e.selectedPmp.id,link_existing_files:!0,selected_files:e.selectedFiles},t.prev=5,t.next=8,e.createNewOrder(data);case 8:e.$notify({text:"Պատվերը հաջողությամբ ստեղծվեց ".concat(e.selectedFiles.length," ֆայլով։"),duration:3e3,speed:1e3,position:"top",type:"success"}),e.resetForm(),e.selectedFiles=[],e.$router.push("/engineer/orders"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),e.$notify({text:"Սխալ՝ ".concat((null===(r=t.t0.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||t.t0.message),duration:3e3,speed:1e3,position:"top",type:"error"});case 17:case"end":return t.stop()}}),t,null,[[5,14]])})))()},cancelBack:function(){this.$router.push("/engineer")},resetForm:function(){this.selectedClient=null,this.selectedPmp=null,this.selectedPmpRemoteNumber=null,this.pmpGroupSearch="",this.pmpNameSearch="",this.description="",this.finishDate=null,this.quantity=null,this.formSubmitted=!1}})},_=r(15),component=Object(_.a)(y,(function(){var e,t,r,l,n=this,o=n._self._c;return o("div",{staticClass:"container flex flex-col"},[o("h1",{staticClass:"text-3xl font-sans italic leading-6 my-6 text-start mx-4"},[n._v("\n    Ստեղծել նոր պատվեր խմբագրելով\n  ")]),n._v(" "),n.isFiles?o("div",[o("ShowFiles",{attrs:{pmps:n.getPmp,factories:n.getFactory},on:{"files-selected":n.handleFilesSelected,"factory-files-selected":n.handleFactoryFilesSelected,back:function(e){n.isFiles=!1}}})],1):o("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full mt-12"},[o("div",{staticClass:"w-full h-full ml-auto mr-4 p-6 bg-white rounded-xl shadow-lg"},[o("select-with-label",{class:{"border-red-600":n.formSubmitted&&!n.selectedClient},attrs:{"data-value":n.users,label:"Ընտրել հաճախորդ"},model:{value:n.selectedClient,callback:function(e){n.selectedClient=e},expression:"selectedClient"}}),n._v(" "),o("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-8 my-12"},[o("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"name",value:null===(e=n.selectedClient)||void 0===e?void 0:e.name,label:"Անուն",type:"text",disabled:!0}}),n._v(" "),o("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"phone",value:null===(t=n.selectedClient)||void 0===t||null===(t=t.client)||void 0===t?void 0:t.phone,label:"Հեռախոսահամար",type:"text",disabled:!0}}),n._v(" "),o("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"email",value:null===(r=n.selectedClient)||void 0===r?void 0:r.email,label:"Էլ․ փոստ",type:"text",disabled:!0}}),n._v(" "),o("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"address",value:null===(l=n.selectedClient)||void 0===l||null===(l=l.client)||void 0===l?void 0:l.address,label:"Հասցե",type:"text",disabled:!0}})],1)],1),n._v(" "),o("div",{staticClass:"w-full"},[o("create-by-editing",{attrs:{"open-files-button":"Ընտրել ֆայլերը","success-button":"Հաստատել","cancel-button":"Չեղարկել"},on:{cancelButton:n.cancelBack,openFiles:n.openFiles},scopedSlots:n._u([{key:"pmpGroup",fn:function(){return[o("div",{staticClass:"relative shadow-md rounded-lg p-3 pt-5"},[o("label",{staticClass:"block text-sm font-medium text-gray-600 mb-1",attrs:{for:"pmpGroup"}},[n._v("\n              Ծածկագիր\n            ")]),n._v(" "),o("div",{staticClass:"relative"},[o("input",{directives:[{name:"model",rawName:"v-model",value:n.pmpGroupSearch,expression:"pmpGroupSearch"}],staticClass:"w-full pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",attrs:{id:"pmpGroup",type:"text",placeholder:"Փնտրել ծածկագիր"},domProps:{value:n.pmpGroupSearch},on:{focus:function(e){n.isSelectPmpGroup=!0},input:[function(e){e.target.composing||(n.pmpGroupSearch=e.target.value)},n.filterPmpGroups]}}),n._v(" "),o("button",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",on:{click:function(e){n.isSelectPmpGroup=!n.isSelectPmpGroup}}},[o("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),n._v(" "),n.isSelectPmpGroup?o("div",{staticClass:"absolute z-10 mt-1 w-full bg-white rounded-md shadow-lg border border-gray-200 max-h-60 overflow-auto"},[o("ul",{staticClass:"py-1"},n._l(n.filteredPmpGroups,(function(e){return o("li",{key:e.id,staticClass:"px-4 py-2 hover:bg-blue-50 cursor-pointer text-gray-700",class:{"border-red-600":n.formSubmitted&&!n.selectedPmp},on:{click:function(t){return n.selectPmpGroup(e)}}},[n._v("\n                  "+n._s(e.group)+" : "+n._s(e.group_name)+"\n                ")])})),0)]):n._e()])]},proxy:!0},{key:"pmpName",fn:function(){return[o("div",{staticClass:"relative shadow-md rounded-lg p-3 pt-5"},[o("label",{staticClass:"block text-sm font-medium text-gray-600 mb-1",attrs:{for:"pmpRemoteNumberName"}},[n._v("\n              Ընտրել Անունը\n            ")]),n._v(" "),o("div",{staticClass:"relative"},[o("input",{directives:[{name:"model",rawName:"v-model",value:n.pmpNameSearch,expression:"pmpNameSearch"}],staticClass:"w-full pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",attrs:{id:"pmpRemoteNumberName",type:"text",placeholder:"Փնտրել անուն",disabled:!n.selectedPmp},domProps:{value:n.pmpNameSearch},on:{focus:function(e){n.isSelectPmpName=!!n.selectedPmp},input:[function(e){e.target.composing||(n.pmpNameSearch=e.target.value)},n.filterPmpNames]}}),n._v(" "),o("button",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",attrs:{disabled:!n.selectedPmp},on:{click:function(e){n.isSelectPmpName=!n.isSelectPmpName}}},[o("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),n._v(" "),n.isSelectPmpName&&n.selectedPmp?o("div",{staticClass:"absolute z-10 mt-1 w-full bg-white rounded-md shadow-lg border border-gray-200 max-h-60 overflow-auto"},[o("ul",{staticClass:"py-1"},n._l(n.filteredPmpNames,(function(e,t){return o("li",{key:t,staticClass:"px-4 py-2 hover:bg-blue-50 cursor-pointer text-gray-700",class:{"border-red-600":n.formSubmitted&&!n.selectedPmpRemoteNumber},on:{click:function(t){return n.selectPmpRemoteNumber(e)}}},[n._v("\n                  "+n._s(e.remote_number)+"\n                  "+n._s(e.remote_number_name)+"\n                ")])})),0)]):n._e()])]},proxy:!0},{key:"finishDate",fn:function(){return[o("input-with-labels",{staticClass:"shadow-md rounded-lg p-3 pt-5",class:{"border-red-600":n.formSubmitted&&!n.finishDate},attrs:{id:"finishDate",label:"Անհաժեշտ ավարտի ամսաթիվ",type:"datetime-local"},model:{value:n.finishDate,callback:function(e){n.finishDate=e},expression:"finishDate"}})]},proxy:!0},{key:"quantity",fn:function(){return[o("input-with-labels",{staticClass:"shadow-md rounded-lg p-3 pt-5",class:{"border-red-600":n.formSubmitted&&!n.quantity},attrs:{id:"quantity",label:"Քանակ",min:"1",type:"number"},model:{value:n.quantity,callback:function(e){n.quantity=n._n(e)},expression:"quantity"}})]},proxy:!0},{key:"description",fn:function(){return[o("textarea-with-label",{staticClass:"shadow-md rounded-lg p-3 pt-5",class:{"border-red-600":n.formSubmitted&&!n.description},attrs:{id:"description",label:"Նկարագրություն",type:"text"},model:{value:n.description,callback:function(e){n.description=e},expression:"description"}})]},proxy:!0}],null,!1,2596231147)})],1)]),n._v(" "),o("notifications")],1)}),[],!1,null,null,null);t.default=component.exports}}]);