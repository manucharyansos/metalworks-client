(window.webpackJsonp=window.webpackJsonp||[]).push([[42,17,20,21,28],{388:function(e,t,r){"use strict";r.r(t);r(242);var l={name:"InputWithLabels",props:{id:{type:String,default:""},label:{type:String,default:""},type:{type:String,default:"text"},value:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},classes:{type:String,default:""},plaseholder:{type:String,default:""}}},o=r(15),component=Object(o.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative"},[t("span",{staticClass:"absolute start-0 bottom-3 text-gray-500 dark:text-gray-400"},[e._t("label_svg")],2),e._v(" "),t("input",{staticClass:"block py-2.5 ps-8 pe-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",class:e.classes,attrs:{id:e.id,type:e.type,disabled:e.disabled,plaseholder:e.plaseholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),t("label",{staticClass:"absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform scale-75 top-3 left-6 origin-[0] peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-focus:scale-75 peer-focus:-translate-y-6",attrs:{for:e.id}},[e._v("\n    "+e._s(e.label)+"\n  ")]),e._v(" "),t("span",{staticClass:"absolute end-2 bottom-4 text-gray-500 dark:text-gray-400"},[e._t("label_back")],2)])}),[],!1,null,null,null);t.default=component.exports},390:function(e,t,r){"use strict";r.r(t);r(33),r(52),r(20),r(12),r(242);var l={props:{label:{type:String,default:""},value:{type:[Number,Object,String],default:null},name:{type:String,default:""},dataValue:{type:[Array,Object],default:function(){return[]}}},data:function(){return{selectValue:this.value}},watch:{selectValue:function(e){this.$emit("input",e)}}},o=r(15),component=Object(o.a)(l,(function(){var e=this,t=e._self._c;return t("div",[e.label?t("label",{staticClass:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",attrs:{for:e.name}},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),e._v(" "),t("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.selectValue,expression:"selectValue"}],staticClass:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",attrs:{id:e.name,name:e.name},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectValue=t.target.multiple?r:r[0]}}},"select",e.$attrs,!1),e._l(e.dataValue,(function(data,r){return t("option",{key:r,staticClass:"first-letter:lowercase",domProps:{value:data}},[e._v("\n      "+e._s(data.name)+"\n    ")])})),0),e._v(" "),e.dataValue&&0!==e.dataValue.length?e._e():t("p",{staticClass:"mt-2 text-sm text-red-500"},[e._v("\n    Տվյալներ չկան։\n  ")])])}),[],!1,null,null,null);t.default=component.exports},396:function(e,t,r){"use strict";r.r(t);r(242);var l={props:{label:{type:String,default:""},value:{type:String,default:""},for_LAbel:{type:String,default:""},textarea_id:{type:String,default:""},rows:{type:Number,default:4},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1}}},o=r(15),component=Object(o.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("label",{staticClass:"text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1",attrs:{for:e.for_LAbel}},[e._v(e._s(e.label))]),e._v(" "),t("textarea",{staticClass:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",attrs:{id:e.textarea_id,rows:e.rows,placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,"2bf44f05",null);t.default=component.exports},417:function(e,t,r){"use strict";r.r(t);var l={name:"CreateOrder",props:{openModal:{type:Boolean,default:!1},buttonText:{type:String,default:"Շարունակել"},editButton:{type:String,default:"Խմբագրել"}}},o=r(15),component=Object(o.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col items-center w-full p-6 bg-white rounded-xl shadow-lg"},[t("h2",{staticClass:"text-center text-neutral-700 font-sans italic text-xl my-6 font-bold"},[e._v("\n    Պատվերի մանրամասները\n  ")]),e._v(" "),t("div",{staticClass:"w-full grid grid-cols-1 sm:grid-cols-2 gap-12 items-center"},[t("div",{staticClass:"flex flex-col"},[e._t("pmpGroup")],2),e._v(" "),t("div",{staticClass:"flex flex-col"},[e._t("pmpName")],2)]),e._v(" "),t("div",{staticClass:"w-full grid grid-cols-1 sm:grid-cols-2 gap-12 items-center my-3"},[t("div",{staticClass:"flex flex-col w-full"},[e._t("finishDate")],2)]),e._v(" "),t("div",{staticClass:"flex flex-col w-full"},[e._t("detailsDesc")],2),e._v(" "),t("div",{staticClass:"flex flex-row w-full gap-6 justify-end"},[t("button",{staticClass:"mt-8 py-3 px-10 bg-green-500 rounded-full text-white font-semibold hover:bg-green-600 transition-transform transform hover:scale-105",on:{click:function(t){return e.$emit("addButton")}}},[e._v("\n      "+e._s(e.buttonText)+"\n    ")]),e._v(" "),t("button",{staticClass:"mt-8 py-3 px-10 bg-green-500 rounded-full text-white font-semibold hover:bg-green-600 transition-transform transform hover:scale-105",on:{click:function(t){return e.$emit("editButton")}}},[e._v("\n      "+e._s(e.editButton)+"\n    ")])])])}),[],!1,null,null,null);t.default=component.exports},439:function(e,t,r){var content=r(494);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(35).default)("63b1ecc8",content,!0,{sourceMap:!1})},493:function(e,t,r){"use strict";r(439)},494:function(e,t,r){var l=r(34)((function(i){return i[1]}));l.push([e.i,".container[data-v-a1eb2a3e]{padding:1rem}.show_file_section[data-v-a1eb2a3e],.show_files_name[data-v-a1eb2a3e]{border:1px solid #ccc;padding:1rem}.cursor-pointer[data-v-a1eb2a3e]{cursor:pointer}ol[data-v-a1eb2a3e]{list-style-type:decimal}",""]),l.locals={},e.exports=l},544:function(e,t,r){"use strict";r.r(t);r(39),r(51),r(20),r(77),r(78),r(50),r(44);var l=r(0),o=r(36),n=(r(11),r(45),r(33),r(80),r(12),r(97),r(79)),c=r(390),d=r(396),m=r(417);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,l)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={components:{InputWithLabels:r(388).default,CreateOrder:m.default,TextareaWithLabel:d.default,SelectWithLabel:c.default},layout:"EngineerLayout",middleware:["engineer","roleRedirect"],data:function(){return{isSelectedClient:!1,isSelectPmpGroup:!1,isSelectPmpName:!1,factories:{ids:[],files:{}},selectedClient:null,pmpGroupSearch:"",pmpNameSearch:"",selectedPmp:null,selectedPmpRemoteNumber:null,quantity:0,description:"",finishDate:"",formSubmitted:!1,isSelectedLaser:!1,isSelectedBend:!1,fileNames:[],dxfUrl:"",files:[],selectedFactoryId:null,selectedFileIndex:null,remote_number_id:null,pmpGroupInput:null,isFiles:!1}},computed:h(h(h(h({},Object(n.c)("factory",["getFactory"])),Object(n.c)("users",["getUsers"])),Object(n.c)("pmp",["getPmpes","getPmp"])),{},{users:function(){return this.getUsers},pnpGroup:function(){return this.getPmpes||[]},filteredPmpGroups:function(){var e,t;if(!this.pmpGroupSearch)return(null===(e=this.getPmpes)||void 0===e?void 0:e.pmp)||[];var r=this.pmpGroupSearch.toLowerCase();return null===(t=this.getPmpes)||void 0===t?void 0:t.pmp.filter((function(e){return e.group.toLowerCase().includes(r)||e.group_name.toLowerCase().includes(r)}))},filteredPmpNames:function(){if(!this.selectedPmp)return[];var e=this.selectedPmp.remote_number||[];if(!this.pmpNameSearch)return e;var t=this.pmpNameSearch.toLowerCase();return e.filter((function(e){return e.remote_number.toLowerCase().includes(t)}))}}),watch:{selectedPmp:function(e){e||(this.selectedPmpRemoteNumber=null,this.pmpNameSearch="")}},mounted:function(){this.fetchUsers(),this.fetchFactory(),this.fetchPmps()},methods:h(h(h(h(h({},Object(n.b)("factory",["fetchFactory"])),Object(n.b)("users",["fetchUsers"])),Object(n.b)("engineer",["createNewOrder"])),Object(n.b)("pmp",["checkIfGroupExists","fetchPmps","checkIfGroupNameExists","checkIfGroupExists"])),{},{selectPmpGroup:function(e){this.remote_number_id=e.id,this.selectedPmp=e,this.pmpGroupSearch=e.group,this.isSelectPmpGroup=!1},selectPmpRemoteNumber:function(e){this.selectedPmpRemoteNumber=e.remote_number,this.pmpNameSearch=e.remote_number,this.isSelectPmpName=!1,this.remote_number_id=e.id},filterPmpGroups:function(){this.isSelectPmpGroup=!0},filterPmpNames:function(){this.isSelectPmpName=!0},createEditing:function(){this.$router.push("/engineer/orders/create/editing")},pmpFiles:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.formSubmitted=!0,e.selectedClient&&e.selectedPmp&&e.selectedPmpRemoteNumber&&e.description&&e.finishDate){t.next=4;break}return e.$notify({text:"Խնդրում ենք լրացնել բոլոր պարտադիր դաշտերը։",duration:3e3,speed:1e3,position:"top",type:"error"}),t.abrupt("return");case 4:return data={user_id:e.selectedClient.id,creator_id:e.$auth.user.id,name:"".concat(e.selectedPmp.group,".").concat(e.selectedPmpRemoteNumber),description:e.description,quantity:0,status:"pending",finish_date:e.finishDate,remote_number_id:e.remote_number_id,pmp_id:e.selectedPmp.id,link_existing_files:!0},t.prev=5,t.next=8,e.createNewOrder(data);case 8:e.$notify({text:"Պատվերը հաջողությամբ ստեղծվեց։",duration:3e3,speed:1e3,position:"top",type:"success"}),e.resetForm(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e.$notify({text:"Սխալ՝ ".concat((null===(r=t.t0.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||t.t0.message),duration:3e3,speed:1e3,position:"top",type:"error"});case 15:case"end":return t.stop()}}),t,null,[[5,12]])})))()},resetForm:function(){this.selectedClient=null,this.selectedPmp=null,this.selectedPmpRemoteNumber=null,this.pmpGroupSearch="",this.pmpNameSearch="",this.description="",this.finishDate=null,this.formSubmitted=!1}})},y=(r(493),r(15)),component=Object(y.a)(v,(function(){var e,t,r,l,o=this,n=o._self._c;return n("div",{staticClass:"container flex flex-col"},[n("h1",{staticClass:"text-3xl font-sans italic leading-6 my-6 text-start mx-4"},[o._v("\n    Ստեղծել նոր պատվեր\n  ")]),o._v(" "),n("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full mt-12"},[n("div",{staticClass:"w-full h-full ml-auto mr-4 p-6 bg-white rounded-xl shadow-lg"},[n("select-with-label",{class:{"border-red-600":o.formSubmitted&&!o.selectedClient},attrs:{"data-value":o.users,label:"Ընտրել հաճախորդ"},model:{value:o.selectedClient,callback:function(e){o.selectedClient=e},expression:"selectedClient"}}),o._v(" "),n("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-8 my-12"},[n("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"name",value:null===(e=o.selectedClient)||void 0===e?void 0:e.name,label:"Անուն",type:"text",disabled:!0}}),o._v(" "),n("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"phone",value:null===(t=o.selectedClient)||void 0===t||null===(t=t.client)||void 0===t?void 0:t.phone,label:"Հեռախոսահամար",type:"text",disabled:!0}}),o._v(" "),n("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"email",value:null===(r=o.selectedClient)||void 0===r?void 0:r.email,label:"Էլ․ փոստ",type:"text",disabled:!0}}),o._v(" "),n("input-with-labels",{staticClass:"shadow-md rounded-lg p-5",attrs:{id:"address",value:null===(l=o.selectedClient)||void 0===l||null===(l=l.client)||void 0===l?void 0:l.address,label:"Հասցե",type:"text",disabled:!0}})],1)],1),o._v(" "),n("div",{staticClass:"w-full"},[n("create-order",{on:{addButton:o.pmpFiles,editButton:o.createEditing},scopedSlots:o._u([{key:"pmpGroup",fn:function(){return[n("div",{staticClass:"relative shadow-md rounded-lg p-3 pt-5"},[n("label",{staticClass:"block text-sm font-medium text-gray-600 mb-1",attrs:{for:"pmpGroup"}},[o._v("\n              Ծածկագիր\n            ")]),o._v(" "),n("div",{staticClass:"relative"},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.pmpGroupSearch,expression:"pmpGroupSearch"}],staticClass:"w-full pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",attrs:{id:"pmpGroup",type:"text",placeholder:"Փնտրել ծածկագիր"},domProps:{value:o.pmpGroupSearch},on:{focus:function(e){o.isSelectPmpGroup=!0},input:[function(e){e.target.composing||(o.pmpGroupSearch=e.target.value)},o.filterPmpGroups]}}),o._v(" "),n("button",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",on:{click:function(e){o.isSelectPmpGroup=!o.isSelectPmpGroup}}},[n("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),o._v(" "),o.isSelectPmpGroup?n("div",{staticClass:"absolute z-10 mt-1 w-full bg-white rounded-md shadow-lg border border-gray-200 max-h-60 overflow-auto"},[n("ul",{staticClass:"py-1"},o._l(o.filteredPmpGroups,(function(e){return n("li",{key:e.id,staticClass:"px-4 py-2 hover:bg-blue-50 cursor-pointer text-gray-700",class:{"border-red-600":o.formSubmitted&&!o.selectedPmp},on:{click:function(t){return o.selectPmpGroup(e)}}},[o._v("\n                  "+o._s(e.group)+" : "+o._s(e.group_name)+"\n                ")])})),0)]):o._e()])]},proxy:!0},{key:"pmpName",fn:function(){return[n("div",{staticClass:"relative shadow-md rounded-lg p-3 pt-5"},[n("label",{staticClass:"block text-sm font-medium text-gray-600 mb-1",attrs:{for:"pmpRemoteNumberName"}},[o._v("\n              Ընտրել Անունը\n            ")]),o._v(" "),n("div",{staticClass:"relative"},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.pmpNameSearch,expression:"pmpNameSearch"}],staticClass:"w-full pl-3 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",attrs:{id:"pmpRemoteNumberName",type:"text",placeholder:"Փնտրել անուն",disabled:!o.selectedPmp},domProps:{value:o.pmpNameSearch},on:{focus:function(e){o.isSelectPmpName=!!o.selectedPmp},input:[function(e){e.target.composing||(o.pmpNameSearch=e.target.value)},o.filterPmpNames]}}),o._v(" "),n("button",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",attrs:{disabled:!o.selectedPmp},on:{click:function(e){o.isSelectPmpName=!o.isSelectPmpName}}},[n("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),o._v(" "),o.isSelectPmpName&&o.selectedPmp?n("div",{staticClass:"absolute z-10 mt-1 w-full bg-white rounded-md shadow-lg border border-gray-200 max-h-60 overflow-auto"},[n("ul",{staticClass:"py-1"},o._l(o.filteredPmpNames,(function(e,t){return n("li",{key:t,staticClass:"px-4 py-2 hover:bg-blue-50 cursor-pointer text-gray-700",class:{"border-red-600":o.formSubmitted&&!o.selectedPmpRemoteNumber},on:{click:function(t){return o.selectPmpRemoteNumber(e)}}},[o._v("\n                  "+o._s(e.remote_number)+" "+o._s(e.remote_number_name)+"\n                ")])})),0)]):o._e()])]},proxy:!0},{key:"finishDate",fn:function(){return[n("input-with-labels",{staticClass:"shadow-md rounded-lg p-3 pt-5",attrs:{id:"finishDate",label:"Անհաժեշտ ավարտի ամսաթիվ",type:"datetime-local"},model:{value:o.finishDate,callback:function(e){o.finishDate=e},expression:"finishDate"}})]},proxy:!0},{key:"detailsDesc",fn:function(){return[n("textarea-with-label",{staticClass:"w-full my-2 p-3 border border-gray-300 rounded-lg focus:ring-primary-600 focus:border-primary-600",class:{"border-red-500":!o.description&&o.formSubmitted},attrs:{placeholder:"Նկարագրություն",required:""},model:{value:o.description,callback:function(e){o.description=e},expression:"description"}})]},proxy:!0}])})],1)]),o._v(" "),n("notifications")],1)}),[],!1,null,"a1eb2a3e",null);t.default=component.exports}}]);