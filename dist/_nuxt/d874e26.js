(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{644:function(t,e,r){var content=r(679);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(57).default)("06c58b87",content,!0,{sourceMap:!1})},678:function(t,e,r){"use strict";r(644)},679:function(t,e,r){var n=r(56)(function(i){return i[1]});n.push([t.i,".custom-scroll[data-v-f37e96a6]::-webkit-scrollbar{width:6px}.custom-scroll[data-v-f37e96a6]::-webkit-scrollbar-track{background:transparent}.custom-scroll[data-v-f37e96a6]::-webkit-scrollbar-thumb{background-color:rgba(148,163,184,.7);border-radius:9999px}",""]),n.locals={},t.exports=n},685:function(t,e,r){"use strict";r.r(e);r(24),r(43),r(17),r(33),r(38),r(8),r(18),r(186),r(52),r(61);var n={name:"FactoryOrderDetailsPanel",components:{FileViewer:r(591).default},props:{details:{type:Object,required:!0},dxfUrl:{type:String,default:""}},computed:{totalFiles:function(){var t;return null!==(t=this.details)&&void 0!==t&&null!==(t=t.factory_orders)&&void 0!==t&&t.length?this.details.factory_orders.reduce(function(t,e){var r;return t+((null===(r=e.files)||void 0===r?void 0:r.length)||0)},0):0},deadlineBadgeClass:function(){switch(this.deadlineStatus){case"overdue":return"bg-red-50 text-red-800 dark:bg-red-900/30 dark:text-red-100";case"today":return"bg-orange-50 text-orange-800 dark:bg-orange-900/30 dark:text-orange-100";case"upcoming":return"bg-emerald-50 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-100";default:return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-100"}},deadlineStatus:function(){var t,e=null===(t=this.details)||void 0===t||null===(t=t.dates)||void 0===t?void 0:t.finish_date;if(!e)return"none";var dt=this.parseDate(e);if(!dt)return"none";var r=new Date;r.setHours(0,0,0,0);var n=new Date(dt);n.setHours(0,0,0,0);var l=Math.round((n.getTime()-r.getTime())/864e5);return l<0?"overdue":0===l?"today":"upcoming"},deadlineInfo:function(){var t,e=null===(t=this.details)||void 0===t||null===(t=t.dates)||void 0===t?void 0:t.finish_date;if(!e)return"";var dt=this.parseDate(e);if(!dt)return"";var r=new Date;r.setHours(0,0,0,0);var n=new Date(dt);n.setHours(0,0,0,0);var l=Math.round((n.getTime()-r.getTime())/864e5);return l>0?"մնացյալ ".concat(l," օր"):0===l?"վերջնաժամկետը այսօր է":"ավարտվել է ".concat(Math.abs(l)," օր առաջ")}},methods:{parseDate:function(t){try{return t?t.includes(" ")?new Date(t.replace(" ","T")):new Date(t):null}catch(t){return null}},fileUrl:function(path){var t;if(!path)return null;var e=(null===(t=this.$axios)||void 0===t||null===(t=t.defaults)||void 0===t?void 0:t.baseURL)||"";return"".concat(e,"/storage/").concat(path.replace(/\\/g,"/"))},isDXF:function(path){return(null==path?void 0:path.toLowerCase().endsWith(".dxf"))||!1},isPDF:function(path){return(null==path?void 0:path.toLowerCase().endsWith(".pdf"))||!1},onViewFile:function(t){this.$emit("view-file",t)},statusLabel:function(t){switch(t){case"confirmed":return"Հաստատված";case"canceled":return"Մերժված";case"date_changed":return"Ժամկետը փոփոխված է";case"finished":return"Ավարտված";default:return"Առանց կարգավիճակի"}},statusPillClass:function(t){switch(t){case"confirmed":return"bg-green-100 text-green-700 dark:bg-green-700/40 dark:text-green-100";case"canceled":return"bg-red-100 text-red-700 dark:bg-red-700/40 dark:text-red-100";case"date_changed":return"bg-orange-100 text-orange-700 dark:bg-orange-700/40 dark:text-orange-100";case"finished":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-700/40 dark:text-emerald-100";default:return"bg-gray-100 text-gray-600 dark:bg-gray-700/40 dark:text-gray-100"}}}},l=(r(678),r(32)),component=Object(l.a)(n,function(){var t,e,r,n,l,d=this,o=d._self._c;return o("div",{staticClass:"grid grid-cols-1 gap-6 lg:grid-cols-2"},[o("div",{staticClass:"flex items-center justify-center rounded-3xl border border-dashed border-gray-300 bg-white/80 p-5 shadow-sm dark:border-gray-700 dark:bg-gray-900/70"},[o("div",{staticClass:"w-full h-full max-w-md"},[d._m(0),d._v(" "),o("div",{staticClass:"relative flex min-h-[230px] h-[calc(100%-5rem)] items-center justify-center rounded-2xl bg-gray-100 shadow-inner dark:bg-gray-800"},[d.dxfUrl?o("div",{staticClass:"relative h-full w-full overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-900"},[o("FileViewer",{key:d.dxfUrl,attrs:{"dxf-url":d.dxfUrl}}),d._v(" "),o("button",{staticClass:"absolute right-3 top-3 rounded-full bg-black/50 px-2 py-1 text-[10px] font-semibold text-white hover:bg-black/70",on:{click:function(t){return d.$emit("close-dxf")}}},[d._v("\n            Փակել դիտումը\n          ")])],1):o("div",{staticClass:"flex flex-col items-center justify-center px-4 text-center text-xs text-gray-500 dark:text-gray-400"},[o("svg",{staticClass:"mb-2 h-9 w-9 text-gray-300 dark:text-gray-600",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"}})]),d._v("\n          DXF կամ PDF ֆայլի նախադիտումը կհայտնվի այստեղ\n        ")])])])]),d._v(" "),o("div",{staticClass:"space-y-5"},[o("div",{staticClass:"rounded-3xl bg-white p-5 shadow-sm ring-1 ring-gray-200/80 dark:bg-gray-800 dark:ring-gray-700"},[o("div",{staticClass:"mb-4 flex flex-wrap items-start justify-between gap-3"},[o("div",{staticClass:"space-y-1"},[o("h3",{staticClass:"flex items-center gap-2 text-base font-semibold text-gray-900 dark:text-white"},[d._v("\n            Առաջադրանքի մանրամասներ\n            "),null!==(t=d.details)&&void 0!==t&&null!==(t=t.order_number)&&void 0!==t&&t.number?o("span",{staticClass:"rounded-full bg-indigo-50 px-2 py-0.5 text-[10px] font-mono font-semibold text-indigo-700 dark:bg-indigo-600/20 dark:text-indigo-200"},[d._v("\n              "+d._s(d.details.order_number.number)+"\n            ")]):d._e()]),d._v(" "),o("p",{staticClass:"text-xs text-gray-500 dark:text-gray-400"},[d._v("\n            Ստեղծող՝\n            "),o("span",{staticClass:"font-medium text-gray-800 dark:text-gray-100"},[d._v("\n              "+d._s((null===(e=d.details)||void 0===e||null===(e=e.creator)||void 0===e?void 0:e.name)||"—")+"\n            ")])])]),d._v(" "),o("div",{staticClass:"flex flex-col items-end gap-2 text-[11px]"},[o("div",{staticClass:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-1 text-gray-700 dark:bg-gray-700 dark:text-gray-100"},[o("svg",{staticClass:"h-3 w-3",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"}})]),d._v(" "),o("span",{staticClass:"font-medium"},[d._v("Ստեղծման ամսաթիվ․")]),d._v(" "),o("span",[d._v(d._s((null===(r=d.details)||void 0===r?void 0:r.created_at)||"—"))])]),d._v(" "),null!==(n=d.details)&&void 0!==n&&null!==(n=n.dates)&&void 0!==n&&n.finish_date?o("div",{staticClass:"inline-flex items-center gap-2 rounded-full px-2 py-1",class:d.deadlineBadgeClass},[o("svg",{staticClass:"h-3 w-3",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m5-3a9 9 0 11-18 0 9 9 0 0118 0z"}})]),d._v(" "),o("span",{staticClass:"font-semibold"},[d._v("\n              Ավարտի ժամկետ․ "+d._s(d.$formatDate(d.details.dates.finish_date))+"\n            ")]),d._v(" "),d.deadlineInfo?o("span",{staticClass:"rounded-full bg-white/40 px-2 py-0.5 text-[10px] font-medium"},[d._v("\n              "+d._s(d.deadlineInfo)+"\n            ")]):d._e()]):o("div",{staticClass:"inline-flex items-center gap-1 rounded-full bg-yellow-50 px-2 py-1 text-[11px] font-medium text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200"},[d._v("\n            Ժամկետը չի նշված, անհրաժեշտ է հաշվի առնել։\n          ")])])]),d._v(" "),o("dl",{staticClass:"grid grid-cols-1 gap-4 text-sm text-gray-700 dark:text-gray-100 sm:grid-cols-2"},[o("div",[o("dt",{staticClass:"text-[11px] uppercase tracking-wide text-gray-400"},[d._v("\n            Անուն\n          ")]),d._v(" "),o("dd",{staticClass:"mt-1 font-medium"},[d._v("\n            "+d._s(d.details.name||"—")+"\n          ")])]),d._v(" "),o("div",{staticClass:"sm:col-span-2"},[o("dt",{staticClass:"text-[11px] uppercase tracking-wide text-gray-400"},[d._v("\n            Նկարագրություն\n          ")]),d._v(" "),o("dd",{staticClass:"mt-1 text-sm text-gray-700 dark:text-gray-300 break-words"},[d._v("\n            "+d._s(d.details.description||"Առանց նկարագրության")+"\n          ")])])])]),d._v(" "),null!==(l=d.details.factory_orders)&&void 0!==l&&l.length?o("div",{staticClass:"rounded-3xl bg-white p-5 shadow-sm ring-1 ring-gray-200/80 dark:bg-gray-800 dark:ring-gray-700"},[o("div",{staticClass:"mb-3 flex items-center justify-between gap-2"},[o("h4",{staticClass:"text-sm font-semibold text-gray-900 dark:text-white"},[d._v("\n          Ֆայլեր\n        ")]),d._v(" "),o("span",{staticClass:"rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-medium text-gray-600 dark:bg-gray-700 dark:text-gray-200"},[d._v("\n          "+d._s(d.totalFiles)+" ֆայլ\n        ")])]),d._v(" "),o("div",{staticClass:"max-h-[320px] space-y-3 overflow-y-auto pr-1 custom-scroll"},d._l(d.details.factory_orders,function(t){var e,r,n;return o("div",{key:t.id,staticClass:"rounded-2xl border border-gray-200 bg-gray-50/80 p-3 text-xs shadow-sm dark:border-gray-700 dark:bg-gray-900/60"},[o("div",{staticClass:"mb-2 flex flex-wrap items-center justify-between gap-2 text-[11px] text-gray-500 dark:text-gray-400"},[o("div",{staticClass:"flex items-center gap-2"},[o("span",{staticClass:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-indigo-500 text-[11px] font-bold text-white"},[d._v("\n                "+d._s((null===(e=t.factory)||void 0===e||null===(e=e.value)||void 0===e?void 0:e[0])||"F")+"\n              ")]),d._v(" "),o("div",[o("p",{staticClass:"font-medium text-gray-800 dark:text-gray-100"},[d._v("\n                  "+d._s((null===(r=t.factory)||void 0===r?void 0:r.name)||"Գործարան")+"\n                ")]),d._v(" "),o("p",{staticClass:"text-[10px] text-gray-400 dark:text-gray-500"},[d._v("\n                  "+d._s((null===(n=t.factory)||void 0===n?void 0:n.value)||"")+"\n                ")])])]),d._v(" "),o("div",{staticClass:"flex flex-wrap items-center gap-2"},[t.operator?o("span",{staticClass:"flex items-center gap-1"},[o("span",{staticClass:"text-gray-400"},[d._v("Օպերատոր․")]),d._v(" "),o("span",{staticClass:"font-medium text-gray-700 dark:text-gray-100"},[d._v("\n                  "+d._s(t.operator.name)+"\n                ")])]):d._e(),d._v(" "),t.status?o("span",{staticClass:"rounded-full px-2 py-0.5 text-[10px] font-semibold",class:d.statusPillClass(t.status)},[d._v("\n                "+d._s(d.statusLabel(t.status))+"\n              ")]):d._e()])]),d._v(" "),d._l(t.files,function(t){var e,r,n,l;return o("div",{key:t.id,staticClass:"mb-2 rounded-xl bg-white p-3 shadow-sm last:mb-0 dark:bg-gray-800"},[o("div",{staticClass:"mb-2 flex items-center justify-between gap-4"},[o("div",{staticClass:"flex min-w-0 flex-1 flex-col"},[o("p",{staticClass:"truncate text-xs font-semibold text-gray-900 dark:text-gray-50",attrs:{title:t.original_name}},[d._v("\n                  "+d._s(t.original_name)+"\n                ")]),d._v(" "),o("p",{staticClass:"mt-1 text-[11px] text-gray-500 dark:text-gray-400"},[d._v("\n                  "+d._s(t.path)+"\n                ")])]),d._v(" "),o("div",{staticClass:"flex flex-shrink-0 items-center gap-2"},[o("button",{staticClass:"text-xs font-medium text-blue-500 hover:text-blue-700",on:{click:function(e){return d.onViewFile(t.path)}}},[d._v("\n                  Դիտել\n                ")]),d._v(" "),o("button",{staticClass:"flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-1 text-xs font-semibold text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-600/20 dark:text-emerald-200 dark:hover:bg-emerald-600/30",class:{"text-black":"downloaded"===t.status},on:{click:function(e){return d.$emit("download-file",t)}}},[d._v("\n                  Ներբեռնել\n                  "),o("img",{staticClass:"h-4 w-4",attrs:{src:"/images/img.png",alt:""}})])])]),d._v(" "),o("div",{staticClass:"grid grid-cols-3 gap-2 text-[11px] text-gray-600 dark:text-gray-300"},[o("p",[o("span",{staticClass:"font-semibold"},[d._v("Քանակ․ ")]),d._v(" "),d.details.link_existing_files?o("span",{staticClass:"inline-flex items-center gap-1"},[o("span",{staticClass:"line-through text-gray-400"},[d._v("\n                    "+d._s(null!==(e=t.quantity)&&void 0!==e?e:"—")+"\n                  ")]),d._v(" "),o("span",{staticClass:"text-gray-400"},[d._v("→")]),d._v(" "),o("span",{staticClass:"font-bold text-green-600"},[d._v("\n                    "+d._s(null!==(r=null===(n=t.pivot)||void 0===n?void 0:n.quantity)&&void 0!==r?r:"—")+"\n                  ")])]):o("span",[d._v("\n                  "+d._s(null!==(l=t.quantity)&&void 0!==l?l:"—")+"\n                ")])]),d._v(" "),o("p",[o("span",{staticClass:"font-semibold"},[d._v("Նյութ․ ")]),d._v(" "),o("span",[d._v(d._s((null==t?void 0:t.material_type)||"—"))])]),d._v(" "),o("p",[o("span",{staticClass:"font-semibold"},[d._v("Հաստություն․ ")]),d._v(" "),o("span",[d._v(d._s((null==t?void 0:t.thickness)||"—"))])])])])})],2)}),0)]):o("div",{staticClass:"rounded-3xl bg-white p-5 text-sm text-gray-500 shadow-sm dark:bg-gray-800 dark:text-gray-300"},[d._v("\n      Ֆայլեր այս պատվերի համար առկա չեն։\n    ")])])])},[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-4 flex items-center justify-between gap-2"},[e("div",{staticClass:"flex items-center gap-2"},[e("div",{staticClass:"flex h-8 w-8 items-center justify-center rounded-full bg-indigo-500 text-xs font-bold text-white"},[t._v("\n            DXF\n          ")]),t._v(" "),e("h3",{staticClass:"text-sm font-semibold text-gray-800 dark:text-gray-100"},[t._v("\n            Ֆայլի դիտում\n          ")])]),t._v(" "),e("p",{staticClass:"text-[11px] text-gray-400 dark:text-gray-500"},[t._v("\n          DXF կամ PDF ֆայլ ընտրեք «Դիտել» կոճակով\n        ")])])}],!1,null,"f37e96a6",null);e.default=component.exports;installComponents(component,{FileViewer:r(591).default})}}]);