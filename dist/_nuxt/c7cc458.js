(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{574:function(t,e,r){"use strict";var o=r(4),n=r(405).trim;o({target:"String",proto:!0,forced:r(575)("trim")},{trim:function(){return n(this)}})},575:function(t,e,r){"use strict";var o=r(112).PROPER,n=r(6),l=r(406);t.exports=function(t){return n(function(){return!!l[t]()||"​᠎"!=="​᠎"[t]()||o&&l[t].name!==t})}},720:function(t,e,r){"use strict";r.r(e);r(23),r(49),r(17),r(8),r(574);var o={name:"WorkerFormModal",props:{visible:{type:Boolean,default:!1},worker:{type:Object,default:null},roles:{type:Array,default:function(){return[]}},factories:{type:Array,default:function(){return[]}},submitting:{type:Boolean,default:!1}},data:function(){return{form:{name:"",last_name:"",email:"",role_id:"",factory_id:null,phone:"",second_phone:"",address:"",password:"",password_confirmation:""}}},computed:{isEdit:function(){return!(!this.worker||!this.worker.id)}},watch:{visible:function(t){t?this.bootstrap():this.reset()}},methods:{bootstrap:function(){if(this.isEdit){var t,e,r,o,n,u=this.worker;this.form={name:(null==u?void 0:u.name)||"",last_name:(null==u||null===(t=u.worker)||void 0===t?void 0:t.last_name)||"",email:(null==u?void 0:u.email)||"",role_id:(null==u?void 0:u.role_id)||"",factory_id:null!==(e=null==u?void 0:u.factory_id)&&void 0!==e?e:null,phone:(null==u||null===(r=u.worker)||void 0===r?void 0:r.phone)||"",second_phone:(null==u||null===(o=u.worker)||void 0===o?void 0:o.second_phone)||"",address:(null==u||null===(n=u.worker)||void 0===n?void 0:n.address)||"",password:"",password_confirmation:""}}else this.reset()},reset:function(){this.form={name:"",last_name:"",email:"",role_id:"",factory_id:null,phone:"",second_phone:"",address:"",password:"",password_confirmation:""}},validate:function(){if(!this.form.name.trim())return"Անունը պարտադիր է";if(!this.form.email.trim())return"Էլ․ փոստը պարտադիր է";if(!this.form.role_id)return"Ընտրեք դեր";if(!this.form.phone.trim())return"Հեռախոսը պարտադիր է";if(!this.isEdit){if(!this.form.password)return"Գաղտնաբառը պարտադիր է";if(this.form.password.length<6)return"Գաղտնաբառը պետք է լինի ≥ 6 սիմվոլ";if(this.form.password!==this.form.password_confirmation)return"Գաղտնաբառերը չեն համընկնում"}return null},submit:function(){var t,e=this.validate();if(e)return alert(e);var r={name:this.form.name,last_name:this.form.last_name||null,email:this.form.email,role_id:this.form.role_id,factory_id:this.form.factory_id||null,type:"worker",phone:this.form.phone,second_phone:this.form.second_phone||null,address:this.form.address||null};this.isEdit||(r.password=this.form.password,r.password_confirmation=this.form.password_confirmation),this.$emit("submit",{payload:r,isEdit:this.isEdit,id:null===(t=this.worker)||void 0===t?void 0:t.id})}}},n=r(32),component=Object(n.a)(o,function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"fixed inset-0 z-[1100] bg-black/50 flex items-center justify-center p-4",on:{click:function(e){return e.target!==e.currentTarget?null:t.$emit("close")}}},[e("div",{staticClass:"w-full max-w-2xl bg-white rounded-2xl shadow-xl flex flex-col max-h-[90vh] overflow-hidden"},[e("div",{staticClass:"flex items-center justify-between px-5 py-4 border-b"},[e("h3",{staticClass:"text-lg font-semibold"},[t._v("\n        "+t._s(t.isEdit?"Խմբագրել աշխատակցին":"Ստեղծել նոր աշխատակից")+"\n      ")]),t._v(" "),e("button",{staticClass:"rounded-lg p-1 hover:bg-gray-100",on:{click:function(e){return t.$emit("close")}}},[t._v("\n        ✕\n      ")])]),t._v(" "),e("div",{staticClass:"px-5 py-4 overflow-y-auto"},[e("form",{staticClass:"space-y-4",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Անուն")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.name,expression:"form.name",modifiers:{trim:!0}}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Ազգանուն")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.last_name,expression:"form.last_name",modifiers:{trim:!0}}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"text"},domProps:{value:t.form.last_name},on:{input:function(e){e.target.composing||t.$set(t.form,"last_name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Էլ․ փոստ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.email,expression:"form.email",modifiers:{trim:!0}}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Դեր")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.role_id,expression:"form.role_id"}],staticClass:"w-full rounded-lg border px-3 py-2",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"role_id",e.target.multiple?r:r[0])}}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Ընտրել դեր")]),t._v(" "),t._l(t.roles,function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v("\n                "+t._s(r.value||r.name)+"\n              ")])})],2)]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Արտադրամաս")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.factory_id,expression:"form.factory_id"}],staticClass:"w-full rounded-lg border px-3 py-2",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"factory_id",e.target.multiple?r:r[0])}}},[e("option",{domProps:{value:null}},[t._v("— Չկցել —")]),t._v(" "),t._l(t.factories,function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v("\n                "+t._s(r.name)+"\n              ")])})],2)]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Հեռախոս")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.phone,expression:"form.phone",modifiers:{trim:!0}}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"text"},domProps:{value:t.form.phone},on:{input:function(e){e.target.composing||t.$set(t.form,"phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Երկրորդ հեռախոս")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.second_phone,expression:"form.second_phone",modifiers:{trim:!0}}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"text"},domProps:{value:t.form.second_phone},on:{input:function(e){e.target.composing||t.$set(t.form,"second_phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("div",{staticClass:"sm:col-span-2"},[e("label",{staticClass:"block text-sm mb-1"},[t._v("Հասցե")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.address,expression:"form.address",modifiers:{trim:!0}}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"text"},domProps:{value:t.form.address},on:{input:function(e){e.target.composing||t.$set(t.form,"address",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),t.isEdit?t._e():e("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Գաղտնաբառ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm mb-1"},[t._v("Գաղտնաբառի կրկնություն")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"w-full rounded-lg border px-3 py-2",attrs:{type:"password"},domProps:{value:t.form.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.form,"password_confirmation",e.target.value)}}})])])])]),t._v(" "),e("div",{staticClass:"px-5 py-4 border-t flex justify-end gap-3"},[e("button",{staticClass:"px-4 py-2 rounded-lg border",on:{click:function(e){return t.$emit("close")}}},[t._v("\n        Փակել\n      ")]),t._v(" "),e("button",{staticClass:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-400",attrs:{disabled:t.submitting},on:{click:t.submit}},[t._v("\n        "+t._s(t.submitting?"Պահպանում…":t.isEdit?"Պահպանել":"Ստեղծել")+"\n      ")])])])]):t._e()},[],!1,null,null,null);e.default=component.exports}}]);