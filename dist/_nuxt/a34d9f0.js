(window.webpackJsonp=window.webpackJsonp||[]).push([[73,37,40,41,49,50],{585:function(e,t,r){var content=r(596);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(57).default)("1f7604ca",content,!0,{sourceMap:!1})},586:function(e,t,r){"use strict";r.r(t);r(403);var n={name:"InputWithLabels",props:{id:{type:String,default:""},label:{type:String,default:""},type:{type:String,default:"text"},value:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},classes:{type:String,default:""},plaseholder:{type:String,default:""}}},l=r(32),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"relative"},[t("span",{staticClass:"absolute start-0 bottom-3 text-gray-500 dark:text-gray-400"},[e._t("label_svg")],2),e._v(" "),t("input",{staticClass:"block py-2.5 ps-8 pe-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",class:e.classes,attrs:{id:e.id,type:e.type,disabled:e.disabled,plaseholder:e.plaseholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),t("label",{staticClass:"absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform scale-75 top-3 left-6 origin-[0] peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-focus:scale-75 peer-focus:-translate-y-6",attrs:{for:e.id}},[e._v("\n    "+e._s(e.label)+"\n  ")]),e._v(" "),t("span",{staticClass:"absolute end-2 bottom-4 text-gray-500 dark:text-gray-400"},[e._t("label_back")],2)])},[],!1,null,null,null);t.default=component.exports},590:function(e,t,r){var content=r(626);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(57).default)("0fef53b3",content,!0,{sourceMap:!1})},595:function(e,t,r){"use strict";r(585)},596:function(e,t,r){var n=r(56)(function(i){return i[1]});n.push([e.i,".animate-fade-in[data-v-bb56fec0]{animation:fadeIn-bb56fec0 .3s ease-out}@keyframes fadeIn-bb56fec0{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}select[data-v-bb56fec0]::-ms-expand{display:none}",""]),n.locals={},e.exports=n},620:function(e,t,r){"use strict";r.r(t);r(23),r(49),r(17),r(8),r(403);var n={props:{displayField:{type:String,default:"name"},label:{type:String,default:""},value:{type:[Number,Object,String],default:null},name:{type:String,default:""},dataValue:{type:[Array,Object],default:function(){return[]}},placeholder:{type:String,default:""}},data:function(){return{selectValue:this.value,isOpen:!1}},watch:{value:function(e){this.selectValue=e},selectValue:function(e){this.$emit("input",e),this.$emit("change",e)}},mounted:function(){var e=this,select=this.$el.querySelector("select");select&&(select.addEventListener("focus",function(){return e.isOpen=!0}),select.addEventListener("blur",function(){return e.isOpen=!1}))}},l=(r(595),r(32)),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full"},[e.label?t("label",{staticClass:"block mb-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors",attrs:{for:e.name}},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),e._v(" "),t("div",{staticClass:"relative"},[t("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.selectValue,expression:"selectValue"}],staticClass:"appearance-none w-full px-4 py-2.5 pr-10 text-sm font-medium text-gray-900 bg-white border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:focus:ring-blue-500 transition-all duration-200 ease-in-out hover:border-gray-400 dark:hover:border-gray-500 disabled:opacity-60 disabled:cursor-not-allowed",attrs:{id:e.name,name:e.name,disabled:0===e.dataValue.length},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectValue=t.target.multiple?r:r[0]}}},"select",e.$attrs,!1),[t("option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v("\n        "+e._s(e.placeholder||"Ընտրեք տարբերակը")+"\n      ")]),e._v(" "),e._l(e.dataValue,function(r,n){return t("option",{key:n,staticClass:"text-sm",domProps:{value:r}},[e._v("\n        "+e._s("value"===e.displayField?r.value:r.name)+"\n      ")])})],2),e._v(" "),t("div",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"})]),e._v(" "),e.dataValue&&0!==e.dataValue.length?e._e():t("p",{staticClass:"mt-2 text-xs text-red-600 dark:text-red-400 animate-fade-in"},[e._v("\n    Տվյալներ չկան։\n  ")]),e._v(" "),e.$slots.helper?t("p",{staticClass:"mt-1.5 text-xs text-gray-500 dark:text-gray-400"},[e._t("helper")],2):e._e()])},[],!1,null,"bb56fec0",null);t.default=component.exports},625:function(e,t,r){"use strict";r(590)},626:function(e,t,r){var n=r(56)(function(i){return i[1]});n.push([e.i,".h-24.w-24[data-v-24d3eac8]{animation:pulse-24d3eac8 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes pulse-24d3eac8{0%,to{opacity:1}50%{opacity:.9}}",""]),n.locals={},e.exports=n},646:function(e,t,r){"use strict";r.r(t);var n={name:"PermissionDenied"},l=(r(625),r(32)),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100 px-4"},[t("div",{staticClass:"w-full max-w-md text-center"},[t("div",{staticClass:"mx-auto mb-8 flex h-24 w-24 items-center justify-center rounded-full bg-red-100/80 shadow-lg ring-8 ring-red-50/50"},[t("svg",{staticClass:"h-14 w-14 text-red-500",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}})])]),e._v(" "),t("h2",{staticClass:"mb-3 text-2xl font-bold text-gray-900 sm:text-3xl"},[e._v("\n      Արգելված է\n    ")]),e._v(" "),e._m(0),e._v(" "),t("button",{staticClass:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-6 py-3 font-medium text-white shadow-md transition-all duration-200 hover:bg-blue-700 hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-100 active:scale-95",on:{click:function(t){return e.$router.push("/engineer")}}},[t("svg",{staticClass:"h-5 w-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7 -7 7 -7"}})]),e._v("\n      Վերադառնալ\n    ")])])])},[function(){var e=this,t=e._self._c;return t("p",{staticClass:"mb-10 text-base leading-relaxed text-gray-600 sm:text-lg"},[e._v("\n      Դուք չունեք հասանելիություն։"),t("br"),e._v(" "),t("span",{staticClass:"font-medium text-gray-700"},[e._v("Խնդրում ենք դիմել ադմինիստրատորին")]),e._v("\n      օգնության համար։\n    ")])}],!1,null,"24d3eac8",null);t.default=component.exports},700:function(e,t,r){var content=r(755);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(57).default)("4b01740a",content,!0,{sourceMap:!1})},723:function(e,t,r){"use strict";r.r(t);var n={name:"CreateOrderForm",props:{isEditingMode:{type:Boolean,default:!1},successButton:{type:String,default:"Հաստատել"},cancelButton:{type:String,default:"Չեղարկել"},canProceedToFiles:{type:Boolean,default:!1},canSubmit:{type:Boolean,default:!1}},emits:["addButton","cancelButton","selectFromOtherFactory","back","backToFactories"]},l=r(32),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col items-center w-full p-5 md:p-6 bg-white/90 backdrop-blur rounded-2xl shadow-lg border border-white/60"},[t("div",{staticClass:"w-full grid grid-cols-1 sm:grid-cols-2 gap-6 items-start"},[t("div",{staticClass:"flex flex-col"},[e._t("pmpGroup")],2),e._v(" "),t("div",{staticClass:"flex flex-col"},[e._t("pmpName")],2)]),e._v(" "),t("div",{staticClass:"w-full grid grid-cols-1 sm:grid-cols-2 gap-6 items-start my-4"},[t("div",{staticClass:"flex flex-col w-full"},[e._t("finishDate")],2),e._v(" "),e.isEditingMode?t("div",{staticClass:"flex flex-col w-full"},[e._t("quantity")],2):e._e()]),e._v(" "),t("div",{staticClass:"flex flex-col w-full"},[e._t("description")],2),e._v(" "),t("div",{staticClass:"mt-6 w-full flex flex-wrap gap-3 md:gap-4 justify-between items-center"},[t("div",{staticClass:"mt-6 w-full flex flex-wrap justify-between items-center gap-4"},[t("button",{staticClass:"py-3 px-6 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-full transition-all flex items-center",attrs:{type:"button"},on:{click:function(t){return e.$emit("cancelButton")}}},[t("svg",{staticClass:"w-5 h-5 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0 9 9 0 01-18 0z"}})]),e._v("\n        "+e._s(e.cancelButton)+"\n      ")]),e._v(" "),t("div",{staticClass:"flex flex-row flex-wrap gap-3"},[t("button",{class:["py-3 px-6 rounded-full font-semibold transition-all flex items-center",e.canProceedToFiles?"bg-blue-600 hover:bg-blue-700 text-white shadow-md transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"],attrs:{disabled:!e.canProceedToFiles},on:{click:function(t){return e.$emit("selectFromOtherFactory")}}},[t("svg",{staticClass:"w-5 h-5 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"}})]),e._v("\n          Ընտրել ֆայլեր\n        ")]),e._v(" "),e.isEditingMode?e._e():t("button",{class:["py-3 px-6 rounded-full font-semibold transition-all flex items-center",e.canSubmit?"bg-emerald-500 hover:bg-emerald-600 text-white shadow-md transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"],attrs:{disabled:!e.canSubmit,type:"button"},on:{click:function(t){return e.$emit("addButton")}}},[t("svg",{staticClass:"w-5 h-5 mr-2",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"}})]),e._v("\n          "+e._s(e.successButton)+"\n        ")])])])])])},[],!1,null,null,null);t.default=component.exports},724:function(e,t,r){"use strict";r.r(t);r(403);var n={props:{label:{type:String,default:""},value:{type:String,default:""},for_LAbel:{type:String,default:""},textarea_id:{type:String,default:""},rows:{type:Number,default:4},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1}}},l=r(32),component=Object(l.a)(n,function(){var e=this,t=e._self._c;return t("div",[t("label",{staticClass:"text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1",attrs:{for:e.for_LAbel}},[e._v(e._s(e.label))]),e._v(" "),t("textarea",{staticClass:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",attrs:{id:e.textarea_id,rows:e.rows,placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])},[],!1,null,"2bf44f05",null);t.default=component.exports},754:function(e,t,r){"use strict";r(700)},755:function(e,t,r){var n=r(56)(function(i){return i[1]});n.push([e.i,".pmp-selector[data-v-1604939b]{position:relative}.min-h-screen[data-v-1604939b]{min-height:calc(100vh - 4rem)}.overflow-auto[data-v-1604939b]::-webkit-scrollbar{width:6px}.overflow-auto[data-v-1604939b]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.overflow-auto[data-v-1604939b]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px}.overflow-auto[data-v-1604939b]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.transition-all[data-v-1604939b]{transition:all .2s ease-in-out}.focus\\:ring-4[data-v-1604939b]:focus{box-shadow:0 0 0 3px rgba(59,130,246,.1)}",""]),n.locals={},e.exports=n},792:function(e,t,r){"use strict";r.r(t);r(24),r(43),r(23),r(49),r(17),r(8),r(39),r(40);var n=r(11),l=r(1),o=r(15),c=(r(9),r(33),r(79),r(38),r(403),r(116),r(27),r(599),r(52),r(25),r(600),r(601),r(602),r(603),r(604),r(605),r(606),r(607),r(608),r(609),r(610),r(611),r(612),r(613),r(614),r(615),r(30),r(26),r(96)),d=r(586),f=r(620),m=r(723),v=r(771),h=r(724);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){Object(o.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _={components:{PermissionDenied:r(646).default,InputWithLabels:d.default,SelectWithLabel:f.default,CreateOrderForm:m.default,ShowFiles:v.default,TextareaWithLabel:h.default},layout:"engineer",middleware:["engineer"],data:function(){return{isSelectedClient:!1,isSelectPmpGroup:!1,isSelectPmpName:!1,selectedClient:null,pmpGroupSearch:"",pmpNameSearch:"",selectedPmp:null,selectedPmpRemoteNumber:null,quantity:null,description:"",finishDate:"",formSubmitted:!1,isFiles:!1,selectedFiles:[],fileQuantities:{},autoOpenFactoryId:null,isLoading:!1,files_existing:!1,remote_number_id:null,factoryOperators:{}}},computed:y(y(y(y({},Object(c.c)("factory",["getFactory"])),Object(c.c)("clients",["allClients"])),Object(c.c)("pmp",["getPmpes","getPmp"])),{},{pmpsData:function(){var p=this.getPmp||{};return!(null==p||!p.id)||!(null==p||!p.group)&&Array.isArray(null==p?void 0:p.remote_number)||Array.isArray(null==p?void 0:p.files)?{exists:!0,pmp:p}:{exists:!1}},users:function(){return this.allClients},selectedFactories:function(){var e,t=(null===(e=this.getPmp)||void 0===e?void 0:e.files)||[],r=new Set;return this.selectedFiles.forEach(function(e){var n=t.find(function(t){return Number(t.id)===Number(e)});n&&null!=n.factory_id&&r.add(Number(n.factory_id))}),(Array.isArray(this.getFactory)?this.getFactory:[]).filter(function(e){return r.has(Number(e.id))}).map(function(e){return y(y({},e),{},{operators:e.operators||[]})})},canProceedToFiles:function(){return!!(this.selectedClient&&this.selectedPmp&&this.selectedPmpRemoteNumber&&this.finishDate&&this.description)},canSubmit:function(){return this.canProceedToFiles&&!this.isEditingMode},filteredPmpGroups:function(){var e,t;if(!this.pmpGroupSearch)return(null===(e=this.getPmpes)||void 0===e?void 0:e.pmp)||[];var r=this.pmpGroupSearch.toLowerCase();return null===(t=this.getPmpes)||void 0===t?void 0:t.pmp.filter(function(e){return e.group.toLowerCase().includes(r)||e.group_name.toLowerCase().includes(r)})},filteredPmpNames:function(){if(!this.selectedPmp)return[];var e=this.selectedPmp.remote_number||[];if(!this.pmpNameSearch)return e;var t=this.pmpNameSearch.toLowerCase();return e.filter(function(e){return e.remote_number.toLowerCase().includes(t)})},isEditingMode:function(){return this.$route.path.includes("/editing")}}),watch:{selectedPmp:function(e){e||(this.selectedPmpRemoteNumber=null,this.pmpNameSearch="",this.remote_number_id=null)},selectedFactories:function(e){var t=this,r=new Set(e.map(function(e){return e.id}));e.forEach(function(e){e.id in t.factoryOperators||t.$set(t.factoryOperators,e.id,null)}),Object.keys(this.factoryOperators).forEach(function(e){r.has(Number(e))||t.$delete(t.factoryOperators,e)})}},mounted:function(){this.fetchClients(),this.fetchFactory(),this.fetchPmps()},methods:y(y(y(y(y({},Object(c.b)("factory",["fetchFactory"])),Object(c.b)("clients",["fetchClients"])),Object(c.b)("engineer",["createNewOrder"])),Object(c.b)("pmp",["fetchPmps","checkPmpByRemoteNumber","checkIfGroupExists"])),{},{selectPmpGroup:function(e){this.remote_number_id=e.id,this.selectedPmp=e,this.pmpGroupSearch=e.group,this.isSelectPmpGroup=!1},selectPmpRemoteNumber:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.selectedPmpRemoteNumber=e.remote_number,t.pmpNameSearch=e.remote_number,t.isSelectPmpName=!1,t.remote_number_id=e.id,r.next=1,t.checkPmpByRemoteNumber(e.id);case 1:case"end":return r.stop()}},r)}))()},filterPmpGroups:function(){this.isSelectPmpGroup=!0},filterPmpNames:function(){this.isSelectPmpName=!0},handleFilesSelected:function(e){this.selectedFiles=e.map(function(e){return e.id}),this.fileQuantities=e.reduce(function(e,t){return e[t.id]=t.quantity,e},{}),this.$notify({text:"Ֆայլերը ընտրված են, ընտրեք կատարող(ներ) և պահպանեք պատվերը։",duration:3e3,speed:1e3,position:"top",type:"success"})},getFactoryOperatorsFor:function(e){return e.operators||[]},pmpFiles:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark(function t(){var r,data,l,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=1;break}return t.abrupt("return");case 1:if(e.isLoading=!0,e.formSubmitted=!0,e.selectedClient&&e.selectedPmp&&e.selectedPmpRemoteNumber&&e.finishDate&&e.description&&(!e.isEditingMode||e.quantity&&!(e.quantity<=0)&&e.selectedFiles&&0!==e.selectedFiles.length)){t.next=2;break}return e.$notify({text:"Խնդրում ենք լրացնել բոլոր պարտադիր դաշտերը".concat(e.isEditingMode?" և ընտրել ֆայլեր":"","։"),duration:3e3,speed:1e3,position:"top",type:"error"}),e.isLoading=!1,t.abrupt("return");case 2:if(!(e.selectedFiles.filter(function(t){return!e.fileQuantities[t]||e.fileQuantities[t]<=0}).length>0)){t.next=3;break}return e.$notify({text:"Խնդրում ենք սահմանել վավեր քանակ (1 կամ ավելի) բոլոր ընտրված ֆայլերի համար։",duration:3e3,speed:1e3,position:"top",type:"error"}),e.isLoading=!1,t.abrupt("return");case 3:return r=Object.entries(e.factoryOperators).filter(function(e){var t=Object(n.a)(e,2);t[0];return!!t[1]}).map(function(e){var t=Object(n.a)(e,2),r=t[0],l=t[1];return{factory_id:Number(r),user_id:l}}),data={user_id:e.selectedClient.user.id,creator_id:e.$auth.user.id,name:"".concat(e.selectedPmp.group,".").concat(e.selectedPmpRemoteNumber),description:e.description,quantity:e.quantity,status:"pending",finish_date:e.finishDate,remote_number_id:e.remote_number_id,pmp_id:e.selectedPmp.id,link_existing_files:e.files_existing,selected_files:e.selectedFiles.map(function(t){return{id:t,quantity:e.fileQuantities[t]}}),factory_operators:r},t.prev=4,t.next=5,e.createNewOrder(data);case 5:e.$notify({text:"Պատվերը հաջողությամբ ստեղծվեց".concat(e.selectedFiles.length>0?" ".concat(e.selectedFiles.length," ֆայլով"):"","։"),duration:3e3,speed:1e3,position:"top",type:"success"}),e.resetForm(),e.$router.push("/engineer"),t.next=7;break;case 6:t.prev=6,o=t.catch(4),e.$notify({text:"Սխալ՝ ".concat((null===(l=o.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.error)||o.message),duration:3e3,speed:1e3,position:"top",type:"error"});case 7:return t.prev=7,e.isLoading=!1,t.finish(7);case 8:case"end":return t.stop()}},t,null,[[4,6,7,8]])}))()},selectFromOtherFactory:function(){var e;if(this.formSubmitted=!0,this.files_existing=!0,this.selectedClient&&this.selectedPmp&&this.selectedPmpRemoteNumber&&this.finishDate&&this.description&&(!this.isEditingMode||this.quantity&&!(this.quantity<=0))){var t=Array.isArray(this.getFactory)?this.getFactory:[],r=t.find(function(e){return e.files&&e.files.length>0});this.autoOpenFactoryId=r?r.id:(null===(e=t[0])||void 0===e?void 0:e.id)||null,this.isFiles=!0}else this.$notify({text:"Խնդրում ենք լրացնել բոլոր պարտադիր դաշտերը։",duration:3e3,speed:1e3,position:"top",type:"error"})},cancelBack:function(){this.$router.push("/engineer")},resetForm:function(){this.selectedClient=null,this.selectedPmp=null,this.selectedPmpRemoteNumber=null,this.pmpGroupSearch="",this.pmpNameSearch="",this.description="",this.finishDate="",this.quantity=null,this.formSubmitted=!1,this.isFiles=!1,this.autoOpenFactoryId=null,this.remote_number_id=null,this.selectedFiles=[],this.fileQuantities={},this.factoryOperators={},this.files_existing=!1}})},C=(r(754),r(32)),component=Object(C.a)(_,function(){var e,t,r,n,l,o,c,d,f,m=this,v=m._self._c;return v("div",{staticClass:"min-h-screen bg-gray-50 py-6 px-4 sm:px-6 lg:px-8"},[m.$can("orders.create")?v("div",{staticClass:"max-w-7xl mx-auto"},[v("div",{staticClass:"mb-8"},[v("h1",{staticClass:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2"},[m._v("\n        "+m._s(m.isEditingMode?"Ստեղծել նոր պատվեր խմբագրելով":"Ստեղծել նոր պատվեր")+"\n      ")]),m._v(" "),v("div",{staticClass:"w-24 h-1 bg-blue-600 rounded-full"})]),m._v(" "),m.isFiles?v("div",{staticClass:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},[v("show-files",{attrs:{pmps:m.pmpsData,factories:m.getFactory,"auto-open-factory-id":m.autoOpenFactoryId,"selected-files":m.selectedFiles,"file-quantities":m.fileQuantities,"remote-number-id":m.remote_number_id},on:{"update:selectedFiles":function(e){m.selectedFiles=e},"update:selected-files":function(e){m.selectedFiles=e},"update:fileQuantities":function(e){m.fileQuantities=e},"update:file-quantities":function(e){m.fileQuantities=e},"files-selected":m.handleFilesSelected,back:function(e){m.isFiles=!1}}}),m._v(" "),v("div",{staticClass:"mt-8 space-y-4"},[v("h3",{staticClass:"text-lg font-semibold text-gray-900"},[m._v("\n          Ընտրել կատարող յուրաքանչյուր գործարանի համար\n        ")]),m._v(" "),m._l(m.selectedFactories,function(e){return v("div",{key:e.id,staticClass:"flex flex-col sm:flex-row items-start sm:items-center gap-3"},[v("div",{staticClass:"w-full sm:w-64 font-medium text-gray-700"},[m._v("\n            "+m._s(e.name)+"\n          ")]),m._v(" "),v("select",{directives:[{name:"model",rawName:"v-model",value:m.factoryOperators[e.id],expression:"factoryOperators[factory.id]"}],staticClass:"w-full sm:flex-1 border-2 border-gray-200 rounded-xl px-3 py-2 focus:ring-4 focus:ring-blue-100 focus:border-blue-500",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});m.$set(m.factoryOperators,e.id,t.target.multiple?r:r[0])}}},[v("option",{attrs:{disabled:""},domProps:{value:null}},[m._v("Ընտրել կատարող")]),m._v(" "),m._l(m.getFactoryOperatorsFor(e),function(e){return v("option",{key:e.id,domProps:{value:e.id}},[m._v("\n              "+m._s(e.name)+"\n            ")])})],2)])})],2),m._v(" "),v("div",{staticClass:"mt-8 flex justify-end gap-3"},[v("button",{staticClass:"px-4 py-2 rounded-xl border border-gray-300 text-gray-700 hover:bg-gray-50",attrs:{type:"button"},on:{click:function(e){m.isFiles=!1}}},[m._v("\n          Վերադառնալ\n        ")]),m._v(" "),v("button",{staticClass:"px-6 py-2 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700",attrs:{type:"button"},on:{click:m.pmpFiles}},[m._v("\n          Պահպանել պատվերը\n        ")])])],1):v("div",{staticClass:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},[v("div",{staticClass:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 w"},[m._m(0),m._v(" "),v("select-with-label",{staticClass:"mb-6",class:{"border-red-500 ring-2 ring-red-200 rounded-xl py-4 px-1.5":m.formSubmitted&&!m.selectedClient},attrs:{"data-value":m.users,label:"Ընտրել հաճախորդ"},model:{value:m.selectedClient,callback:function(e){m.selectedClient=e},expression:"selectedClient"}}),m._v(" "),v("div",{staticClass:"space-y-4"},[m.selectedClient?v("div",{staticClass:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 shadow-sm"},[v("div",{staticClass:"flex items-center mb-4"},[v("div",{staticClass:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg mr-3"},[m._v("\n                "+m._s(null===(e=m.selectedClient)||void 0===e||null===(e=e.name)||void 0===e?void 0:e.charAt(0).toUpperCase())+"\n              ")]),m._v(" "),v("div",[v("h3",{staticClass:"text-xl font-bold text-gray-800"},[m._v("\n                  "+m._s(null===(t=m.selectedClient)||void 0===t?void 0:t.name)+"\n                  "+m._s((null===(r=m.selectedClient)||void 0===r?void 0:r.last_name)||"")+"\n                ")]),m._v(" "),v("p",{staticClass:"text-sm text-blue-600 font-medium"},[m._v("\n                  "+m._s((null===(n=m.selectedClient)||void 0===n?void 0:n.company_name)||"Անհատ")+"\n                ")])])]),m._v(" "),v("div",{staticClass:"flex flex-col gap-4 mt-6 text-gray-700"},[v("div",{staticClass:"flex items-center space-x-3"},[v("div",{staticClass:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[v("svg",{staticClass:"w-5 h-5 text-green-600",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[v("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"}})])]),m._v(" "),v("div",[v("p",{staticClass:"text-xs text-gray-500"},[m._v("Հեռախոս")]),m._v(" "),v("p",{staticClass:"font-medium"},[m._v("\n                    "+m._s((null===(l=m.selectedClient)||void 0===l?void 0:l.phone)||"—")+"\n                  ")]),m._v(" "),null!==(o=m.selectedClient)&&void 0!==o&&o.second_phone?v("p",{staticClass:"text-xs text-gray-500"},[m._v("\n                    "+m._s(null===(c=m.selectedClient)||void 0===c?void 0:c.second_phone)+"\n                  ")]):m._e()])]),m._v(" "),v("div",{staticClass:"flex items-center space-x-3"},[v("div",{staticClass:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center"},[v("svg",{staticClass:"w-5 h-5 text-purple-600",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[v("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}})])]),m._v(" "),v("div",[v("p",{staticClass:"text-xs text-gray-500"},[m._v("Էլ․ փոստ")]),m._v(" "),v("p",{staticClass:"font-medium"},[m._v("\n                    "+m._s((null===(d=m.selectedClient)||void 0===d?void 0:d.user.email)||"—")+"\n                  ")])])]),m._v(" "),v("div",{staticClass:"flex items-center space-x-3 sm:col-span-2"},[v("div",{staticClass:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center"},[v("svg",{staticClass:"w-5 h-5 text-amber-600",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[v("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}}),m._v(" "),v("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"}})])]),m._v(" "),v("div",{staticClass:"flex-1"},[v("p",{staticClass:"text-xs text-gray-500"},[m._v("Հասցե")]),m._v(" "),v("p",{staticClass:"font-medium"},[m._v("\n                    "+m._s((null===(f=m.selectedClient)||void 0===f?void 0:f.address)||"—")+"\n                  ")])])])])]):v("div",{staticClass:"text-center py-12 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-300"},[v("div",{staticClass:"text-gray-400 mb-3"},[v("svg",{staticClass:"w-16 h-16 mx-auto",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[v("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}})])]),m._v(" "),v("p",{staticClass:"text-gray-600 font-medium"},[m._v("\n              Խնդրում ենք ընտրել հաճախորդ\n            ")]),m._v(" "),v("p",{staticClass:"text-sm text-gray-500 mt-1"},[m._v("\n              Սկսեք՝ ընտրելով հաճախորդ վերևի ցանկից\n            ")])])])],1),m._v(" "),v("div",{staticClass:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 lg:col-span-2"},[m._m(1),m._v(" "),v("create-order-form",{staticClass:"space-y-6",attrs:{"is-editing-mode":m.isEditingMode,"success-button":"Հաստատել","cancel-button":"Չեղարկել","can-proceed-to-files":m.canProceedToFiles,"can-submit":m.canSubmit},on:{addButton:m.pmpFiles,cancelButton:m.cancelBack,selectFromOtherFactory:m.selectFromOtherFactory},scopedSlots:m._u([{key:"pmpGroup",fn:function(){return[v("div",{staticClass:"pmp-selector"},[v("label",{staticClass:"block text-sm font-semibold text-gray-700 mb-2",attrs:{for:"pmpGroup"}},[m._v("\n                Ծածկագիր "),v("span",{staticClass:"text-red-500"},[m._v("*")])]),m._v(" "),v("div",{staticClass:"relative"},[v("input",{directives:[{name:"model",rawName:"v-model",value:m.pmpGroupSearch,expression:"pmpGroupSearch"}],staticClass:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm",class:{"border-red-500 ring-2 ring-red-100":m.formSubmitted&&!m.selectedPmp},attrs:{id:"pmpGroup",type:"text",placeholder:"Փնտրել ծածկագիր..."},domProps:{value:m.pmpGroupSearch},on:{focus:function(e){m.isSelectPmpGroup=!0},input:[function(e){e.target.composing||(m.pmpGroupSearch=e.target.value)},m.filterPmpGroups]}}),m._v(" "),v("button",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 transition-colors",attrs:{type:"button"},on:{click:function(e){m.isSelectPmpGroup=!m.isSelectPmpGroup}}},[v("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[v("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),m._v(" "),m.isSelectPmpGroup?v("div",{staticClass:"absolute z-20 mt-1 w-full bg-white rounded-xl shadow-xl border border-gray-200 max-h-60 overflow-auto"},[v("ul",{staticClass:"py-2"},[m._l(m.filteredPmpGroups,function(e){return v("li",{key:e.id,staticClass:"px-4 py-3 hover:bg-blue-50 cursor-pointer text-gray-700 transition-colors border-b border-gray-100 last:border-b-0",on:{click:function(t){return m.selectPmpGroup(e)}}},[v("div",{staticClass:"flex justify-between items-center"},[v("div",[v("p",{staticClass:"font-medium text-gray-900"},[m._v("\n                          "+m._s(e.group)+"\n                        ")]),m._v(" "),v("p",{staticClass:"text-sm text-gray-500"},[m._v("\n                          "+m._s(e.group_name)+"\n                        ")])]),m._v(" "),v("div",{staticClass:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full"},[m._v("\n                        Ընտրել\n                      ")])])])}),m._v(" "),0===m.filteredPmpGroups.length?v("li",{staticClass:"px-4 py-3 text-gray-500 text-center"},[m._v("\n                    Չգտնվեց ծածկագիր\n                  ")]):m._e()],2)]):m._e()])]},proxy:!0},{key:"pmpName",fn:function(){return[v("div",{staticClass:"pmp-selector"},[v("label",{staticClass:"block text-sm font-semibold text-gray-700 mb-2",attrs:{for:"pmpRemoteNumberName"}},[m._v("\n                Ընտրել Անունը "),v("span",{staticClass:"text-red-500"},[m._v("*")])]),m._v(" "),v("div",{staticClass:"relative"},[v("input",{directives:[{name:"model",rawName:"v-model",value:m.pmpNameSearch,expression:"pmpNameSearch"}],staticClass:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm disabled:bg-gray-50 disabled:cursor-not-allowed",class:{"border-red-500 ring-2 ring-red-100":m.formSubmitted&&!m.selectedPmpRemoteNumber,"cursor-not-allowed opacity-50":!m.selectedPmp},attrs:{id:"pmpRemoteNumberName",type:"text",disabled:!m.selectedPmp,placeholder:"Փնտրել անուն..."},domProps:{value:m.pmpNameSearch},on:{focus:function(e){m.isSelectPmpName=!!m.selectedPmp},input:[function(e){e.target.composing||(m.pmpNameSearch=e.target.value)},m.filterPmpNames]}}),m._v(" "),v("button",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",attrs:{type:"button",disabled:!m.selectedPmp},on:{click:function(e){m.isSelectPmpName=!m.isSelectPmpName}}},[v("svg",{staticClass:"w-5 h-5",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"}},[v("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}})])])]),m._v(" "),m.isSelectPmpName&&m.selectedPmp?v("div",{staticClass:"absolute z-20 mt-1 w-full bg-white rounded-xl shadow-xl border border-gray-200 max-h-60 overflow-auto"},[v("ul",{staticClass:"py-2"},[m._l(m.filteredPmpNames,function(e,t){return v("li",{key:t,staticClass:"px-4 py-3 hover:bg-blue-50 cursor-pointer text-gray-700 transition-colors border-b border-gray-100 last:border-b-0",on:{click:function(t){return m.selectPmpRemoteNumber(e)}}},[v("div",{staticClass:"flex justify-between items-center"},[v("div",[v("p",{staticClass:"font-medium text-gray-900"},[m._v("\n                          "+m._s(e.remote_number)+"\n                        ")]),m._v(" "),v("p",{staticClass:"text-sm text-gray-500"},[m._v("\n                          "+m._s(e.remote_number_name)+"\n                        ")])]),m._v(" "),v("div",{staticClass:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},[m._v("\n                        Ընտրել\n                      ")])])])}),m._v(" "),0===m.filteredPmpNames.length?v("li",{staticClass:"px-4 py-3 text-gray-500 text-center"},[m._v("\n                    Չգտնվեց անուն\n                  ")]):m._e()],2)]):m._e()])]},proxy:!0},{key:"finishDate",fn:function(){return[v("div",[v("label",{staticClass:"block text-sm font-semibold text-gray-700 mb-2",attrs:{for:"finishDate"}},[m._v("\n                Անհաժեշտ ավարտի ամսաթիվ "),v("span",{staticClass:"text-red-500"},[m._v("*")])]),m._v(" "),v("input-with-labels",{staticClass:"border-2 border-gray-200 focus:ring-4 focus:ring-blue-100 focus:border-blue-500 rounded-xl",class:{"border-red-500 ring-2 ring-red-100":m.formSubmitted&&!m.finishDate},attrs:{id:"finishDate",type:"datetime-local"},model:{value:m.finishDate,callback:function(e){m.finishDate=e},expression:"finishDate"}})],1)]},proxy:!0},{key:"description",fn:function(){return[v("div",[v("label",{staticClass:"block text-sm font-semibold text-gray-700 mb-2",attrs:{for:"description"}},[m._v("\n                Նկարագրություն "),v("span",{staticClass:"text-red-500"},[m._v("*")])]),m._v(" "),v("textarea-with-label",{staticClass:"border-2 border-gray-200 focus:ring-4 focus:ring-blue-100 focus:border-blue-500 rounded-xl resize-none",class:{"border-red-500 ring-2 ring-red-100":m.formSubmitted&&!m.description},attrs:{id:"description",type:"text",rows:4,placeholder:"Մուտքագրեք պատվերի նկարագրությունը..."},model:{value:m.description,callback:function(e){m.description=e},expression:"description"}})],1)]},proxy:!0}],null,!1,108136083)})],1)]),m._v(" "),m.isLoading?v("div",{staticClass:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},[m._m(2)]):m._e(),m._v(" "),v("notifications")],1):v("PermissionDenied")],1)},[function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex items-center mb-12 w-full"},[t("div",{staticClass:"w-2 h-8 bg-blue-500 rounded-full mr-3"}),e._v(" "),t("h2",{staticClass:"text-xl font-semibold text-gray-900"},[e._v("\n            Հաճախորդի տվյալներ\n          ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex items-center mb-6"},[t("div",{staticClass:"w-2 h-8 bg-indigo-500 rounded-full mr-3"}),e._v(" "),t("h2",{staticClass:"text-xl font-semibold text-gray-900"},[e._v("\n            Պատվերի մանրամասներ\n          ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-white rounded-xl p-6 shadow-xl"},[t("div",{staticClass:"flex items-center space-x-3"},[t("div",{staticClass:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e._v(" "),t("span",{staticClass:"text-gray-700 font-medium"},[e._v("Պահպանվում է...")])])])}],!1,null,"1604939b",null);t.default=component.exports}}]);