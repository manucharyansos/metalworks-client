(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{538:function(t,e,r){var content=r(576);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(36).default)("7f7e67c4",content,!0,{sourceMap:!1})},575:function(t,e,r){"use strict";r(538)},576:function(t,e,r){var o=r(35)(function(i){return i[1]});o.push([t.i,".checkout-page[data-v-58987e13]{max-width:1200px}@media (max-width:768px){.checkout-page[data-v-58987e13]{padding:16px}}",""]),o.locals={},t.exports=o},633:function(t,e,r){"use strict";r.r(e);r(20),r(43),r(18),r(6),r(19),r(29),r(30),r(25),r(26);var o=r(0),n=r(10),m=(r(9),r(192),r(31)),d=r(110),l=r.n(d);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach(function(e){Object(n.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var v={data:function(){return{form:{name:"",email:"",address:"",phone:"",payment_method:"cash"}}},computed:f(f({},Object(m.c)("basket",["basketItems","basketTotal","isLoading"])),{},{items:function(){return Array.isArray(this.basketItems)?this.basketItems:[]},total:function(){return this.basketTotal},loading:function(){return this.isLoading}}),mounted:function(){this.fetchBasket(),this.loadUserData()},methods:f(f({},Object(m.b)("basket",["fetchBasket","clearBasket"])),{},{loadUserData:function(){this.form.name=this.$auth.user.name||"",this.form.email=this.$auth.user.email||"",this.form.address=this.$auth.user.address||"",this.form.phone=this.$auth.user.phone||""},submitPurchase:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var r,o,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,l.a.post("/api/checkout",f(f({},t.form),{},{items:t.items,total:t.total}));case 1:r=e.sent,t.clearBasket(),t.$router.push({name:"purchase-confirmation",params:{purchaseId:r.data.purchase_id}}),e.next=3;break;case 2:e.prev=2,n=e.catch(0),t.$toast.error((null===(o=n.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||"Պատվերը տեղադրելու խնդիր");case 3:case"end":return e.stop()}},e,null,[[0,2]])}))()},formatPrice:function(t){return parseFloat(t).toFixed(2)}})},h=(r(575),r(11)),component=Object(h.a)(v,function(){var t=this,e=t._self._c;return e("div",{staticClass:"checkout-page container mx-auto px-4 py-8"},[e("h1",{staticClass:"text-2xl md:text-3xl font-bold mb-6 text-center"},[t._v("Վճարում")]),t._v(" "),e("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",{staticClass:"bg-white p-6 rounded-lg shadow-md"},[e("h2",{staticClass:"text-xl font-semibold mb-4"},[t._v("Առաքման մանրամասներ")]),t._v(" "),e("form",{on:{submit:function(e){return e.preventDefault(),t.submitPurchase.apply(null,arguments)}}},[e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"name"}},[t._v("Անուն")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",attrs:{id:"name",type:"text",required:""},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"email"}},[t._v("Էլ. փոստ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",attrs:{id:"email",type:"email",required:""},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"address"}},[t._v("Հասցե")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",attrs:{id:"address",type:"text",required:""},domProps:{value:t.form.address},on:{input:function(e){e.target.composing||t.$set(t.form,"address",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"phone"}},[t._v("Հեռախոս")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.phone,expression:"form.phone"}],staticClass:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",attrs:{id:"phone",type:"tel",required:""},domProps:{value:t.form.phone},on:{input:function(e){e.target.composing||t.$set(t.form,"phone",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"payment_method"}},[t._v("Վճարման եղանակ")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment_method,expression:"form.payment_method"}],staticClass:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",attrs:{id:"payment_method",required:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"payment_method",e.target.multiple?r:r[0])}}},[e("option",{attrs:{value:"cash"}},[t._v("Կանխիկ առաքման ժամանակ")]),t._v(" "),e("option",{attrs:{value:"card"}},[t._v("Բանկային քարտ")])])]),t._v(" "),e("button",{staticClass:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700",attrs:{type:"submit",disabled:t.loading}},[t._v("\n          "+t._s(t.loading?"Մշակվում է...":"Տեղադրել պատվեր")+"\n        ")])])]),t._v(" "),e("div",{staticClass:"bg-white p-6 rounded-lg shadow-md"},[e("h2",{staticClass:"text-xl font-semibold mb-4"},[t._v("Պատվերի ամփոփում")]),t._v(" "),0===t.items.length?e("div",{staticClass:"text-center text-gray-500"},[t._v("\n        Ձեր զամբյուղը դատարկ է\n      ")]):e("div",[t._l(t.items,function(r){return e("div",{key:r.id,staticClass:"flex justify-between mb-3"},[e("div",{staticClass:"flex items-center"},[e("img",{staticClass:"w-12 h-12 object-cover rounded mr-3",attrs:{src:r.image||"/images/placeholder-product.jpg",alt:"item.name"}}),t._v(" "),e("div",[e("p",{staticClass:"font-medium"},[t._v(t._s(r.name))]),t._v(" "),e("p",{staticClass:"text-sm text-gray-500"},[t._v("\n                "+t._s(r.quantity)+" x "+t._s(t.formatPrice(r.price))+" դրամ\n              ")])])]),t._v(" "),e("p",{staticClass:"font-medium"},[t._v(t._s(t.formatPrice(r.total))+" դրամ")])])}),t._v(" "),e("hr",{staticClass:"my-4"}),t._v(" "),e("div",{staticClass:"flex justify-between font-semibold"},[e("span",[t._v("Ընդհանուր:")]),t._v(" "),e("span",[t._v(t._s(t.formatPrice(t.total))+" դրամ")])])],2)])])])},[],!1,null,"58987e13",null);e.default=component.exports}}]);